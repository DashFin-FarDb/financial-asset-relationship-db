<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="unit_2test__documentation__validation_8py" kind="file" language="Python">
    <compoundname>test_documentation_validation.py</compoundname>
    <innernamespace refid="namespacetests">tests</innernamespace>
    <innernamespace refid="namespacetests_1_1unit">tests::unit</innernamespace>
    <innernamespace refid="namespacetests_1_1unit_1_1test__documentation__validation">tests::unit::test_documentation_validation</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacetests_1_1unit_1_1test__documentation__validation" refkind="compound"><highlight class="stringliteral">r&quot;&quot;&quot;Unit<sp/>tests<sp/>for<sp/>validating<sp/>.elastic-copilot<sp/>documentation<sp/>files.</highlight></codeline>
<codeline lineno="2"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="3"><highlight class="stringliteral">This<sp/>module<sp/>tests<sp/>markdown<sp/>documentation<sp/>files<sp/>to<sp/>ensure:</highlight></codeline>
<codeline lineno="4"><highlight class="stringliteral">-<sp/>Valid<sp/>markdown<sp/>structure<sp/>and<sp/>formatting</highlight></codeline>
<codeline lineno="5"><highlight class="stringliteral">-<sp/>Required<sp/>sections<sp/>are<sp/>present</highlight></codeline>
<codeline lineno="6"><highlight class="stringliteral">-<sp/>Data<sp/>consistency<sp/>(file<sp/>counts,<sp/>timestamps,<sp/>etc.)</highlight></codeline>
<codeline lineno="7"><highlight class="stringliteral">-<sp/>Dependency<sp/>listings<sp/>are<sp/>properly<sp/>formatted</highlight></codeline>
<codeline lineno="8"><highlight class="stringliteral">-<sp/>Cross-references<sp/>and<sp/>internal<sp/>consistency</highlight></codeline>
<codeline lineno="9"><highlight class="stringliteral">-<sp/>Content<sp/>accuracy<sp/>relative<sp/>to<sp/>actual<sp/>codebase</highlight></codeline>
<codeline lineno="10"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>re</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>datetime<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>datetime,<sp/>timedelta,<sp/>timezone</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>pathlib<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Path</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>pytest</highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">TestDependencyMatrix:</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Test<sp/>cases<sp/>for<sp/>.elastic-copilot/memory/dependencyMatrix.md.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@pytest.fixture</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">dependency_matrix_path(self):</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="25"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Return<sp/>the<sp/>filesystem<sp/>path<sp/>to<sp/>the<sp/>repository&apos;s<sp/>dependency<sp/>matrix<sp/>markdown<sp/>file.</highlight></codeline>
<codeline lineno="26"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="27"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="28"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Path:<sp/>Path<sp/>to<sp/>.elastic-copilot/memory/dependencyMatrix.md</highlight></codeline>
<codeline lineno="29"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>Path(</highlight><highlight class="stringliteral">&quot;.elastic-copilot/memory/dependencyMatrix.md&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@pytest.fixture</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">dependency_matrix_content(self,<sp/>dependency_matrix_path):</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="35"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@pytest.fixture</highlight></codeline>
<codeline lineno="36"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@staticmethod</highlight></codeline>
<codeline lineno="37"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>dependency_matrix_content(dependency_matrix_path):</highlight></codeline>
<codeline lineno="38"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Load<sp/>the<sp/>dependency<sp/>matrix<sp/>markdown<sp/>content<sp/></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>disk.</highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>contents<sp/>of<sp/>the<sp/>dependencyMatrix.md<sp/>file<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>a<sp/>string.</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Raises:</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AssertionError:<sp/>If<sp/>`dependency_matrix_path`<sp/>does<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>exist.</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="47"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>dependency_matrix_path.exists(),<sp/>&quot;dependencyMatrix.md<sp/>not<sp/>found&quot;</highlight></codeline>
<codeline lineno="48"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>with<sp/>open(dependency_matrix_path,<sp/>encoding=&quot;utf-8&quot;)<sp/>as<sp/>f:</highlight></codeline>
<codeline lineno="49"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>f.read()</highlight></codeline>
<codeline lineno="50"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="51"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@pytest.fixture</highlight></codeline>
<codeline lineno="52"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@staticmethod</highlight></codeline>
<codeline lineno="53"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>dependency_matrix_lines(dependency_matrix_content):</highlight></codeline>
<codeline lineno="54"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Split<sp/>dependency<sp/>matrix<sp/>content<sp/>into<sp/>individual<sp/>lines.</highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dependency_matrix_content(str):<sp/>Full<sp/>text<sp/>content<sp/>of<sp/>the<sp/>dependency<sp/>matrix<sp/>file.</highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>list[str]:<sp/>Lines<sp/>of<sp/>the<sp/>content<sp/>produced<sp/>by<sp/>splitting<sp/>on<sp/>the<sp/>newline<sp/>character.</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="63"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>dependency_matrix_content.split(&quot;\n&quot;)</highlight></codeline>
<codeline lineno="64"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="65"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_exists(self,<sp/>dependency_matrix_path):</highlight></codeline>
<codeline lineno="66"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">Test<sp/>that<sp/>dependencyMatrix.md<sp/>exists.</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="67"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>dependency_matrix_path.exists()</highlight></codeline>
<codeline lineno="68"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>dependency_matrix_path.is_file()</highlight></codeline>
<codeline lineno="69"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="70"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_not_empty(self,<sp/>dependency_matrix_content):</highlight></codeline>
<codeline lineno="71"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">Test<sp/>that<sp/>dependencyMatrix.md<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>empty.</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="72"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>len(dependency_matrix_content.strip())<sp/>&gt;<sp/>0</highlight></codeline>
<codeline lineno="73"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="74"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_has_title(self,<sp/>dependency_matrix_lines):</highlight></codeline>
<codeline lineno="75"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">Test<sp/>that<sp/>dependencyMatrix.md<sp/>has<sp/>proper<sp/>title.</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="76"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>dependency_matrix_lines[0]<sp/>==<sp/>&quot;#<sp/>Dependency<sp/>Matrix&quot;</highlight></codeline>
<codeline lineno="77"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="78"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_has_generated_timestamp(self,<sp/>dependency_matrix_content):</highlight></codeline>
<codeline lineno="79"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Verify<sp/>that<sp/>dependencyMatrix.md<sp/>contains<sp/>a<sp/></highlight><highlight class="stringliteral">&quot;Generated&quot;</highlight><highlight class="normal"><sp/>timestamp<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>ISO<sp/>8601<sp/>format.</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>test<sp/>looks<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>a<sp/>line<sp/>matching<sp/>the<sp/>pattern<sp/></highlight><highlight class="stringliteral">&apos;*Generated:<sp/>YYYY-MM-DDTHH:MM:SS.sssZ*&apos;</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>example<sp/></highlight><highlight class="stringliteral">&apos;*Generated:<sp/>2025-11-07T18:22:38.791Z*&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>asserts<sp/>the<sp/>captured<sp/>timestamp<sp/>can<sp/>be<sp/>parsed<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>a<sp/>valid<sp/>ISO<sp/>8601<sp/>instant.</highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dependency_matrix_content(str):<sp/>The<sp/>full<sp/>text<sp/>content<sp/>of<sp/>dependencyMatrix.md<sp/>to<sp/>be<sp/>inspected.</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="87"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Look<sp/>for:<sp/>*Generated:<sp/>2025-11-07T18:22:38.791Z*</highlight></codeline>
<codeline lineno="88"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>timestamp_pattern<sp/>=<sp/>r&quot;\*Generated:<sp/>(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z)\*&quot;</highlight></codeline>
<codeline lineno="89"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>re.search(timestamp_pattern,<sp/>dependency_matrix_content)</highlight></codeline>
<codeline lineno="90"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="91"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>match<sp/>is<sp/>not<sp/>None,<sp/>&quot;Generated<sp/>timestamp<sp/>not<sp/>found&quot;</highlight></codeline>
<codeline lineno="92"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="93"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Validate<sp/>timestamp<sp/>format</highlight></codeline>
<codeline lineno="94"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>timestamp_str<sp/>=<sp/>match.group(1)</highlight></codeline>
<codeline lineno="95"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>try:</highlight></codeline>
<codeline lineno="96"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>datetime.fromisoformat(timestamp_str.replace(&quot;Z&quot;,<sp/>&quot;+00:00&quot;))</highlight></codeline>
<codeline lineno="97"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>except<sp/>ValueError:</highlight></codeline>
<codeline lineno="98"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pytest.fail(f&quot;Invalid<sp/>timestamp<sp/>format:<sp/>{timestamp_str}&quot;)</highlight></codeline>
<codeline lineno="99"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="100"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_has_summary_section(self,<sp/>dependency_matrix_content):</highlight></codeline>
<codeline lineno="101"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">Test<sp/>that<sp/>dependencyMatrix.md<sp/>has<sp/>Summary<sp/>section.</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="102"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>&quot;##<sp/>Summary&quot;<sp/>in<sp/>dependency_matrix_content</highlight></codeline>
<codeline lineno="103"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="104"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_has_file_count(self,<sp/>dependency_matrix_content):</highlight></codeline>
<codeline lineno="105"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">Test<sp/>that<sp/>dependencyMatrix.md<sp/>specifies<sp/>files<sp/>analyzed<sp/>count.</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="106"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern<sp/>=<sp/>r&quot;-<sp/>Files<sp/>analyzed:<sp/>(\d+)&quot;</highlight></codeline>
<codeline lineno="107"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>re.search(pattern,<sp/>dependency_matrix_content)</highlight></codeline>
<codeline lineno="108"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="109"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>match<sp/>is<sp/>not<sp/>None,<sp/>&quot;Files<sp/>analyzed<sp/>count<sp/>not<sp/>found&quot;</highlight></codeline>
<codeline lineno="110"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>count<sp/>=<sp/>int(match.group(1))</highlight></codeline>
<codeline lineno="111"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>count<sp/>&gt;<sp/>0,<sp/>&quot;Files<sp/>analyzed<sp/>count<sp/>should<sp/>be<sp/>positive&quot;</highlight></codeline>
<codeline lineno="112"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="113"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_has_file_types(self,<sp/>dependency_matrix_content):</highlight></codeline>
<codeline lineno="114"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Validate<sp/>that<sp/>the<sp/>dependency<sp/>matrix<sp/>declares<sp/>recognised<sp/>file<sp/>types.</highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Asserts<sp/>the<sp/>presence<sp/>of<sp/>a<sp/></highlight><highlight class="stringliteral">&quot;-<sp/>File<sp/>types:<sp/>...&quot;</highlight><highlight class="normal"><sp/>entry<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>the<sp/>provided<sp/>document<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>that<sp/>it<sp/>lists<sp/>at<sp/>least<sp/>one<sp/>file<sp/>type.<sp/>Also<sp/>ensures<sp/>every<sp/>listed<sp/>type<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/>within<sp/>the<sp/>allowed<sp/>set(py,<sp/>js,<sp/>ts,<sp/>tsx)<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>permitted<sp/>extras(jsx,<sp/>json,<sp/>md).</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dependency_matrix_content(str):<sp/>Full<sp/>text<sp/>content<sp/>of<sp/>.elastic<sp/>-<sp/>copilot<sp/>/<sp/>memory<sp/>/<sp/>dependencyMatrix.md<sp/>to<sp/>inspect.</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="122"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern<sp/>=<sp/>r&quot;-<sp/>File<sp/>types:<sp/>(.+)&quot;</highlight></codeline>
<codeline lineno="123"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>re.search(pattern,<sp/>dependency_matrix_content)</highlight></codeline>
<codeline lineno="124"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="125"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>match<sp/>is<sp/>not<sp/>None,<sp/>&quot;File<sp/>types<sp/>not<sp/>found&quot;</highlight></codeline>
<codeline lineno="126"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_types<sp/>=<sp/>match.group(1).split(&quot;,<sp/>&quot;)</highlight></codeline>
<codeline lineno="127"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>len(file_types)<sp/>&gt;<sp/>0,<sp/>&quot;At<sp/>least<sp/>one<sp/>file<sp/>type<sp/>should<sp/>be<sp/>listed&quot;</highlight></codeline>
<codeline lineno="128"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="129"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Common<sp/>expected<sp/>file<sp/>types</highlight></codeline>
<codeline lineno="130"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expected_types<sp/>=<sp/>{&quot;py&quot;,<sp/>&quot;js&quot;,<sp/>&quot;ts&quot;,<sp/>&quot;tsx&quot;}</highlight></codeline>
<codeline lineno="131"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>found_types<sp/>=<sp/>set(file_types)</highlight></codeline>
<codeline lineno="132"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>found_types.issubset(</highlight></codeline>
<codeline lineno="133"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expected_types<sp/>|<sp/>{&quot;jsx&quot;,<sp/>&quot;json&quot;,<sp/>&quot;md&quot;}</highlight></codeline>
<codeline lineno="134"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>),<sp/>f&quot;Unexpected<sp/>file<sp/>types:<sp/>{found_types<sp/>-<sp/>expected_types}&quot;</highlight></codeline>
<codeline lineno="135"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="136"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_has_file_type_distribution(self,<sp/>dependency_matrix_content):</highlight></codeline>
<codeline lineno="137"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">Test<sp/>that<sp/>dependencyMatrix.md<sp/>has<sp/>File<sp/>Type<sp/>Distribution<sp/>section.</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="138"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>&quot;##<sp/>File<sp/>Type<sp/>Distribution&quot;<sp/>in<sp/>dependency_matrix_content</highlight></codeline>
<codeline lineno="139"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="140"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_file_counts_match(self,<sp/>dependency_matrix_content):</highlight></codeline>
<codeline lineno="141"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Verify<sp/>that<sp/>the<sp/>reported<sp/>total<sp/>files<sp/>analysed<sp/>equals<sp/>the<sp/>sum<sp/>of<sp/>the<sp/>per<sp/>-<sp/>file<sp/>-<sp/>type<sp/>counts.</highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Asserts<sp/>that<sp/>the<sp/>integer<sp/>parsed<sp/></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;-<sp/>Files<sp/>analyzed:<sp/>N&quot;</highlight><highlight class="normal"><sp/>matches<sp/>the<sp/>sum<sp/>of<sp/>all<sp/>integers<sp/>parsed<sp/></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>lines<sp/>like<sp/></highlight><highlight class="stringliteral">&quot;-<sp/>X<sp/>&lt;type&gt;<sp/>files&quot;</highlight><highlight class="normal">.</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="146"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Extract<sp/>total<sp/>files<sp/>analyzed</highlight></codeline>
<codeline lineno="147"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>total_pattern<sp/>=<sp/>r&quot;-<sp/>Files<sp/>analyzed:<sp/>(\d+)&quot;</highlight></codeline>
<codeline lineno="148"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>total_match<sp/>=<sp/>re.search(total_pattern,<sp/>dependency_matrix_content)</highlight></codeline>
<codeline lineno="149"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>total_match<sp/>is<sp/>not<sp/>None</highlight></codeline>
<codeline lineno="150"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>total_count<sp/>=<sp/>int(total_match.group(1))</highlight></codeline>
<codeline lineno="151"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="152"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Extract<sp/>individual<sp/>file<sp/>type<sp/>counts</highlight></codeline>
<codeline lineno="153"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>distribution_pattern<sp/>=<sp/>r&quot;-<sp/>(\d+)<sp/>(\w+)<sp/>files&quot;</highlight></codeline>
<codeline lineno="154"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>distribution_matches<sp/>=<sp/>re.findall(distribution_pattern,<sp/>dependency_matrix_content)</highlight></codeline>
<codeline lineno="155"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="156"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sum_counts<sp/>=<sp/>sum(int(count)<sp/>for<sp/>count,<sp/>_<sp/>in<sp/>distribution_matches)</highlight></codeline>
<codeline lineno="157"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>sum_counts<sp/>==<sp/>total_count,<sp/>f&quot;Sum<sp/>of<sp/>file<sp/>type<sp/>counts<sp/>({sum_counts})<sp/>doesn&apos;t<sp/>match<sp/>total<sp/>({total_count})&quot;</highlight></codeline>
<codeline lineno="158"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="159"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_has_key_dependencies_section(self,<sp/>dependency_matrix_content):</highlight></codeline>
<codeline lineno="160"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">Test<sp/>that<sp/>dependencyMatrix.md<sp/>has<sp/>Key<sp/>Dependencies<sp/>by<sp/>Type<sp/>section.</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="161"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>&quot;##<sp/>Key<sp/>Dependencies<sp/>by<sp/>Type&quot;<sp/>in<sp/>dependency_matrix_content</highlight></codeline>
<codeline lineno="162"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="163"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_language_sections_exist(self,<sp/>dependency_matrix_content):</highlight></codeline>
<codeline lineno="164"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Check<sp/>that<sp/>the<sp/>dependency<sp/>matrix<sp/>contains<sp/>at<sp/>least<sp/>one<sp/>major<sp/>language<sp/>section.</highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Verifies<sp/>the<sp/>document<sp/>includes<sp/>at<sp/>least<sp/>one<sp/>of<sp/>the<sp/>language<sp/>headings:<sp/></highlight><highlight class="stringliteral">&quot;###<sp/>PY&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;###<sp/>JS&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;###<sp/>TS&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;###<sp/>TSX&quot;</highlight><highlight class="normal">.</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Fails<sp/>the<sp/>test<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>none<sp/>of<sp/>these<sp/>sections<sp/>are<sp/>present.</highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dependency_matrix_content(str):<sp/>The<sp/>full<sp/>text<sp/>content<sp/>of<sp/>the<sp/>dependencyMatrix.md<sp/>file.</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="173"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Check<sp/>for<sp/>at<sp/>least<sp/>some<sp/>of<sp/>the<sp/>main<sp/>language<sp/>sections</highlight></codeline>
<codeline lineno="174"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>language_sections<sp/>=<sp/>[&quot;###<sp/>PY&quot;,<sp/>&quot;###<sp/>JS&quot;,<sp/>&quot;###<sp/>TS&quot;,<sp/>&quot;###<sp/>TSX&quot;]</highlight></codeline>
<codeline lineno="175"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="176"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>found_sections<sp/>=<sp/>[section<sp/>for<sp/>section<sp/>in<sp/>language_sections<sp/>if<sp/>section<sp/>in<sp/>dependency_matrix_content]</highlight></codeline>
<codeline lineno="177"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="178"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>len(found_sections)<sp/>&gt;<sp/>0,<sp/>&quot;No<sp/>language<sp/>dependency<sp/>sections<sp/>found&quot;</highlight></codeline>
<codeline lineno="179"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="180"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_dependency_format(self,<sp/>dependency_matrix_content):</highlight></codeline>
<codeline lineno="181"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Validate<sp/>that<sp/>dependency<sp/>lists<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>the<sp/>dependency<sp/>matrix<sp/>are<sp/>formatted<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>bullet<sp/>points.</highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>For<sp/>each<sp/></highlight><highlight class="stringliteral">&quot;Top<sp/>dependencies:&quot;</highlight><highlight class="normal"><sp/>section<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>the<sp/>provided<sp/>document,<sp/>ensures<sp/>the<sp/>section<sp/>content(up<sp/>to<sp/>the<sp/>next<sp/></highlight><highlight class="stringliteral">&quot;###&quot;</highlight><highlight class="normal"><sp/>heading)<sp/>either<sp/>contains<sp/>the<sp/>message<sp/></highlight><highlight class="stringliteral">&quot;No<sp/>common<sp/>dependencies<sp/>found&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>consists<sp/>of<sp/>non<sp/>-<sp/>empty<sp/>lines<sp/>that<sp/>start<sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>a<sp/>dash(`-`).</highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dependency_matrix_content(str):<sp/>Full<sp/>text<sp/>content<sp/>of<sp/>the<sp/>dependencyMatrix.md<sp/>file.</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="189"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>After<sp/>&quot;Top<sp/>dependencies:&quot;<sp/>there<sp/>should<sp/>be<sp/>bullet<sp/>points</highlight></codeline>
<codeline lineno="190"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sections<sp/>=<sp/>dependency_matrix_content.split(&quot;Top<sp/>dependencies:&quot;)</highlight></codeline>
<codeline lineno="191"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="192"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>for<sp/>section<sp/>in<sp/>sections[1:]:<sp/><sp/>#<sp/>Skip<sp/>first<sp/>part<sp/>before<sp/>any<sp/>&quot;Top<sp/>dependencies:&quot;</highlight></codeline>
<codeline lineno="193"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Get<sp/>content<sp/>until<sp/>next<sp/>###<sp/>or<sp/>end</highlight></codeline>
<codeline lineno="194"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content<sp/>=<sp/>section.split(&quot;###&quot;)[0].strip()</highlight></codeline>
<codeline lineno="195"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="196"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>content<sp/>and<sp/>&quot;No<sp/>common<sp/>dependencies<sp/>found&quot;<sp/>not<sp/>in<sp/>content:</highlight></codeline>
<codeline lineno="197"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines<sp/>=<sp/>content.split(&quot;\n&quot;)</highlight></codeline>
<codeline lineno="198"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>for<sp/>line<sp/>in<sp/>lines:</highlight></codeline>
<codeline lineno="199"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>line.strip():</highlight></codeline>
<codeline lineno="200"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>line.strip().startswith(&quot;-&quot;),<sp/>f&quot;Dependency<sp/>line<sp/>should<sp/>start<sp/>with<sp/>&apos;-&apos;:<sp/>{line}&quot;</highlight></codeline>
<codeline lineno="201"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="202"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_no_empty_dependency_sections(self,<sp/>dependency_matrix_content):</highlight></codeline>
<codeline lineno="203"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Ensure<sp/>each<sp/></highlight><highlight class="stringliteral">&quot;Top<sp/>dependencies:&quot;</highlight><highlight class="normal"><sp/>section<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>the<sp/>dependency<sp/>matrix<sp/>contains<sp/>non<sp/>-<sp/>empty<sp/>content.</highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dependency_matrix_content(str):<sp/>Full<sp/>Markdown<sp/>content<sp/>of<sp/>the<sp/>dependency<sp/>matrix<sp/>file</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>test<sp/>splits<sp/>this<sp/>by<sp/>the<sp/></highlight><highlight class="stringliteral">&quot;Top<sp/>dependencies:&quot;</highlight><highlight class="normal"><sp/>marker<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>asserts<sp/>that<sp/>the<sp/>text<sp/>preceding<sp/>the<sp/>next<sp/></highlight><highlight class="stringliteral">&quot;###&quot;</highlight><highlight class="normal"><sp/>heading<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>empty<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>each<sp/>section.</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="210"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>After<sp/>&quot;Top<sp/>dependencies:&quot;<sp/>should<sp/>be<sp/>either<sp/>dependencies<sp/>or<sp/>explicit<sp/>message</highlight></codeline>
<codeline lineno="211"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sections<sp/>=<sp/>dependency_matrix_content.split(&quot;Top<sp/>dependencies:&quot;)</highlight></codeline>
<codeline lineno="212"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="213"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>for<sp/>section<sp/>in<sp/>sections[1:]:</highlight></codeline>
<codeline lineno="214"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content<sp/>=<sp/>section.split(&quot;###&quot;)[0].strip()</highlight></codeline>
<codeline lineno="215"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Should<sp/>have<sp/>some<sp/>content</highlight></codeline>
<codeline lineno="216"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>len(content)<sp/>&gt;<sp/>0,<sp/>&quot;Empty<sp/>dependency<sp/>section<sp/>found&quot;</highlight></codeline>
<codeline lineno="217"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="218"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_dependency_matrix_markdown_formatting(self,<sp/>dependency_matrix_lines):</highlight></codeline>
<codeline lineno="219"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Verify<sp/>that<sp/>markdown<sp/>headings<sp/>use<sp/>a<sp/>space<sp/>after<sp/>the<sp/>hash<sp/>characters.</highlight></codeline>
<codeline lineno="221"><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dependency_matrix_lines(list[str]):<sp/>Lines<sp/>of<sp/>the<sp/>dependency<sp/>matrix<sp/>markdown<sp/>file<sp/>to<sp/>validate.</highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Raises:</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AssertionError:<sp/>If<sp/>a<sp/>heading<sp/>line(one<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>more<sp/></highlight><highlight class="stringliteral">&apos;#&apos;</highlight><highlight class="normal"><sp/>characters<sp/>followed<sp/>by<sp/>content)<sp/>does<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>have<sp/>a<sp/>space<sp/>after<sp/>the<sp/>hashes</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message<sp/>includes<sp/>the<sp/>offending<sp/>line<sp/>number<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>content.</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="229"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>for<sp/>i,<sp/>line<sp/>in<sp/>enumerate(dependency_matrix_lines):</highlight></codeline>
<codeline lineno="230"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Check<sp/>heading<sp/>formatting</highlight></codeline>
<codeline lineno="231"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>line.startswith(&quot;#&quot;):</highlight></codeline>
<codeline lineno="232"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Headings<sp/>should<sp/>have<sp/>space<sp/>after<sp/>#</highlight></codeline>
<codeline lineno="233"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>heading_match<sp/>=<sp/>re.match(r&quot;^(#+)(.+)&quot;,<sp/>line)</highlight></codeline>
<codeline lineno="234"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>heading_match:</highlight></codeline>
<codeline lineno="235"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_,<sp/>content<sp/>=<sp/>heading_match.groups()</highlight></codeline>
<codeline lineno="236"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>content:<sp/><sp/>#<sp/>Not<sp/>just<sp/>hashes</highlight></codeline>
<codeline lineno="237"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>content.startswith(&quot;<sp/>&quot;),<sp/>f&quot;Line<sp/>{i+1}:<sp/>Heading<sp/>should<sp/>have<sp/>space<sp/>after<sp/>#:<sp/>{line}&quot;</highlight></codeline>
<codeline lineno="238"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="239"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="240"><highlight class="stringliteral">class<sp/>TestSystemManifest:</highlight></codeline>
<codeline lineno="241"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">Test<sp/>cases<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>.elastic<sp/>-<sp/>copilot<sp/>/<sp/>memory<sp/>/<sp/>systemManifest.md.</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="242"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="243"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@pytest.fixture</highlight></codeline>
<codeline lineno="244"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>system_manifest_path(self):</highlight></codeline>
<codeline lineno="245"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Return<sp/>the<sp/>filesystem<sp/>path<sp/>to<sp/>the<sp/>system<sp/>manifest<sp/>Markdown<sp/>file.</highlight></codeline>
<codeline lineno="247"><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path(Path):<sp/>Path<sp/>pointing<sp/>to<sp/>.elastic<sp/>-<sp/>copilot<sp/>/<sp/>memory<sp/>/<sp/>systemManifest.md</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="251"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>Path(&quot;.elastic-copilot/memory/systemManifest.md&quot;)</highlight></codeline>
<codeline lineno="252"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="253"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@pytest.fixture</highlight></codeline>
<codeline lineno="254"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>system_manifest_content(self,<sp/>system_manifest_path):</highlight></codeline>
<codeline lineno="255"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Load<sp/>the<sp/>contents<sp/>of<sp/>the<sp/>systemManifest.md<sp/>file.</highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>system_manifest_path(Path):<sp/>Filesystem<sp/>path<sp/>to<sp/>the<sp/>systemManifest.md<sp/>file.</highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content(str):<sp/>UTF<sp/>-<sp/>8<sp/>decoded<sp/>file<sp/>contents.</highlight></codeline>
<codeline lineno="263"><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Raises:</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AssertionError:<sp/>If<sp/>`system_manifest_path`<sp/>does<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>exist.</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="267"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>system_manifest_path.exists(),<sp/>&quot;systemManifest.md<sp/>not<sp/>found&quot;</highlight></codeline>
<codeline lineno="268"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>with<sp/>open(system_manifest_path,<sp/>encoding=&quot;utf-8&quot;)<sp/>as<sp/>f:</highlight></codeline>
<codeline lineno="269"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>f.read()</highlight></codeline>
<codeline lineno="270"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="271"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@staticmethod</highlight></codeline>
<codeline lineno="272"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@pytest.fixture</highlight></codeline>
<codeline lineno="273"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>system_manifest_lines(system_manifest_content):</highlight></codeline>
<codeline lineno="274"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Split<sp/>system<sp/>manifest<sp/>content<sp/>into<sp/>lines.</highlight></codeline>
<codeline lineno="276"><highlight class="normal"></highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>system_manifest_content(str):<sp/>Raw<sp/>content<sp/>of<sp/>the<sp/>system<sp/>manifest.</highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>list[str]:<sp/>Lines<sp/></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>the<sp/>manifest<sp/>obtained<sp/>by<sp/>splitting<sp/>on<sp/>newline<sp/>characters.</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="283"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>system_manifest_content.split(&quot;\n&quot;)</highlight></codeline>
<codeline lineno="284"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="285"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_system_manifest_exists(self,<sp/>system_manifest_path):</highlight></codeline>
<codeline lineno="286"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">Test<sp/>that<sp/>systemManifest.md<sp/>exists.</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="287"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>system_manifest_path.exists()</highlight></codeline>
<codeline lineno="288"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>system_manifest_path.is_file()</highlight></codeline>
<codeline lineno="289"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="290"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_system_manifest_not_empty(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="291"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">Test<sp/>that<sp/>systemManifest.md<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>empty.</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="292"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>len(system_manifest_content.strip())<sp/>&gt;<sp/>0</highlight></codeline>
<codeline lineno="293"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="294"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_system_manifest_has_title(self,<sp/>system_manifest_lines):</highlight></codeline>
<codeline lineno="295"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert<sp/>that<sp/>the<sp/>system<sp/>manifest</highlight><highlight class="stringliteral">&apos;s<sp/>first<sp/>line<sp/>is<sp/>the<sp/>top<sp/>-<sp/>level<sp/>title<sp/>&apos;</highlight><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">#<sp/>System<sp/>Manifest&apos;.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="298"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>system_manifest_lines[0]<sp/>==<sp/>&quot;#<sp/>System<sp/>Manifest&quot;</highlight></codeline>
<codeline lineno="299"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="300"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_system_manifest_has_project_overview(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="301"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert<sp/>that<sp/>the<sp/>system<sp/>manifest<sp/>contains<sp/>a<sp/>top<sp/>-<sp/>level<sp/></highlight><highlight class="stringliteral">&quot;Project<sp/>Overview&quot;</highlight><highlight class="normal"><sp/>section.</highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>system_manifest_content(str):<sp/>The<sp/>complete<sp/>text<sp/>content<sp/>of<sp/>the<sp/>systemManifest.md<sp/>file.</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="307"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>&quot;##<sp/>Project<sp/>Overview&quot;<sp/>in<sp/>system_manifest_content</highlight></codeline>
<codeline lineno="308"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="309"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_system_manifest_has_project_name(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="310"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">Test<sp/>that<sp/>systemManifest.md<sp/>specifies<sp/>project<sp/>name.</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="311"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern<sp/>=<sp/>r&quot;-<sp/>Name:<sp/>(.+)&quot;</highlight></codeline>
<codeline lineno="312"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>re.search(pattern,<sp/>system_manifest_content)</highlight></codeline>
<codeline lineno="313"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="314"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>match<sp/>is<sp/>not<sp/>None,<sp/>&quot;Project<sp/>name<sp/>not<sp/>found&quot;</highlight></codeline>
<codeline lineno="315"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>match.group(1).strip()</highlight></codeline>
<codeline lineno="316"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>len(name)<sp/>&gt;<sp/>0,<sp/>&quot;Project<sp/>name<sp/>should<sp/>not<sp/>be<sp/>empty&quot;</highlight></codeline>
<codeline lineno="317"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="318"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_system_manifest_has_project_description(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="319"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Verify<sp/>the<sp/>system<sp/>manifest<sp/>contains<sp/>a<sp/></highlight><highlight class="stringliteral">&apos;-<sp/>Description:<sp/>...&apos;</highlight><highlight class="normal"><sp/>entry<sp/>documenting<sp/>the<sp/>project</highlight><highlight class="stringliteral">&apos;s<sp/>description.</highlight></codeline>
<codeline lineno="321"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="322"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>&quot;-<sp/>Description:&quot;<sp/>in<sp/>system_manifest_content</highlight></codeline>
<codeline lineno="323"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern<sp/>=<sp/>r&quot;-<sp/>Description:<sp/>(.+)&quot;</highlight></codeline>
<codeline lineno="324"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>re.search(pattern,<sp/>system_manifest_content)</highlight></codeline>
<codeline lineno="325"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="326"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>match<sp/>is<sp/>not<sp/>None,<sp/>&quot;Project<sp/>description<sp/>not<sp/>found&quot;</highlight></codeline>
<codeline lineno="327"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>description<sp/>=<sp/>match.group(1).strip()</highlight></codeline>
<codeline lineno="328"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>len(description)<sp/>&gt;<sp/>0,<sp/>&quot;Project<sp/>description<sp/>should<sp/>not<sp/>be<sp/>empty&quot;</highlight></codeline>
<codeline lineno="329"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern<sp/>=<sp/>r&quot;-<sp/>Created:<sp/>(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z)&quot;</highlight></codeline>
<codeline lineno="330"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>re.search(pattern,<sp/>system_manifest_content)</highlight></codeline>
<codeline lineno="331"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="332"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>match<sp/>is<sp/>not<sp/>None,<sp/>&quot;Created<sp/>timestamp<sp/>not<sp/>found&quot;</highlight></codeline>
<codeline lineno="333"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="334"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Validate<sp/>timestamp<sp/>format</highlight></codeline>
<codeline lineno="335"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>timestamp_str<sp/>=<sp/>match.group(1)</highlight></codeline>
<codeline lineno="336"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>try:</highlight></codeline>
<codeline lineno="337"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>datetime.fromisoformat(timestamp_str.replace(&quot;Z&quot;,<sp/>&quot;+00:00&quot;))</highlight></codeline>
<codeline lineno="338"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>except<sp/>ValueError:</highlight></codeline>
<codeline lineno="339"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pytest.fail(f&quot;Invalid<sp/>created<sp/>timestamp<sp/>format:<sp/>{timestamp_str}&quot;)</highlight></codeline>
<codeline lineno="340"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="341"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_system_manifest_has_current_status(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="342"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">Test<sp/>that<sp/>systemManifest.md<sp/>has<sp/>Current<sp/>Status<sp/>section.</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="343"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>&quot;##<sp/>Current<sp/>Status&quot;<sp/>in<sp/>system_manifest_content</highlight></codeline>
<codeline lineno="344"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="345"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_system_manifest_has_current_phase(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="346"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="347"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>def<sp/>test_system_manifest_has_current_phase(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="348"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">Test<sp/>that<sp/>systemManifest.md<sp/>has<sp/>Current<sp/>Phase<sp/>section.</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="349"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assert<sp/>&quot;##<sp/>Current<sp/>Phase&quot;<sp/>in<sp/>system_manifest_content</highlight></codeline>
<codeline lineno="350"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="351"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pass</highlight></codeline>
<codeline lineno="352"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pass</highlight></codeline>
<codeline lineno="353"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pass</highlight></codeline>
<codeline lineno="354"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert<sp/>that<sp/>the<sp/>System<sp/>Manifest<sp/>declares<sp/>a<sp/>current<sp/>project<sp/>phase.</highlight></codeline>
<codeline lineno="355"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="356"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Raises<sp/>an<sp/>assertion<sp/>error<sp/>if<sp/>no<sp/>line<sp/>matching<sp/>&quot;-<sp/>Current<sp/>Phase:<sp/>&lt;value&gt;&quot;<sp/>is<sp/>present<sp/>in<sp/>the<sp/>provided<sp/>System<sp/>Manifest<sp/>content.</highlight></codeline>
<codeline lineno="357"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="358"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="359"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>system_manifest_content(str):<sp/>Full<sp/>text<sp/>of<sp/>the<sp/>systemManifest.md<sp/>file<sp/>to<sp/>inspect.</highlight></codeline>
<codeline lineno="360"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;-<sp/>Current<sp/>Phase:<sp/>(.+)&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>re.search(pattern,<sp/>system_manifest_content)</highlight></codeline>
<codeline lineno="363"><highlight class="normal"></highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>match<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Current<sp/>Phase<sp/>not<sp/>found&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="365"><highlight class="normal"></highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_system_manifest_has_last_updated(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Test<sp/>that<sp/>systemManifest.md<sp/>has<sp/>Last<sp/>Updated<sp/>timestamp<sp/>as<sp/>valid<sp/>ISO<sp/>8601.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;-<sp/>Last<sp/>Updated:<sp/>(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z)&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>re.search(pattern,<sp/>system_manifest_content)</highlight></codeline>
<codeline lineno="370"><highlight class="normal"></highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>match<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Last<sp/>Updated<sp/>timestamp<sp/>not<sp/>found&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"></highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Validate<sp/>timestamp<sp/>format</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>timestamp_str<sp/>=<sp/>match.group(1)</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>datetime.fromisoformat(timestamp_str.replace(</highlight><highlight class="stringliteral">&quot;Z&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;+00:00&quot;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>ValueError:</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pytest.fail(f</highlight><highlight class="stringliteral">&quot;Invalid<sp/>Last<sp/>Updated<sp/>timestamp<sp/>format:<sp/>{timestamp_str}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="379"><highlight class="normal"></highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_system_manifest_has_project_structure(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Test<sp/>that<sp/>systemManifest.md<sp/>has<sp/>Project<sp/>Structure<sp/>section.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;##<sp/>Project<sp/>Structure&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>system_manifest_content</highlight></codeline>
<codeline lineno="383"><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_system_manifest_file_counts(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="386"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Verify<sp/>systemManifest.md<sp/>lists<sp/>file<sp/>counts<sp/>per<sp/>type<sp/>and<sp/>that<sp/>each<sp/>count<sp/>is<sp/>a<sp/>non<sp/>-<sp/>negative<sp/>integer.</highlight></codeline>
<codeline lineno="387"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="388"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Checks<sp/>for<sp/>lines<sp/>matching<sp/>the<sp/>pattern<sp/>&quot;-<sp/>N<sp/>&lt;type&gt;<sp/>files&quot;<sp/>and<sp/>asserts<sp/>at<sp/>least<sp/>one<sp/>such<sp/>line<sp/>exists.<sp/>Fails<sp/>if<sp/>any<sp/>extracted<sp/>count<sp/>is<sp/>negative.</highlight></codeline>
<codeline lineno="389"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;-<sp/>(\d+)<sp/>(\w+)<sp/>files&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>matches<sp/>=<sp/>re.findall(pattern,<sp/>system_manifest_content)</highlight></codeline>
<codeline lineno="392"><highlight class="normal"></highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>len(matches)<sp/>&gt;<sp/>0,<sp/></highlight><highlight class="stringliteral">&quot;No<sp/>file<sp/>counts<sp/>found&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="394"><highlight class="normal"></highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>count_str,<sp/>file_type<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>matches:</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>count<sp/>=<sp/>int(count_str)</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>count<sp/>&gt;=<sp/>0,<sp/>f</highlight><highlight class="stringliteral">&quot;File<sp/>count<sp/>for<sp/>{file_type}<sp/>should<sp/>be<sp/>non-negative&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="398"><highlight class="normal"></highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_system_manifest_has_dependencies_section(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="401"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Verify<sp/>that<sp/>systemManifest.md<sp/>contains<sp/>the<sp/>&quot;##<sp/>Dependencies&quot;<sp/>section.</highlight></codeline>
<codeline lineno="402"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;##<sp/>Dependencies&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>system_manifest_content</highlight></codeline>
<codeline lineno="404"><highlight class="normal"></highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_system_manifest_has_directory_structure(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Test<sp/>that<sp/>systemManifest.md<sp/>has<sp/>Project<sp/>Directory<sp/>Structure<sp/>section.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;##<sp/>Project<sp/>Directory<sp/>Structure&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>system_manifest_content</highlight></codeline>
<codeline lineno="408"><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_system_manifest_directory_structure_format(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Test<sp/>that<sp/>directory<sp/>structure<sp/>uses<sp/>proper<sp/>emoji<sp/>formatting.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Look<sp/>for<sp/>directory<sp/>structure<sp/>section</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;##<sp/>Project<sp/>Directory<sp/>Structure&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>system_manifest_content:</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>structure_section<sp/>=<sp/>system_manifest_content.split(</highlight><highlight class="stringliteral">&quot;##<sp/>Project<sp/>Directory<sp/>Structure&quot;</highlight><highlight class="normal">)[1]</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>structure_section<sp/>=<sp/>structure_section.split(</highlight><highlight class="stringliteral">&quot;##&quot;</highlight><highlight class="normal">)[0]<sp/><sp/></highlight><highlight class="comment">#<sp/>Get<sp/>until<sp/>next<sp/>section</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>structure_section,<sp/></highlight><highlight class="stringliteral">&quot;Directory<sp/>entries<sp/>should<sp/>include<sp/>the<sp/><sp/>emoji&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>structure_section,<sp/></highlight><highlight class="stringliteral">&quot;File<sp/>entries<sp/>should<sp/>include<sp/>the<sp/><sp/>emoji&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="418"><highlight class="normal"></highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_system_manifest_has_language_dependency_sections(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Test<sp/>that<sp/>systemManifest.md<sp/>has<sp/>language<sp/>-<sp/>specific<sp/>dependency<sp/>sections.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expected_sections<sp/>=<sp/>[</highlight><highlight class="stringliteral">&quot;##<sp/>PY<sp/>Dependencies&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;##<sp/>JS<sp/>Dependencies&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;##<sp/>TS<sp/>Dependencies&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;##<sp/>TSX<sp/>Dependencies&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="422"><highlight class="normal"></highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>found<sp/>=<sp/>sum(1<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>section<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>expected_sections<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>section<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>system_manifest_content)</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>found<sp/>&gt;<sp/>0,<sp/></highlight><highlight class="stringliteral">&quot;No<sp/>language-specific<sp/>dependency<sp/>sections<sp/>found&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="425"><highlight class="normal"></highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_system_manifest_file_dependency_format(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="428"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Validate<sp/>that<sp/>file<sp/>-<sp/>level<sp/>dependency<sp/>headers<sp/>in<sp/>the<sp/>system<sp/>manifest<sp/>follow<sp/>the<sp/>expected<sp/>path<sp/>-<sp/>and<sp/>-extension<sp/>format.</highlight></codeline>
<codeline lineno="429"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="430"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Searches<sp/>the<sp/>document<sp/>for<sp/>headers<sp/>of<sp/>the<sp/>form<sp/>&quot;###<sp/>\\path\\to\\file.ext&quot;<sp/>and<sp/>asserts<sp/>that<sp/>each<sp/>matched<sp/>header<sp/>contains<sp/>a<sp/>path<sp/>separator(`\\`<sp/>or<sp/>`/`).<sp/>Only<sp/>the<sp/>first<sp/>10<sp/>matches<sp/>are<sp/>checked<sp/>for<sp/>performance.</highlight></codeline>
<codeline lineno="431"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="432"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="433"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>system_manifest_content(str):<sp/>Full<sp/>markdown<sp/>text<sp/>of<sp/>the<sp/>system<sp/>manifest<sp/>to<sp/>inspect.</highlight></codeline>
<codeline lineno="434"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Look<sp/>for<sp/>file<sp/>dependency<sp/>entries<sp/>like:<sp/>###<sp/>\path\to\file.py</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_pattern<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;###\s+\\[\w\\\/._-]+\.\w+&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>matches<sp/>=<sp/>re.findall(file_pattern,<sp/>system_manifest_content)</highlight></codeline>
<codeline lineno="438"><highlight class="normal"></highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>If<sp/>there<sp/>are<sp/>file<sp/>entries,<sp/>they<sp/>should<sp/>be<sp/>properly<sp/>formatted</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>matches:</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>match<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>matches[:10]:<sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>first<sp/>10<sp/>for<sp/>performance</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Should<sp/>have<sp/>proper<sp/>path<sp/>separators</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;\\&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>match<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>match,<sp/>f</highlight><highlight class="stringliteral">&quot;File<sp/>path<sp/>should<sp/>have<sp/>proper<sp/>separators:<sp/>{match}&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_system_manifest_dependency_entries_have_content(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="447"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Verify<sp/>each<sp/>file<sp/>section<sp/>in<sp/>the<sp/>system<sp/>manifest<sp/>contains<sp/>dependency<sp/>information<sp/>or<sp/>an<sp/>explicit<sp/>absence<sp/>message.</highlight></codeline>
<codeline lineno="448"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="449"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Splits<sp/>the<sp/>manifest<sp/>by<sp/>file<sp/>headers<sp/>introduced<sp/>with<sp/>&quot;###&quot;<sp/>and<sp/>inspects<sp/>up<sp/>to<sp/>the<sp/>first<sp/>20<sp/>file<sp/>sections.<sp/>For<sp/>each<sp/>non<sp/>-<sp/>empty<sp/>file<sp/>section(excluding<sp/>sections<sp/>that<sp/>start<sp/>with<sp/>&quot;#&quot;),<sp/>asserts<sp/>the<sp/>section<sp/>contains<sp/>either<sp/>the<sp/>literal<sp/>&quot;Dependencies:&quot;,<sp/>the<sp/>literal<sp/>&quot;No<sp/>dependencies<sp/>found&quot;,<sp/>or<sp/>begins<sp/>with<sp/>a<sp/>backslash(indicating<sp/>a<sp/>file<sp/>path).</highlight></codeline>
<codeline lineno="450"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="451"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="452"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>system_manifest_content(str):<sp/>Full<sp/>text<sp/>content<sp/>of<sp/>the<sp/>system<sp/>manifest<sp/>file<sp/>to<sp/>validate.</highlight></codeline>
<codeline lineno="453"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Split<sp/>by<sp/>file<sp/>headers<sp/>(###)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sections<sp/>=<sp/>re.split(</highlight><highlight class="stringliteral">r&quot;###\s+&quot;</highlight><highlight class="normal">,<sp/>system_manifest_content)</highlight></codeline>
<codeline lineno="456"><highlight class="normal"></highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>section<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>sections[1:20]:<sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>first<sp/>20<sp/>file<sp/>sections</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Should<sp/>have<sp/>either<sp/>&quot;Dependencies:&quot;<sp/>or<sp/>&quot;No<sp/>dependencies<sp/>found&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>section.strip():</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>has_deps<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Dependencies:&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>section<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;No<sp/>dependencies<sp/>found&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>section</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Allow<sp/>for<sp/>section<sp/>headers<sp/>without<sp/>file<sp/>content</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>section.startswith(</highlight><highlight class="stringliteral">&quot;#&quot;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>has_deps<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>section.strip().startswith(</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;\\&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>),<sp/></highlight><highlight class="stringliteral">&quot;File<sp/>section<sp/>should<sp/>have<sp/>dependency<sp/>information&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="466"><highlight class="normal"></highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_system_manifest_no_duplicate_sections(self,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Test<sp/>that<sp/>there<sp/>are<sp/>no<sp/>duplicate<sp/>major<sp/>sections.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>major_sections<sp/>=<sp/>[</highlight><highlight class="stringliteral">&quot;##<sp/>Project<sp/>Overview&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;##<sp/>Current<sp/>Status&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;##<sp/>Project<sp/>Structure&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;##<sp/>Dependencies&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="470"><highlight class="normal"></highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>section<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>major_sections:</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>count<sp/>=<sp/>system_manifest_content.count(section)</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Allow<sp/>for<sp/>some<sp/>duplication<sp/>due<sp/>to<sp/>regeneration,<sp/>but<sp/>excessive<sp/>duplication<sp/>is<sp/>an<sp/>error</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>count<sp/>&gt;<sp/>0,<sp/>f</highlight><highlight class="stringliteral">&quot;Section<sp/>&apos;{section}&apos;<sp/>not<sp/>found&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>This<sp/>test<sp/>allows<sp/>for<sp/>reasonable<sp/>duplication</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>count<sp/>&lt;<sp/>10,<sp/>f</highlight><highlight class="stringliteral">&quot;Section<sp/>&apos;{section}&apos;<sp/>appears<sp/>too<sp/>many<sp/>times<sp/>({count})&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="477"><highlight class="normal"></highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_system_manifest_markdown_formatting(self,<sp/>system_manifest_lines):</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="480"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Verify<sp/>markdown<sp/>heading<sp/>formatting<sp/>in<sp/>the<sp/>System<sp/>Manifest.</highlight></codeline>
<codeline lineno="481"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="482"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Asserts<sp/>that,<sp/>within<sp/>the<sp/>first<sp/>500<sp/>lines,<sp/>any<sp/>Markdown<sp/>heading<sp/>that<sp/>begins<sp/>with<sp/>one<sp/>or<sp/>more<sp/>`<sp/><sp/>#<sp/>`<sp/>characters<sp/>has<sp/>a<sp/>space<sp/>immediately<sp/>following<sp/>the<sp/>leading<sp/>hash<sp/>sequence<sp/>(e.g.<sp/>`#<sp/>Title`,<sp/>`##<sp/>Section`).<sp/>The<sp/>test<sp/>raises<sp/>an<sp/>assertion<sp/>identifying<sp/>the<sp/>line<sp/>number<sp/>and<sp/>content<sp/>when<sp/>a<sp/>heading<sp/>is<sp/>missing<sp/>the<sp/>required<sp/>space.</highlight></codeline>
<codeline lineno="483"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i,<sp/>line<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>enumerate(system_manifest_lines[:500]):<sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>first<sp/>500<sp/>lines</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>heading<sp/>formatting</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>line.startswith(</highlight><highlight class="stringliteral">&quot;#&quot;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Headings<sp/>should<sp/>have<sp/>space<sp/>after<sp/>#</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>heading_match<sp/>=<sp/>re.match(</highlight><highlight class="stringliteral">r&quot;^(#+)(.+)&quot;</highlight><highlight class="normal">,<sp/>line)</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>heading_match:</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_,<sp/>content<sp/>=<sp/>heading_match.groups()</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>content<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>content.startswith(</highlight><highlight class="stringliteral">&quot;#&quot;</highlight><highlight class="normal">):<sp/><sp/></highlight><highlight class="comment">#<sp/>Not<sp/>more<sp/>hashes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>content.startswith(</highlight><highlight class="stringliteral">&quot;<sp/>&quot;</highlight><highlight class="normal">),<sp/>f</highlight><highlight class="stringliteral">&quot;Line<sp/>{i+1}:<sp/>Heading<sp/>should<sp/>have<sp/>space<sp/>after<sp/>#:<sp/>{line}&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="493"><highlight class="normal"></highlight></codeline>
<codeline lineno="494"><highlight class="normal"></highlight></codeline>
<codeline lineno="495"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">TestDocumentationConsistency:</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Test<sp/>cases<sp/>for<sp/>consistency<sp/>between<sp/>documentation<sp/>files.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal"></highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@pytest.fixture</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">dependency_matrix_content(self):</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="501"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Load<sp/>and<sp/>return<sp/>the<sp/>contents<sp/>of<sp/>the<sp/>dependency<sp/>matrix<sp/>file<sp/>from<sp/>.elastic<sp/>-<sp/>copilot<sp/>/<sp/>memory.</highlight></codeline>
<codeline lineno="502"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="503"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="504"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content(str):<sp/>The<sp/>UTF<sp/>-<sp/>8<sp/>text<sp/>of<sp/>dependencyMatrix.md.</highlight></codeline>
<codeline lineno="505"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path<sp/>=<sp/>Path(</highlight><highlight class="stringliteral">&quot;.elastic-copilot/memory/dependencyMatrix.md&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>open(path,<sp/>encoding=</highlight><highlight class="stringliteral">&quot;utf-8&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>f:</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>f.read()</highlight></codeline>
<codeline lineno="509"><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@pytest.fixture</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">system_manifest_content(self):</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="513"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Load<sp/>the<sp/>contents<sp/>of<sp/>the<sp/>system<sp/>manifest<sp/>file<sp/>located<sp/>at<sp/>.elastic<sp/>-<sp/>copilot<sp/>/<sp/>memory<sp/>/<sp/>systemManifest.md.</highlight></codeline>
<codeline lineno="514"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="515"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="516"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content(str):<sp/>The<sp/>full<sp/>text<sp/>of<sp/>the<sp/>system<sp/>manifest<sp/>file.</highlight></codeline>
<codeline lineno="517"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path<sp/>=<sp/>Path(</highlight><highlight class="stringliteral">&quot;.elastic-copilot/memory/systemManifest.md&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>open(path,<sp/>encoding=</highlight><highlight class="stringliteral">&quot;utf-8&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>f:</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>f.read()</highlight></codeline>
<codeline lineno="521"><highlight class="normal"></highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_file_counts_match_between_documents(self,<sp/>dependency_matrix_content,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="524"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Verify<sp/>that<sp/>per<sp/>-<sp/>type<sp/>file<sp/>counts<sp/>are<sp/>equal<sp/>between<sp/>dependencyMatrix.md<sp/>and<sp/>the<sp/>System<sp/>Manifest&apos;s<sp/>Project<sp/>Structure<sp/>section.</highlight></codeline>
<codeline lineno="525"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="526"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parses<sp/>patterns<sp/>of<sp/>the<sp/>form<sp/>&quot;-<sp/>N<sp/>&lt;type&gt;<sp/>files&quot;<sp/>from<sp/>dependency_matrix_content<sp/>and<sp/>from<sp/>the<sp/>first<sp/>&quot;##<sp/>Project<sp/>Structure&quot;<sp/>section<sp/>of<sp/>system_manifest_content,<sp/>then<sp/>asserts<sp/>that<sp/>counts<sp/>match<sp/>for<sp/>each<sp/>file<sp/>type<sp/>present<sp/>in<sp/>both<sp/>documents.</highlight></codeline>
<codeline lineno="527"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="528"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="529"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dependency_matrix_content(str):<sp/>Full<sp/>markdown<sp/>content<sp/>of<sp/>dependencyMatrix.md.</highlight></codeline>
<codeline lineno="530"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>system_manifest_content(str):<sp/>Full<sp/>markdown<sp/>content<sp/>of<sp/>systemManifest.md.</highlight></codeline>
<codeline lineno="531"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="532"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Raises:</highlight></codeline>
<codeline lineno="533"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AssertionError:<sp/>If<sp/>the<sp/>&quot;##<sp/>Project<sp/>Structure&quot;<sp/>section<sp/>is<sp/>missing<sp/>or<sp/>if<sp/>any<sp/>file<sp/>-<sp/>type<sp/>counts<sp/>differ<sp/>between<sp/>the<sp/>two<sp/>documents.</highlight></codeline>
<codeline lineno="534"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Extract<sp/>file<sp/>counts<sp/>from<sp/>dependency<sp/>matrix</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dm_pattern<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;-<sp/>(\d+)<sp/>(\w+)<sp/>files&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dm_counts<sp/>=<sp/>{file_type:<sp/>int(count)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>count,<sp/>file_type<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>re.findall(dm_pattern,<sp/>dependency_matrix_content)}</highlight></codeline>
<codeline lineno="538"><highlight class="normal"></highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Extract<sp/>file<sp/>counts<sp/>from<sp/>system<sp/>manifest<sp/>(first<sp/>occurrence<sp/>in<sp/>Project<sp/>Structure)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Extract<sp/>file<sp/>counts<sp/>from<sp/>system<sp/>manifest<sp/>(first<sp/>occurrence<sp/>in<sp/>Project<sp/>Structure)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;##<sp/>Project<sp/>Structure&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>system_manifest_content</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>),<sp/></highlight><highlight class="stringliteral">&quot;##<sp/>Project<sp/>Structure<sp/>section<sp/>not<sp/>found<sp/>in<sp/>system<sp/>manifest&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sm_content<sp/>=<sp/>system_manifest_content.split(</highlight><highlight class="stringliteral">&quot;##<sp/>Project<sp/>Structure&quot;</highlight><highlight class="normal">)[1].split(</highlight><highlight class="stringliteral">&quot;##&quot;</highlight><highlight class="normal">)[0]</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sm_counts<sp/>=<sp/>{file_type:<sp/>int(count)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>count,<sp/>file_type<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>re.findall(dm_pattern,<sp/>sm_content)}</highlight></codeline>
<codeline lineno="546"><highlight class="normal"></highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Compare<sp/>counts<sp/>for<sp/>each<sp/>file<sp/>type</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>file_type<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>dm_counts:</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>file_type<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>sm_counts:</highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>dm_counts[file_type]<sp/>==<sp/>sm_counts[file_type],<sp/>(</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f</highlight><highlight class="stringliteral">&quot;File<sp/>count<sp/>mismatch<sp/>for<sp/>{file_type}:<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f</highlight><highlight class="stringliteral">&quot;dependencyMatrix={dm_counts[file_type]},<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f</highlight><highlight class="stringliteral">&quot;systemManifest={sm_counts[file_type]}&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="555"><highlight class="normal"></highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_file_types_match_between_documents(self,<sp/>dependency_matrix_content,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="558"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Verify<sp/>that<sp/>the<sp/>set<sp/>of<sp/>file<sp/>types<sp/>listed<sp/>in<sp/>the<sp/>dependency<sp/>matrix<sp/>matches<sp/>the<sp/>set<sp/>reported<sp/>in<sp/>the<sp/>system<sp/>manifest.</highlight></codeline>
<codeline lineno="559"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="560"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>test<sp/>compares<sp/>the<sp/>&quot;File<sp/>types&quot;<sp/>entry<sp/>from<sp/>dependencyMatrix.md<sp/>with<sp/>the<sp/>file<sp/>type<sp/>names<sp/>extracted<sp/>from<sp/>the<sp/>&quot;Project<sp/>Structure&quot;<sp/>section<sp/>of<sp/>systemManifest.md<sp/>and<sp/>fails<sp/>if<sp/>the<sp/>two<sp/>sets<sp/>differ.</highlight></codeline>
<codeline lineno="561"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Extract<sp/>file<sp/>types<sp/>from<sp/>dependency<sp/>matrix</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dm_types_match<sp/>=<sp/>re.search(</highlight><highlight class="stringliteral">r&quot;-<sp/>File<sp/>types:<sp/>(.+)&quot;</highlight><highlight class="normal">,<sp/>dependency_matrix_content)</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>dm_types_match<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dm_types<sp/>=<sp/>set(dm_types_match.group(1).split(</highlight><highlight class="stringliteral">&quot;,<sp/>&quot;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="566"><highlight class="normal"></highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Extract<sp/>file<sp/>types<sp/>from<sp/>system<sp/>manifest<sp/>Project<sp/>Structure</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sm_pattern<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;-<sp/>\d+<sp/>(\w+)<sp/>files&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sm_content<sp/>=<sp/>system_manifest_content.split(</highlight><highlight class="stringliteral">&quot;##<sp/>Project<sp/>Structure&quot;</highlight><highlight class="normal">)[1].split(</highlight><highlight class="stringliteral">&quot;##&quot;</highlight><highlight class="normal">)[0]</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sm_types<sp/>=<sp/>set(re.findall(sm_pattern,<sp/>sm_content))</highlight></codeline>
<codeline lineno="571"><highlight class="normal"></highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Types<sp/>should<sp/>match</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>dm_types<sp/>==<sp/>sm_types,<sp/>f</highlight><highlight class="stringliteral">&quot;File<sp/>types<sp/>mismatch:<sp/>dependencyMatrix={dm_types},<sp/>systemManifest={sm_types}&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="574"><highlight class="normal"></highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_timestamps_are_recent(self,<sp/>dependency_matrix_content,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="577"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Ensure<sp/>timestamps<sp/>in<sp/>dependencyMatrix.md<sp/>and<sp/>systemManifest.md<sp/>are<sp/>not<sp/>older<sp/>than<sp/>one<sp/>year.</highlight></codeline>
<codeline lineno="578"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="579"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Checks<sp/>the<sp/>dependency<sp/>matrix<sp/>&quot;Generated&quot;<sp/>timestamp<sp/>and<sp/>the<sp/>system<sp/>manifest<sp/>&quot;Last<sp/>Updated&quot;<sp/>timestamp(expected<sp/>as<sp/>ISO<sp/>8601<sp/>with<sp/>milliseconds<sp/>and<sp/>a<sp/>trailing<sp/>&quot;Z&quot;);<sp/>if<sp/>either<sp/>timestamp<sp/>is<sp/>present<sp/>and<sp/>is<sp/>more<sp/>than<sp/>one<sp/>year<sp/>old<sp/>the<sp/>test<sp/>fails.</highlight></codeline>
<codeline lineno="580"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>now<sp/>=<sp/>datetime.now(timezone.utc)</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>one_year_ago<sp/>=<sp/>now<sp/>-<sp/>timedelta(days=365)</highlight></codeline>
<codeline lineno="583"><highlight class="normal"></highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>dependency<sp/>matrix<sp/>timestamp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dm_pattern<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;\*Generated:<sp/>(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z)\*&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dm_match<sp/>=<sp/>re.search(dm_pattern,<sp/>dependency_matrix_content)</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>dm_match:</highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dm_time<sp/>=<sp/>datetime.fromisoformat(dm_match.group(1).replace(</highlight><highlight class="stringliteral">&quot;Z&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;+00:00&quot;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>dm_time<sp/>&gt;<sp/>one_year_ago,<sp/></highlight><highlight class="stringliteral">&quot;dependencyMatrix<sp/>timestamp<sp/>is<sp/>too<sp/>old&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="590"><highlight class="normal"></highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>system<sp/>manifest<sp/>timestamp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sm_pattern<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;-<sp/>Last<sp/>Updated:<sp/>(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z)&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sm_match<sp/>=<sp/>re.search(sm_pattern,<sp/>system_manifest_content)</highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>sm_match:</highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sm_time<sp/>=<sp/>datetime.fromisoformat(sm_match.group(1).replace(</highlight><highlight class="stringliteral">&quot;Z&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;+00:00&quot;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>sm_time<sp/>&gt;<sp/>one_year_ago,<sp/></highlight><highlight class="stringliteral">&quot;systemManifest<sp/>timestamp<sp/>is<sp/>too<sp/>old&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="597"><highlight class="normal"></highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_common_dependencies_consistency(self,<sp/>dependency_matrix_content,<sp/>system_manifest_content):</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Test<sp/>that<sp/>common<sp/>dependencies<sp/>mentioned<sp/>in<sp/>both<sp/>files<sp/>are<sp/>consistent.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Extract<sp/>common<sp/>dependencies<sp/>from<sp/>dependency<sp/>matrix</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dm_deps<sp/>=<sp/>set()</highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>match<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>re.finditer(</highlight><highlight class="stringliteral">r&quot;^-<sp/>(.+)$&quot;</highlight><highlight class="normal">,<sp/>dependency_matrix_content,<sp/>re.MULTILINE):</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dep<sp/>=<sp/>match.group(1).strip()</highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>dep<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>dep.startswith(</highlight><highlight class="stringliteral">&quot;Files<sp/>analyzed&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>dep.startswith(</highlight><highlight class="stringliteral">&quot;File<sp/>types&quot;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dm_deps.add(dep)</highlight></codeline>
<codeline lineno="606"><highlight class="normal"></highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Extract<sp/>dependencies<sp/>from<sp/>system<sp/>manifest</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sm_deps<sp/>=<sp/>set()</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>match<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>re.finditer(</highlight><highlight class="stringliteral">r&quot;^-<sp/>(.+)$&quot;</highlight><highlight class="normal">,<sp/>system_manifest_content,<sp/>re.MULTILINE):</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dep<sp/>=<sp/>match.group(1).strip()</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>dep<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>any(x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>dep<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>[</highlight><highlight class="stringliteral">&quot;files&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Created:&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Last<sp/>Updated:&quot;</highlight><highlight class="normal">]):</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sm_deps.add(dep)</highlight></codeline>
<codeline lineno="613"><highlight class="normal"></highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>for<sp/>common<sp/>popular<sp/>dependencies</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>common_deps<sp/>=<sp/>[</highlight><highlight class="stringliteral">&quot;react&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;axios&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;@testing-library/jest-dom&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>dep<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>common_deps:</highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dm_has<sp/>=<sp/>any(dep<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>d<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>d<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>dm_deps)</highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sm_has<sp/>=<sp/>any(dep<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>d<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>d<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>sm_deps)</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>If<sp/>one<sp/>has<sp/>it,<sp/>both<sp/>should<sp/>(or<sp/>neither)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>dm_has<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>sm_has:</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>dm_has<sp/>==<sp/>sm_has,<sp/>(</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f</highlight><highlight class="stringliteral">&quot;Dependency<sp/>&apos;{dep}&apos;<sp/>inconsistently<sp/>present:<sp/>&quot;</highlight><highlight class="normal"><sp/>f</highlight><highlight class="stringliteral">&quot;dependencyMatrix={dm_has},<sp/>systemManifest={sm_has}&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="624"><highlight class="normal"></highlight></codeline>
<codeline lineno="625"><highlight class="normal"></highlight></codeline>
<codeline lineno="626"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">TestDocumentationRealisticContent:</highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Test<sp/>that<sp/>documentation<sp/>content<sp/>matches<sp/>reality<sp/>of<sp/>the<sp/>codebase.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="628"><highlight class="normal"></highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_documented_files_exist(self):</highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="631"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Verify<sp/>that<sp/>file<sp/>paths<sp/>listed<sp/>in<sp/>the<sp/>system<sp/>manifest<sp/>correspond<sp/>to<sp/>actual<sp/>files<sp/>in<sp/>the<sp/>repository.</highlight></codeline>
<codeline lineno="632"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="633"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Searches<sp/>the<sp/>manifest<sp/>for<sp/>file<sp/>entries<sp/>formatted<sp/>as<sp/>&quot;###<sp/>\\path\\to\\file.ext&quot;<sp/>(common<sp/>Python,<sp/>TS<sp/>/<sp/>TSX,<sp/>JSX<sp/>/<sp/>JSX<sp/>patterns),<sp/>normalises<sp/>Windows<sp/>-<sp/>style<sp/>backslashes<sp/>to<sp/>POSIX<sp/>paths,<sp/>strips<sp/>any<sp/>leading<sp/>slash,<sp/>and<sp/>checks<sp/>existence<sp/>for<sp/>up<sp/>to<sp/>the<sp/>first<sp/>20<sp/>discovered<sp/>paths.<sp/>Entries<sp/>that<sp/>are<sp/>placeholders<sp/>or<sp/>clearly<sp/>test<sp/>-<sp/>related(containing<sp/>&quot;...&quot;,<sp/>&quot;test_&quot;,<sp/>or<sp/>&quot;__tests__&quot;)<sp/>are<sp/>skipped.</highlight></codeline>
<codeline lineno="634"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>manifest_path<sp/>=<sp/>Path(</highlight><highlight class="stringliteral">&quot;.elastic-copilot/memory/systemManifest.md&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>open(manifest_path,<sp/>encoding=</highlight><highlight class="stringliteral">&quot;utf-8&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>f:</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content<sp/>=<sp/>f.read()</highlight></codeline>
<codeline lineno="638"><highlight class="normal"></highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Extract<sp/>file<sp/>paths<sp/>from<sp/>the<sp/>manifest<sp/>(look<sp/>for<sp/>common<sp/>patterns)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_patterns<sp/>=<sp/>[</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&quot;###\s+\\([\w\\\/._-]+\.py)&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&quot;###\s+\\([\w\\\/._-]+\.tsx?)&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&quot;###\s+\\([\w\\\/._-]+\.jsx?)&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline lineno="645"><highlight class="normal"></highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mentioned_files<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>pattern<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>file_patterns:</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>matches<sp/>=<sp/>re.findall(pattern,<sp/>content)</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mentioned_files.extend(matches)</highlight></codeline>
<codeline lineno="650"><highlight class="normal"></highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>a<sp/>sample<sp/>of<sp/>mentioned<sp/>files</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>file_path<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>mentioned_files[:20]:<sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>first<sp/>20<sp/>for<sp/>performance</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Convert<sp/>Windows<sp/>paths<sp/>to<sp/>Unix<sp/>paths</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unix_path<sp/>=<sp/>file_path.replace(</highlight><highlight class="stringliteral">&quot;\\&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Remove<sp/>leading<sp/>slash<sp/>if<sp/>present</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unix_path<sp/>=<sp/>unix_path.lstrip(</highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="657"><highlight class="normal"></highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>check_path<sp/>=<sp/>Path(unix_path)</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Only<sp/>assert<sp/>for<sp/>files<sp/>that<sp/>should<sp/>clearly<sp/>exist</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>any(x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>unix_path<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>[</highlight><highlight class="stringliteral">&quot;...&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;test_&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;__tests__&quot;</highlight><highlight class="normal">]):</highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="662"><highlight class="normal"></highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>check_path.exists()<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;...&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>file_path,<sp/>f</highlight><highlight class="stringliteral">&quot;File<sp/>mentioned<sp/>in<sp/>manifest<sp/>doesn&apos;t<sp/>exist:<sp/>{unix_path}&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="664"><highlight class="normal"></highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_documented_file_counts_reasonable(self):</highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Test<sp/>that<sp/>documented<sp/>file<sp/>counts<sp/>are<sp/>reasonable<sp/>for<sp/>the<sp/>project.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>matrix_path<sp/>=<sp/>Path(</highlight><highlight class="stringliteral">&quot;.elastic-copilot/memory/dependencyMatrix.md&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>open(matrix_path,<sp/>encoding=</highlight><highlight class="stringliteral">&quot;utf-8&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>f:</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content<sp/>=<sp/>f.read()</highlight></codeline>
<codeline lineno="670"><highlight class="normal"></highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Extract<sp/>total<sp/>files</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>re.search(</highlight><highlight class="stringliteral">r&quot;-<sp/>Files<sp/>analyzed:<sp/>(\d+)&quot;</highlight><highlight class="normal">,<sp/>content)</highlight></codeline>
<codeline lineno="673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>match<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>total_files<sp/>=<sp/>int(match.group(1))</highlight></codeline>
<codeline lineno="675"><highlight class="normal"></highlight></codeline>
<codeline lineno="676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Should<sp/>be<sp/>a<sp/>reasonable<sp/>number<sp/>for<sp/>a<sp/>real<sp/>project</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>10<sp/>&lt;=<sp/>total_files<sp/>&lt;=<sp/>10000,<sp/>f</highlight><highlight class="stringliteral">&quot;Total<sp/>files<sp/>({total_files})<sp/>seems<sp/>unrealistic&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="678"><highlight class="normal"></highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">test_documented_dependencies_are_real_packages(self):</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="681"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Validate<sp/>that<sp/>dependencies<sp/>listed<sp/>in<sp/>.elastic<sp/>-<sp/>copilot<sp/>/<sp/>memory<sp/>/<sp/>dependencyMatrix.md<sp/>resemble<sp/>real<sp/>package<sp/>names.</highlight></codeline>
<codeline lineno="682"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="683"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Reads<sp/>the<sp/>dependency<sp/>matrix,<sp/>extracts<sp/>bullet<sp/>-<sp/>list<sp/>entries,<sp/>filters<sp/>out<sp/>lines<sp/>referring<sp/>to<sp/>file<sp/>counts<sp/>or<sp/>metadata,<sp/>and<sp/>asserts<sp/>that<sp/>the<sp/>first<sp/>20<sp/>candidate<sp/>dependencies<sp/>match<sp/>common<sp/>package<sp/>-<sp/>name<sp/>patterns(alphanumeric,<sp/>dot,<sp/>dash,<sp/>underscore,<sp/>scoped<sp/>names,<sp/>and<sp/>simple<sp/>path<sp/>-<sp/>like<sp/>entries).</highlight></codeline>
<codeline lineno="684"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>matrix_path<sp/>=<sp/>Path(</highlight><highlight class="stringliteral">&quot;.elastic-copilot/memory/dependencyMatrix.md&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>open(matrix_path,<sp/>encoding=</highlight><highlight class="stringliteral">&quot;utf-8&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>f:</highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content<sp/>=<sp/>f.read()</highlight></codeline>
<codeline lineno="688"><highlight class="normal"></highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Extract<sp/>dependencies</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deps<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>match<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>re.finditer(</highlight><highlight class="stringliteral">r&quot;^-<sp/>(.+)$&quot;</highlight><highlight class="normal">,<sp/>content,<sp/>re.MULTILINE):</highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dep<sp/>=<sp/>match.group(1).strip()</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Filter<sp/>out<sp/>non-dependency<sp/>lines</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>any(x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>dep<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>[</highlight><highlight class="stringliteral">&quot;files&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;File<sp/>types&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;analyzed&quot;</highlight><highlight class="normal">]):</highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deps.append(dep)</highlight></codeline>
<codeline lineno="696"><highlight class="normal"></highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>that<sp/>dependencies<sp/>follow<sp/>common<sp/>patterns</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>dep<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>deps[:20]:<sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>first<sp/>20</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Should<sp/>not<sp/>have<sp/>spaces<sp/>(unless<sp/>it&apos;s<sp/>a<sp/>relative<sp/>path)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>dep.startswith(</highlight><highlight class="stringliteral">&quot;.&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>dep.startswith(</highlight><highlight class="stringliteral">&quot;@&quot;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Package<sp/>names<sp/>shouldn&apos;t<sp/>have<sp/>spaces</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;<sp/>&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>dep:</highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Valid<sp/>package<sp/>name<sp/>format</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>re.match(</highlight><highlight class="stringliteral">r&quot;^[@\w\.\-/]+$&quot;</highlight><highlight class="normal">,<sp/>dep),<sp/>f</highlight><highlight class="stringliteral">&quot;Dependency<sp/>&apos;{dep}&apos;<sp/>doesn&apos;t<sp/>look<sp/>like<sp/>a<sp/>valid<sp/>package<sp/>name&quot;</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="/app/doc_state/github_reposRepoArchDocGenContext/DashFin-FarDb/financial-asset-relationship-db/tests/unit/test_documentation_validation.py"/>
  </compounddef>
</doxygen>
