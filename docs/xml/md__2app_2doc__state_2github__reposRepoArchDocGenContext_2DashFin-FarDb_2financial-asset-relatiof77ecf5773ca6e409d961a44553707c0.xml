<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0" kind="page">
    <compoundname>md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relationship-db_2docs_2DashFin-financial-asset-relationship-db-wiki-v2</compoundname>
    <title>DashFin/financial-asset-relationship-db Wiki</title>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para><anchor id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1282"/></para>
<para>Version: 2</para>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1283">
<title>Overview</title><sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1284">
<title>Home</title><para><details><summary>Relevant source files</summary><para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AI_RULES.md">AI_RULES.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/SUMMARY.md">SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AUDIT_REPORT.md">AUDIT_REPORT.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/README.md">frontend/README.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1285">
<title>Home</title><para>The Financial Asset Relationship Database is a system designed for the 3D visualization of interconnected financial assets. It supports a wide range of major asset classes, including Equities, Bonds, Commodities, Currencies, and Regulatory Events. The core purpose is to provide a comprehensive, interactive tool for cross-asset analysis, automatic relationship discovery, and modeling the impact of corporate and regulatory events on the financial network. Sources: [README.md:3-4]()</para>
<para>The project offers two distinct user interface and backend combinations: an original implementation using a Gradio UI with direct Python logic, and a newer, decoupled architecture featuring a Next.js frontend communicating with a FastAPI backend via a REST API. Both implementations leverage the same core logic for graph analysis and visualization generation. Sources: [README.md:10-12, 30-32](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:3-23]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1286">
<title>System Architecture</title><para>The system is structured into four primary layers: User Interface, API, Core Business Logic, and Data. This layered design allows for flexibility, such as supporting multiple frontend applications (Gradio and Next.js) that consume the core logic in different ways. Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:3-63]()</para>
<para>The diagram below illustrates the high-level system architecture, showing the two parallel paths from the user interface to the core logic.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>User<sp/>Interface<sp/>Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A1[Gradio<sp/>UI<sp/>on<sp/>Port<sp/>7860]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A2[Next.js<sp/>UI<sp/>on<sp/>Port<sp/>3000]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>API<sp/>Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B1[Direct<sp/>Python<sp/>Calls]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B2[FastAPI<sp/>Backend<sp/>on<sp/>Port<sp/>8000]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Core<sp/>Business<sp/>Logic<sp/>Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C[AssetRelationshipGraph<sp/>&lt;br&gt;<sp/>src/logic/asset_graph.py]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Data<sp/>Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D1[Financial<sp/>Models<sp/>&lt;br&gt;<sp/>src/models/financial_models.py]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D2[Data<sp/>Sources<sp/>&lt;br&gt;<sp/>yfinance,<sp/>sample_data.py]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A1<sp/>--&gt;<sp/>B1</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A2<sp/>--&gt;<sp/>B2</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B1<sp/>--&gt;<sp/>C</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B2<sp/>--&gt;<sp/>C</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D1</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D2</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:3-63](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:175-185]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1287">
<title>Key Components</title><para><table rows="7" cols="3"><row>
<entry thead="yes"><para>Component   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Source File(s)    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Gradio UI</bold>   </para>
</entry><entry thead="no"><para>The original interactive web interface for demos and direct interaction with Python logic.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="app_8py" kindref="compound">app.py</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Next.js Frontend</bold>   </para>
</entry><entry thead="no"><para>A modern, responsive web application built with React and TypeScript.   </para>
</entry><entry thead="no"><para><computeroutput>frontend/</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>FastAPI Backend</bold>   </para>
</entry><entry thead="no"><para>A REST API server that exposes the core logic to the Next.js frontend.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><bold><computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput></bold>   </para>
</entry><entry thead="no"><para>The core engine responsible for graph algorithms, relationship discovery, and metric calculations.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Financial Models</bold>   </para>
</entry><entry thead="no"><para>Dataclasses defining the structure for all asset types (e.g., <computeroutput>Equity</computeroutput>, <computeroutput>Bond</computeroutput>).   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Data Sources</bold>   </para>
</entry><entry thead="no"><para>Modules for fetching data, either from static samples or real-time sources like Yahoo Finance.   </para>
</entry><entry thead="no"><para><computeroutput>src/data/</computeroutput>   </para>
</entry></row>
</table>
</para>
<para>Sources: [README.md:100-112](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:70-90](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:40-52]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1288">
<title>Features</title><para>The platform provides a rich set of features for financial analysis and visualization.</para>
<para><table rows="5" cols="2"><row>
<entry thead="yes"><para>Feature   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>3D Network Visualization</bold>   </para>
</entry><entry thead="no"><para>An interactive 3D graph of asset relationships, rendered using Plotly.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Cross-Asset Analysis</bold>   </para>
</entry><entry thead="no"><para>Automatically discovers and models relationships between different asset classes.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Regulatory Integration</bold>   </para>
</entry><entry thead="no"><para>Models the impact of corporate events and SEC filings on the asset network.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Real-time Metrics</bold>   </para>
</entry><entry thead="no"><para>Provides network statistics like density, degree, and relationship strength analysis.   </para>
</entry></row>
</table>
</para>
<para>Sources: [README.md:71-75]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1289">
<title>Supported Asset Classes</title><para>The database is designed to handle a variety of financial instruments.</para>
<para><table rows="6" cols="2"><row>
<entry thead="yes"><para>Asset Class   </para>
</entry><entry thead="yes"><para>Key Attributes    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Equities</bold>   </para>
</entry><entry thead="no"><para>P/E ratios, dividend yields, EPS    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Fixed Income (Bonds)</bold>   </para>
</entry><entry thead="no"><para>Yield, duration, credit ratings    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Commodities</bold>   </para>
</entry><entry thead="no"><para>Futures and spot prices, contract specifications    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Currencies</bold>   </para>
</entry><entry thead="no"><para>FX pairs, exchange rates, monetary policy links    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Regulatory Events</bold>   </para>
</entry><entry thead="no"><para>Earnings, SEC filings, M&amp;A activities   </para>
</entry></row>
</table>
</para>
<para>Sources: [README.md:78-84]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1290">
<title>Relationship Types</title><para>The system can identify and model several types of relationships between assets.</para>
<para><itemizedlist>
<listitem><para><bold>Sector Affinity</bold>: Assets in the same industry sector.</para>
</listitem><listitem><para><bold>Corporate Links</bold>: Bonds issued by a stock company.</para>
</listitem><listitem><para><bold>Commodity Exposure</bold>: Equity companies exposed to commodity prices.</para>
</listitem><listitem><para><bold>Currency Risk</bold>: FX exposure for non-USD assets.</para>
</listitem><listitem><para><bold>Income Comparison</bold>: Comparing stock dividends vs. bond yields.</para>
</listitem><listitem><para><bold>Event Impact</bold>: A regulatory event affecting multiple assets.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [README.md:87-94]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1291">
<title>Data Model and Flow</title><para>The core data model revolves around Assets, their Relationships, and the influence of Regulatory Events. Relationship strength is normalized on a 0.0 to 1.0 scale, while regulatory impact is scored from -1 (negative) to +1 (positive). Sources: [README.md:118-120]()</para>
<para>The following diagram shows the basic entity relationships.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">erDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>id</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>symbol</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AssetClass<sp/>asset_class</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>sector</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float<sp/>price</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>RELATIONSHIP<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>source_id</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>target_id</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>type</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float<sp/>strength</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>REGULATORY_EVENT<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>id</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>date<sp/>event_date</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float<sp/>impact_score</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>||--o{<sp/>RELATIONSHIP<sp/>:<sp/>&quot;has&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>REGULATORY_EVENT<sp/>||--|{<sp/>ASSET<sp/>:<sp/>&quot;impacts&quot;</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md:114-120](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:32-35]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1292">
<title>Data Flow for Relationship Discovery</title><para>The process of building the asset graph follows a clear data flow from ingestion to visualization.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Data<sp/>Ingestion<sp/>&lt;br&gt;<sp/>yfinance<sp/>/<sp/>sample_data.py]<sp/>--&gt;<sp/>B(Asset<sp/>Object<sp/>Creation<sp/>&lt;br&gt;<sp/>Equity,<sp/>Bond,<sp/>etc.)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C{AssetRelationshipGraph}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D(Relationship<sp/>Building<sp/>&lt;br&gt;<sp/>_find_relationships)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E(Graph<sp/>Construction<sp/>&lt;br&gt;<sp/>Nodes<sp/>and<sp/>Edges)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F(3D<sp/>Position<sp/>Calculation<sp/>&lt;br&gt;<sp/>Deterministic<sp/>seed=42)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G{Output<sp/>Generation}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>H[JSON<sp/>for<sp/>API]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>I[Plotly<sp/>Figure<sp/>for<sp/>Gradio]</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:183-207](), [README.md:133-134]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1293">
<title>Technology Stack</title><para>The project utilizes a modern Python and JavaScript/TypeScript stack. The choice of libraries is governed by a set of rules to ensure consistency. Sources: [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:5-24]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1294">
<title>Backend &amp; Core Logic</title><para><table rows="9" cols="2"><row>
<entry thead="yes"><para>Technology   </para>
</entry><entry thead="yes"><para>Purpose    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Python 3.8+</bold>   </para>
</entry><entry thead="no"><para>Foundational programming language.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>FastAPI</bold>   </para>
</entry><entry thead="no"><para>High-performance REST API framework.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Gradio</bold>   </para>
</entry><entry thead="no"><para>UI framework for the original interactive demo.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Pandas</bold>   </para>
</entry><entry thead="no"><para>Data manipulation and analysis.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>NumPy</bold>   </para>
</entry><entry thead="no"><para>Numerical operations and array computations.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Plotly</bold>   </para>
</entry><entry thead="no"><para>Generation of all interactive charts and 3D graphs.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>yfinance</bold>   </para>
</entry><entry thead="no"><para>Fetching real-time and historical financial market data.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>dataclasses &amp; enum</bold>   </para>
</entry><entry thead="no"><para>Defining structured data models and enumerations.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:7-24](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:168-180]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1295">
<title>Frontend</title><para><table rows="7" cols="2"><row>
<entry thead="yes"><para>Technology   </para>
</entry><entry thead="yes"><para>Purpose    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Next.js 14</bold>   </para>
</entry><entry thead="no"><para>React framework for the modern UI.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>React 18</bold>   </para>
</entry><entry thead="no"><para>UI component library.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>TypeScript</bold>   </para>
</entry><entry thead="no"><para>Type safety for JavaScript.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Tailwind CSS</bold>   </para>
</entry><entry thead="no"><para>Utility-first CSS framework for styling.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Plotly.js</bold>   </para>
</entry><entry thead="no"><para>Rendering 3D visualizations in the browser.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Axios</bold>   </para>
</entry><entry thead="no"><para>HTTP client for communicating with the FastAPI backend.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:154-165](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:55-56]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1296">
<title>Development and Testing</title><para>The project is equipped with a comprehensive development and testing workflow, enforced by pre-commit hooks and a CI/CD pipeline. Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:65-81](), [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:43-57]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1297">
<title>Development Workflow</title><para>A standardized workflow is used for all contributions.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A(Create<sp/>Branch<sp/>&lt;br&gt;<sp/>e.g.,<sp/>feature/your-feature)<sp/>--&gt;<sp/>B(Make<sp/>Changes<sp/>&lt;br&gt;<sp/>Code,<sp/>Tests,<sp/>Docs)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C(Run<sp/>Local<sp/>Checks<sp/>&lt;br&gt;<sp/>make<sp/>check)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D(Commit<sp/>Changes<sp/>&lt;br&gt;<sp/>Descriptive<sp/>Messages)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E(Push<sp/>and<sp/>Create<sp/>PR)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F{PR<sp/>Review}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G(Merge<sp/>to<sp/>main)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>H(Delete<sp/>Branch)</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:51-100]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1298">
<title>Development Commands</title><para>A <computeroutput>Makefile</computeroutput> provides shortcuts for common development tasks.</para>
<para><table rows="8" cols="2"><row>
<entry thead="yes"><para>Command   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make install-dev</computeroutput>   </para>
</entry><entry thead="no"><para>Install all production and development dependencies.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make pre-commit</computeroutput>   </para>
</entry><entry thead="no"><para>Install pre-commit hooks for automated quality checks.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make format</computeroutput>   </para>
</entry><entry thead="no"><para>Format code with <computeroutput>black</computeroutput> and <computeroutput>isort</computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make lint</computeroutput>   </para>
</entry><entry thead="no"><para>Run linters (<computeroutput>flake8</computeroutput>, <computeroutput>pylint</computeroutput>).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make type-check</computeroutput>   </para>
</entry><entry thead="no"><para>Run the <computeroutput>mypy</computeroutput> type checker.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make test</computeroutput>   </para>
</entry><entry thead="no"><para>Run the <computeroutput>pytest</computeroutput> test suite with coverage.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make check</computeroutput>   </para>
</entry><entry thead="no"><para>Run all checks (format, lint, type-check, test) at once.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:60-76](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:41-44, 72-81]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1299">
<title>Testing</title><para>The project maintains a high standard of testing for both backend and frontend code.</para>
<para><itemizedlist>
<listitem><para><bold>Backend (Python)</bold>: <computeroutput>pytest</computeroutput> is used for unit and integration testing. Tests are located in the <computeroutput>tests/</computeroutput> directory and are structured into <computeroutput>unit/</computeroutput> and <computeroutput>integration/</computeroutput> subdirectories.</para>
</listitem><listitem><para><bold>Frontend (TypeScript)</bold>: <computeroutput>Jest</computeroutput> and <computeroutput>React Testing Library</computeroutput> are used for component and utility testing. Tests are located in the <computeroutput>frontend/__tests__/</computeroutput> directory.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [README.md:140-151](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:124-161](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:27-38]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1300">
<title>Conclusion</title><para>The Financial Asset Relationship Database is a well-architected system that provides powerful visualization and analysis capabilities for financial data. Its modular design supports multiple frontends and a clear separation of concerns between the UI, API, and core logic. The project is further strengthened by a robust development and testing process, ensuring code quality and maintainability. Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:21-41, 235-240]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1301">
<title>Quick Start Guide</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/run-dev.sh">run-dev.sh</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/run-dev.bat">run-dev.bat</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/docker-compose.yml">docker-compose.yml</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/QUICK_START.md">QUICK_START.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/DOCKER.md">DOCKER.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/README.md">frontend/README.md</ulink></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1302">
<title>Quick Start Guide</title><para>This guide provides instructions to quickly set up and run the Financial Asset Relationship Database application. It covers three primary methods: the modern Next.js/FastAPI stack (recommended), the original Gradio interface, and a containerized Docker deployment. Each method is designed to get a developer running in under 5 minutes.</para>
<para>The project offers a comprehensive 3D visualization system for interconnected financial assets, including equities, bonds, commodities, and currencies. For more detailed deployment information, refer to the Vercel deployment guide or the system architecture overview.</para>
<para>Sources: [README.md:3-4](), [<ref refid="QUICK__START_8md" kindref="compound">QUICK_START.md</ref>:3-4]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1303">
<title>Prerequisites</title><para>Before you begin, ensure you have the following software installed on your system.</para>
<para><table rows="3" cols="2"><row>
<entry thead="yes" align='left'><para>Software   </para>
</entry><entry thead="yes" align='left'><para>Minimum Version    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>Python   </para>
</entry><entry thead="no" align='left'><para>3.10+    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>Node.js   </para>
</entry><entry thead="no" align='left'><para>18+   </para>
</entry></row>
</table>
</para>
<para>Sources: [README.md:7-9](), [<ref refid="QUICK__START_8md" kindref="compound">QUICK_START.md</ref>:5-7]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1304">
<title>Option 1: Next.js Frontend + FastAPI Backend (Recommended)</title><para>This is the modern approach, providing a rich web interface powered by a REST API. You can use automated scripts for a one-command setup or follow the manual steps for more control.</para>
<para>Sources: [README.md:28-30]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1305">
<title>Automated Setup (Scripts)</title><para>The repository includes convenience scripts to start both the backend and frontend servers simultaneously.</para>
<para>This diagram illustrates the process initiated by the <computeroutput>run-dev</computeroutput> scripts.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Start<sp/>Script]<sp/>--&gt;<sp/>B{Check<sp/>OS};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;|Linux/macOS|<sp/>C[run-dev.sh];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;|Windows|<sp/>D[run-dev.bat];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>E[Start<sp/>FastAPI<sp/>Backend<sp/>on<sp/>Port<sp/>8000];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F[Start<sp/>Next.js<sp/>Frontend<sp/>on<sp/>Port<sp/>3000];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G[Application<sp/>Ready];</highlight></codeline>
</programlisting></para>
<para>Sources: [run-dev.sh](), [run-dev.bat]()</para>
<para>To run the automated setup:</para>
<para><bold>Linux/macOS</bold></para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">./run-dev.sh</highlight></codeline>
</programlisting></para>
<para><bold>Windows</bold></para>
<para><programlisting filename=".cmd"><codeline><highlight class="normal">run-dev.bat</highlight></codeline>
</programlisting></para>
<para>These scripts will perform the necessary setup, including installing dependencies and launching the servers.</para>
<para>Sources: [README.md:33-39](), [<ref refid="QUICK__START_8md" kindref="compound">QUICK_START.md</ref>:9-19]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1306">
<title>Manual Setup</title><para>If you prefer to run the services separately, follow these steps.</para>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1307">
<title>1. Start the FastAPI Backend</title><para><programlisting filename=".bash"><codeline><highlight class="normal">#<sp/>Activate<sp/>virtual<sp/>environment<sp/>(e.g.,<sp/>source<sp/>.venv/bin/activate)</highlight></codeline>
<codeline><highlight class="normal">pip<sp/>install<sp/>-r<sp/>requirements.txt</highlight></codeline>
<codeline><highlight class="normal">python<sp/>-m<sp/>uvicorn<sp/>api.main:app<sp/>--reload<sp/>--port<sp/>8000</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md:44-46](), [<ref refid="QUICK__START_8md" kindref="compound">QUICK_START.md</ref>:25-33]()</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1308">
<title>2. Start the Next.js Frontend</title><para>Open a new terminal for this step.</para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">cd<sp/>frontend</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>install</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>run<sp/>dev</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md:49-51](), [<ref refid="QUICK__START_8md" kindref="compound">QUICK_START.md</ref>:36-44]()</para>
</sect4>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1309">
<title>Accessing the Application</title><para>Once running, the different parts of the application are accessible at the following URLs.</para>
<para><table rows="4" cols="2"><row>
<entry thead="yes" align='left'><para>Service   </para>
</entry><entry thead="yes" align='left'><para>URL    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>Next.js Frontend   </para>
</entry><entry thead="no" align='left'><para><computeroutput><ulink url="http://localhost:3000">http://localhost:3000</ulink></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>FastAPI Backend   </para>
</entry><entry thead="no" align='left'><para><computeroutput><ulink url="http://localhost:8000">http://localhost:8000</ulink></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>API Documentation (Swagger)   </para>
</entry><entry thead="no" align='left'><para><computeroutput><ulink url="http://localhost:8000/docs">http://localhost:8000/docs</ulink></computeroutput>   </para>
</entry></row>
</table>
</para>
<para>Sources: [README.md:54-56](), [<ref refid="QUICK__START_8md" kindref="compound">QUICK_START.md</ref>:20-22]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1310">
<title>Option 2: Gradio UI (Original)</title><para>This method runs the original Python-based Gradio interface.</para>
<para><orderedlist>
<listitem><para><bold>Clone the repository and set up a Python virtual environment.</bold></para>
<para><computeroutput>bash git clone &lt;repository-url&gt; cd financial-asset-relationship-db python -m venv .venv </computeroutput></para>
<para>Sources: [README.md:12-15]()</para>
</listitem><listitem><para><bold>Activate the environment.</bold><itemizedlist>
<listitem><para>macOS/Linux: <computeroutput>source .venv/bin/activate</computeroutput></para>
</listitem><listitem><para>Windows: <computeroutput>.venv\Scripts\activate.bat</computeroutput> Sources: [README.md:18-26]()</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para><bold>Install dependencies.</bold></para>
<para><computeroutput>bash pip install -r requirements.txt </computeroutput></para>
<para>Sources: [README.md:29-31]()</para>
</listitem><listitem><para><bold>Run the application.</bold> <computeroutput>bash python <ref refid="app_8py" kindref="compound">app.py</ref> </computeroutput> The application will be available at <computeroutput><ulink url="http://localhost:7860">http://localhost:7860</ulink></computeroutput>. Sources: [README.md:34-36]()</para>
</listitem></orderedlist>
</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1311">
<title>Option 3: Docker Installation</title><para>For a containerized setup that encapsulates all dependencies, use Docker.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1312">
<title>Docker Compose (Recommended)</title><para>The <computeroutput>docker-compose.yml</computeroutput> file defines the application service.</para>
<para>This diagram shows the services defined in the Docker Compose configuration.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Docker<sp/>Environment</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A(app_service)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;|Exposes<sp/>Port<sp/>7860|<sp/>B(Host<sp/>Machine);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C(User);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>style<sp/>A<sp/>fill:#f9f,stroke:#333,stroke-width:2px</highlight></codeline>
</programlisting></para>
<para>Sources: [docker-compose.yml]()</para>
<para>To build and run the application using Docker Compose:</para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">docker-compose<sp/>up<sp/>--build</highlight></codeline>
</programlisting></para>
<para>This command builds the image for the <computeroutput>app</computeroutput> service and starts the container, making the Gradio UI available on <computeroutput><ulink url="http://localhost:7860">http://localhost:7860</ulink></computeroutput>.</para>
<para>The <computeroutput>docker-compose.yml</computeroutput> defines a single service named <computeroutput>app</computeroutput>.</para>
<para><programlisting filename=".yaml"><codeline><highlight class="normal">#<sp/>docker-compose.yml</highlight></codeline>
<codeline><highlight class="normal">services:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>app:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>build:<sp/>.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ports:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>&quot;7860:7860&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>volumes:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>./src:/app/src</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md:61-63](), [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:5-9](), [docker-compose.yml:2-8]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1313">
<title>Direct Docker Commands</title><para>Alternatively, you can build and run the Docker image directly without Docker Compose.</para>
<para><orderedlist>
<listitem><para><bold>Build the image:</bold> <computeroutput>bash docker build -t financial-asset-db . </computeroutput></para>
</listitem><listitem><para><bold>Run the container:</bold> <computeroutput>bash docker run -p 7860:7860 financial-asset-db </computeroutput> Sources: [README.md:66-69](), [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:12-15]()</para>
</listitem></orderedlist>
</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1314">
<title>Summary</title><para>This guide has outlined three distinct methods for running the application. For modern web development, the <bold>Next.js + FastAPI</bold> stack is recommended and can be started with a single script. The <bold>Gradio UI</bold> offers a simpler, Python-only alternative. Finally, <bold>Docker</bold> provides a consistent, isolated environment ideal for both development and deployment.</para>
<para>Sources: [README.md](), [<ref refid="QUICK__START_8md" kindref="compound">QUICK_START.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1315">
<title>Project Goals and Vision</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AI_RULES.md">AI_RULES.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/IMPROVEMENTS.md">IMPROVEMENTS.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/INTEGRATION_SUMMARY.md">INTEGRATION_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AUDIT_REPORT.md">AUDIT_REPORT.md</ulink></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1316">
<title>Project Goals and Vision</title><para>The Financial Asset Relationship Database project is envisioned as a comprehensive system for visualizing and analyzing the intricate relationships between financial assets. Its core purpose is to provide an interactive 3D network graph that models the connections across major asset classes, including equities, bonds, commodities, currencies, and regulatory events. This allows for cross-asset analysis and understanding the impact of corporate and regulatory activities on the financial ecosystem.</para>
<para>The project&apos;s vision extends to being a modern, scalable, and extensible platform. It supports dual user interfacesâ€”a classic Gradio UI for rapid prototyping and a modern Next.js frontend with a FastAPI backend for a production-grade user experience. The architecture is designed to be modular, separating data models, business logic, and presentation layers to facilitate future enhancements and maintainability.</para>
<para>Sources: [README.md:3-4](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:3-19](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:3-6]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1317">
<title>Core Mission: Visualizing Financial Networks</title><para>The primary goal is to transform complex, abstract financial data into an intuitive, interactive 3D visualization. This helps users discover and analyze relationships that are not immediately obvious from tabular data.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1318">
<title>Key Features</title><para><table rows="5" cols="3"><row>
<entry thead="yes" align='left'><para>Feature   </para>
</entry><entry thead="yes" align='left'><para>Description   </para>
</entry><entry thead="yes" align='left'><para>Source    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>3D Network Visualization</bold>   </para>
</entry><entry thead="no" align='left'><para>An interactive 3D graph of asset relationships, rendered using Plotly.   </para>
</entry><entry thead="no" align='left'><para>[README.md:52](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:43]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Cross-Asset Analysis</bold>   </para>
</entry><entry thead="no" align='left'><para>Automatically discovers and models relationships between different asset classes.   </para>
</entry><entry thead="no" align='left'><para>[README.md:53]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Regulatory Integration</bold>   </para>
</entry><entry thead="no" align='left'><para>Models the impact of corporate events and SEC filings on the asset network.   </para>
</entry><entry thead="no" align='left'><para>[README.md:54]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Real-time Metrics</bold>   </para>
</entry><entry thead="no" align='left'><para>Provides a dashboard with network statistics and relationship strength analysis.   </para>
</entry><entry thead="no" align='left'><para>[README.md:55](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:44]()   </para>
</entry></row>
</table>
</para>
<para>Sources: [README.md:51-55](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:42-45]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1319">
<title>Data Model Vision</title><para>The project&apos;s data model is centered around three core entities: Assets, Relationships, and Regulatory Events. The vision is to create a rich, interconnected graph where these entities influence each other.</para>
<para>The diagram below illustrates the conceptual data model.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">erDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>id<sp/>PK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>symbol</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AssetClass<sp/>asset_class</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>sector</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float<sp/>price</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>RELATIONSHIP<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>source_id<sp/>FK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>target_id<sp/>FK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>type</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float<sp/>strength</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bool<sp/>is_bidirectional</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>REGULATORY_EVENT<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>id<sp/>PK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>RegulatoryActivity<sp/>activity_type</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>date<sp/>event_date</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float<sp/>impact_score</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>||--o{<sp/>RELATIONSHIP<sp/>:<sp/>&quot;has&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>REGULATORY_EVENT<sp/>||--|{<sp/>ASSET<sp/>:<sp/>&quot;impacts&quot;</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [README.md:73-80](), [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref> (inferred from project structure)]()</emphasis></para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1320">
<title>Supported Asset Ecosystem</title><para>The project aims to cover all major financial asset classes to provide a holistic view of the market.</para>
<para><table rows="6" cols="3"><row>
<entry thead="yes" align='left'><para>Asset Class   </para>
</entry><entry thead="yes" align='left'><para>Key Attributes   </para>
</entry><entry thead="yes" align='left'><para>Source    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Equities</bold>   </para>
</entry><entry thead="no" align='left'><para>P/E Ratios, Dividend Yields, EPS, Sector   </para>
</entry><entry thead="no" align='left'><para>[README.md:58]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Fixed Income (Bonds)</bold>   </para>
</entry><entry thead="no" align='left'><para>Yield, Duration, Credit Ratings   </para>
</entry><entry thead="no" align='left'><para>[README.md:59]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Commodities</bold>   </para>
</entry><entry thead="no" align='left'><para>Futures and Spot Prices, Contract Specifications   </para>
</entry><entry thead="no" align='left'><para>[README.md:60]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Currencies</bold>   </para>
</entry><entry thead="no" align='left'><para>FX Pairs, Exchange Rates, Monetary Policy Links   </para>
</entry><entry thead="no" align='left'><para>[README.md:61]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Regulatory Events</bold>   </para>
</entry><entry thead="no" align='left'><para>Earnings, SEC Filings, M&amp;A Activities, Impact Score   </para>
</entry><entry thead="no" align='left'><para>[README.md:62]()   </para>
</entry></row>
</table>
</para>
<para><emphasis>Sources: [README.md:57-62](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:16]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1321">
<title>Relationship Discovery</title><para>A core goal is the automatic discovery of relationships between assets. This logic is encapsulated in the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> and is designed to be extensible.</para>
<para>The following diagram shows the process of building relationships.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Start:<sp/>Ingest<sp/>Assets]<sp/>--&gt;<sp/>B{Iterate<sp/>All<sp/>Asset<sp/>Pairs};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C{Find<sp/>Relationship<sp/>Type};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D{Is<sp/>Relationship<sp/>Found?};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>Yes<sp/>--&gt;<sp/>E[Create<sp/>Relationship<sp/>Edge];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F[Calculate<sp/>Strength<sp/>(0.0-1.0)];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G[Add<sp/>to<sp/>Graph];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>B;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>No<sp/>--&gt;<sp/>B;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>Done<sp/>--&gt;<sp/>H[Graph<sp/>Complete];</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:104-122](), [README.md:95]()</emphasis></para>
<para>The system identifies several types of relationships:</para>
<para><table rows="7" cols="3"><row>
<entry thead="yes" align='left'><para>Relationship Type   </para>
</entry><entry thead="yes" align='left'><para>Description   </para>
</entry><entry thead="yes" align='left'><para>Source    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Sector Affinity</bold>   </para>
</entry><entry thead="no" align='left'><para>Assets belonging to the same industry sector.   </para>
</entry><entry thead="no" align='left'><para>[README.md:65]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Corporate Links</bold>   </para>
</entry><entry thead="no" align='left'><para>Bonds issued by a publicly traded company (equity).   </para>
</entry><entry thead="no" align='left'><para>[README.md:66]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Commodity Exposure</bold>   </para>
</entry><entry thead="no" align='left'><para>Equity companies whose business is tied to commodity prices.   </para>
</entry><entry thead="no" align='left'><para>[README.md:67]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Currency Risk</bold>   </para>
</entry><entry thead="no" align='left'><para>FX exposure for assets not denominated in USD.   </para>
</entry><entry thead="no" align='left'><para>[README.md:68]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Income Comparison</bold>   </para>
</entry><entry thead="no" align='left'><para>Comparing stock dividends against bond yields.   </para>
</entry><entry thead="no" align='left'><para>[README.md:69]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Event Impact</bold>   </para>
</entry><entry thead="no" align='left'><para>A single regulatory event affecting multiple assets.   </para>
</entry><entry thead="no" align='left'><para>[README.md:70]()   </para>
</entry></row>
</table>
</para>
<para><emphasis>Sources: [README.md:64-70]()</emphasis></para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1322">
<title>Technical Vision and Architecture</title><para>The project&apos;s technical vision emphasizes modernity, scalability, and developer experience. This is achieved through a dual-frontend architecture and a clear separation of concerns.</para>
<para>This diagram shows the high-level system architecture.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>User_Interfaces</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UI_Next[Next.js<sp/>UI<sp/>on<sp/>Port<sp/>3000]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UI_Gradio[Gradio<sp/>UI<sp/>on<sp/>Port<sp/>7860]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>API_Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>API[FastAPI<sp/>Backend<sp/>on<sp/>Port<sp/>8000]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Core_Logic</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GraphEngine[AssetRelationshipGraph]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Viz[Visualization<sp/>Logic]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DataModels[Financial<sp/>Data<sp/>Models]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Data_Sources</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>RealData[Real-time<sp/>Data<sp/>Fetcher]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SampleData[Static<sp/>Sample<sp/>Data]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>UI_Next<sp/>--<sp/>REST<sp/>API<sp/>--&gt;<sp/>API;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>API<sp/>--<sp/>Function<sp/>Calls<sp/>--&gt;<sp/>GraphEngine;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>UI_Gradio<sp/>--<sp/>Direct<sp/>Function<sp/>Calls<sp/>--&gt;<sp/>GraphEngine;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>GraphEngine<sp/>--&gt;<sp/>Viz;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>GraphEngine<sp/>--&gt;<sp/>DataModels;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>GraphEngine<sp/>--&gt;<sp/>RealData;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>GraphEngine<sp/>--&gt;<sp/>SampleData;</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:3-82](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:64-90]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1323">
<title>API-First Approach</title><para>The introduction of a FastAPI backend signifies a move towards an API-first design. This decouples the frontend from the backend logic, allowing for more flexible and scalable development.</para>
<para>The sequence diagram below shows a typical data flow for the Next.js frontend.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>User<sp/>as<sp/>&quot;User<sp/>Browser&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>NextApp<sp/>as<sp/>&quot;Next.js<sp/>Frontend&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>FastAPI<sp/>as<sp/>&quot;FastAPI<sp/>Backend&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>GraphEngine<sp/>as<sp/>&quot;Core<sp/>Graph<sp/>Logic&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User-&gt;&gt;NextApp:<sp/>Load<sp/>page</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>NextApp-&gt;&gt;FastAPI:<sp/>GET<sp/>/api/visualization</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FastAPI-&gt;&gt;GraphEngine:<sp/>get_3d_visualization_data()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>GraphEngine--&gt;&gt;FastAPI:<sp/>Return<sp/>{nodes,<sp/>edges}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FastAPI--&gt;&gt;NextApp:<sp/>JSON<sp/>Response</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>NextApp--&gt;&gt;User:<sp/>Render<sp/>3D<sp/>Graph<sp/>with<sp/>Plotly</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:85-102](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:20-33]()</emphasis></para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1324">
<title>Development Philosophy and Quality</title><para>The project vision includes a strong emphasis on high-quality code, robust testing, and a streamlined development workflow. This is supported by a suite of modern development tools and clear contribution guidelines.</para>
<para><emphasis>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:10-14]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1325">
<title>Development Tooling</title><para><table rows="8" cols="3"><row>
<entry thead="yes" align='left'><para>Tool   </para>
</entry><entry thead="yes" align='left'><para>Purpose   </para>
</entry><entry thead="yes" align='left'><para>Source    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>pytest</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Backend testing framework.   </para>
</entry><entry thead="no" align='left'><para>[README.md:102](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:129]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>Jest</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Frontend testing framework.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:30]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>black</computeroutput>, <computeroutput>isort</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Automatic code formatting for Python.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:103](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:150]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>flake8</computeroutput>, <computeroutput>pylint</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Python linting to enforce code style.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:106](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:149]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>mypy</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Static type checking for Python.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:109](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:151]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>pre-commit</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs automated quality checks before each commit.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:44-47](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:183-191]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>GitHub Actions</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Continuous Integration (CI) to run checks automatically.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:158-166]()   </para>
</entry></row>
</table>
</para>
<para><emphasis>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>](), [README.md]()</emphasis></para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1326">
<title>Guiding Principles</title><para><itemizedlist>
<listitem><para><bold>Modularity</bold>: Code is organized into small, focused files with a clear separation of concerns (<computeroutput>src/models</computeroutput>, <computeroutput>src/logic</computeroutput>, etc.).</para>
</listitem><listitem><para><bold>Readability</bold>: Emphasis on clean, well-commented code with meaningful names.</para>
</listitem><listitem><para><bold>Testing</bold>: A high standard for test coverage is expected, with a goal of over 80%. New features and bug fixes must include tests.</para>
</listitem><listitem><para><bold>Consistency</bold>: Adherence to defined coding styles (PEP 8, Black) and project conventions.</para>
</listitem><listitem><para><bold>Documentation</bold>: Public functions and classes require docstrings, and key architectural decisions are documented in Markdown files.</para>
</listitem></itemizedlist>
</para>
<para><emphasis>Sources: [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:43-53](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:80-127](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:20-40]()</emphasis></para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1327">
<title>Future Vision and Extensibility</title><para>The project is designed to be a foundation for more advanced financial analysis tools. The architectural choices and documented improvement areas point to a clear vision for future growth.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1328">
<title>Potential Future Features</title><para><table rows="6" cols="3"><row>
<entry thead="yes" align='left'><para>Feature Area   </para>
</entry><entry thead="yes" align='left'><para>Description   </para>
</entry><entry thead="yes" align='left'><para>Source    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Data Persistence</bold>   </para>
</entry><entry thead="no" align='left'><para>Storing asset and relationship data in a database like SQLite or PostgreSQL.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:200-207]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Real-time Updates</bold>   </para>
</entry><entry thead="no" align='left'><para>Using WebSockets to stream live data and automatically refresh visualizations.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:268-273]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Advanced Analytics</bold>   </para>
</entry><entry thead="no" align='left'><para>Integrating machine learning for relationship prediction, anomaly detection, and trend analysis.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:262-266]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Service-Oriented Architecture</bold>   </para>
</entry><entry thead="no" align='left'><para>Abstracting logic into a service layer with repositories for better testability and maintenance.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:194-216]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Enhanced Monitoring</bold>   </para>
</entry><entry thead="no" align='left'><para>Adding health check endpoints, Prometheus metrics, and structured logging for observability.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:237-259]()   </para>
</entry></row>
</table>
</para>
<para><emphasis>Sources: [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:181-188]()</emphasis></para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1329">
<title>Conclusion</title><para>The project&apos;s goal is to be more than just a visualization tool; it aims to be an extensible, high-quality, and modern platform for financial data analysis. The vision combines a powerful analytical engine with a user-friendly interface, supported by a robust and scalable technical architecture. By prioritizing clean code, comprehensive testing, and clear documentation, the project is well-positioned for future growth and community contribution.</para>
<para><emphasis>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:275-281](), [README.md:3-4]()</emphasis></para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1330">
<title>System Architecture</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1331">
<title>Architecture Overview</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/docker-compose.yml">docker-compose.yml</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AUDIT_REPORT.md">AUDIT_REPORT.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AI_RULES.md">AI_RULES.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1332">
<title>Architecture Overview</title><para>This document provides a comprehensive overview of the system architecture for the Financial Asset Relationship Database. The project is designed to visualize the complex interconnections between financial assets across various classes, including equities, bonds, commodities, and currencies. The architecture supports two distinct user interfacesâ€”a modern Next.js web application and an original Gradio-based demoâ€”both powered by a robust Python backend.</para>
<para>The system is structured into four primary layers: a User Interface Layer, an API Layer, a Core Business Logic Layer, and a Data Layer. This separation of concerns allows for modularity and scalability, enabling different frontend experiences to consume the same underlying relationship discovery engine. For more information on deployment and integration, see DEPLOYMENT.md and INTEGRATION_SUMMARY.md.</para>
<para>Sources: [README.md:3-4](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:3-33](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:15-17]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1333">
<title>System Architecture</title><para>The system is composed of four distinct layers, facilitating a clean separation of concerns between data, logic, and presentation.</para>
<para>This diagram illustrates the high-level system architecture, showing the two UI options and their connection to the backend logic.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>User_Interface_Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Gradio_UI[&quot;Gradio<sp/>UI<sp/>(Port<sp/>7860)&quot;]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>NextJS_UI[&quot;Next.js<sp/>UI<sp/>(Port<sp/>3000)&quot;]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>API_Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FastAPI[&quot;FastAPI<sp/>Backend<sp/>(Port<sp/>8000)&quot;]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Core_Business_Logic_Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AssetGraph[&quot;AssetRelationshipGraph<sp/>(src/logic/asset_graph.py)&quot;]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Visualizations[&quot;Visualization<sp/>Layer<sp/>(src/visualizations/)&quot;]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Data_Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Models[&quot;Financial<sp/>Models<sp/>(src/models/financial_models.py)&quot;]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DataSources[&quot;Data<sp/>Sources<sp/>(src/data/)&quot;]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>NextJS_UI<sp/>--<sp/>&quot;HTTP<sp/>REST<sp/>API&quot;<sp/>--&gt;<sp/>FastAPI</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Gradio_UI<sp/>--<sp/>&quot;Direct<sp/>Function<sp/>Calls&quot;<sp/>--&gt;<sp/>AssetGraph</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FastAPI<sp/>--<sp/>&quot;Function<sp/>Calls&quot;<sp/>--&gt;<sp/>AssetGraph</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>AssetGraph<sp/>--&gt;<sp/>Visualizations</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>AssetGraph<sp/>--&gt;<sp/>Models</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>AssetGraph<sp/>--&gt;<sp/>DataSources</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:5-48](), [README.md:104-118]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1334">
<title>Key Components</title><para><table rows="8" cols="3"><row>
<entry thead="yes"><para>Component   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Source File    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput><ref refid="app_8py" kindref="compound">app.py</ref></computeroutput>   </para>
</entry><entry thead="no"><para>The main application entry point for the Gradio web interface and its event handlers.   </para>
</entry><entry thead="no"><para><computeroutput>README.md:105</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput>   </para>
</entry><entry thead="no"><para>The FastAPI backend that serves the REST API for the Next.js frontend.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:20-29</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput><ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref></computeroutput>   </para>
</entry><entry thead="no"><para>Contains the core graph algorithms and the relationship discovery engine.   </para>
</entry><entry thead="no"><para><computeroutput>README.md:106</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput><ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref></computeroutput>   </para>
</entry><entry thead="no"><para>Defines the domain model dataclasses (e.g., <computeroutput>Asset</computeroutput>, <computeroutput>Equity</computeroutput>) and enums.   </para>
</entry><entry thead="no"><para><computeroutput>README.md:107</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput><ref refid="sample__data_8py" kindref="compound">src/data/sample_data.py</ref></computeroutput>   </para>
</entry><entry thead="no"><para>Responsible for creating the sample dataset used in the application.   </para>
</entry><entry thead="no"><para><computeroutput>README.md:108</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>src/visualizations/</computeroutput>   </para>
</entry><entry thead="no"><para>Contains modules for generating Plotly-based charts and 3D graphs.   </para>
</entry><entry thead="no"><para><computeroutput>README.md:109</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>src/reports/</computeroutput>   </para>
</entry><entry thead="no"><para>Includes logic for generating schema and business rules documentation.   </para>
</entry><entry thead="no"><para><computeroutput>README.md:110</computeroutput>   </para>
</entry></row>
</table>
</para>
<para>Sources: [README.md:104-118](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:197-203]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1335">
<title>Component Interaction Flow</title><para>The system supports two primary interaction flows depending on the user interface being used.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1336">
<title>Next.js Frontend Flow</title><para>The Next.js frontend communicates with the backend via a REST API, providing a decoupled and modern web experience.</para>
<para>The following sequence diagram shows a typical user interaction to view the 3D graph from the Next.js UI.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>User<sp/>as<sp/>&quot;User&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>NextJS<sp/>as<sp/>&quot;Next.js<sp/>UI<sp/>(Port<sp/>3000)&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>FastAPI<sp/>as<sp/>&quot;FastAPI<sp/>Backend<sp/>(Port<sp/>8000)&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>CoreLogic<sp/>as<sp/>&quot;Core<sp/>Logic<sp/>(AssetRelationshipGraph)&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User-&gt;&gt;NextJS:<sp/>Clicks<sp/>&quot;View<sp/>3D<sp/>Graph&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>NextJS-&gt;&gt;FastAPI:<sp/>GET<sp/>/api/visualization</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>FastAPI</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FastAPI-&gt;&gt;CoreLogic:<sp/>get_3d_visualization_data()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>CoreLogic</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>CoreLogic--&gt;&gt;FastAPI:<sp/>{nodes:<sp/>[...],<sp/>edges:<sp/>[...]}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>CoreLogic</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FastAPI--&gt;&gt;NextJS:<sp/>200<sp/>OK<sp/>(JSON<sp/>Response)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>FastAPI</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>NextJS-&gt;&gt;User:<sp/>Renders<sp/>3D<sp/>Visualization</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:52-71]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1337">
<title>Gradio UI Flow</title><para>The Gradio UI, being a Python-native framework, interacts directly with the core logic functions without an intermediate API layer.</para>
<para>This sequence diagram illustrates how the Gradio UI refreshes the visualization through direct function calls.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>User<sp/>as<sp/>&quot;User&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Gradio<sp/>as<sp/>&quot;Gradio<sp/>UI<sp/>(Port<sp/>7860)&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>CoreLogic<sp/>as<sp/>&quot;Core<sp/>Logic<sp/>(AssetRelationshipGraph)&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User-&gt;&gt;Gradio:<sp/>Clicks<sp/>&quot;Refresh<sp/>Visualization&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Gradio-&gt;&gt;CoreLogic:<sp/>refresh_visualization_outputs()&lt;br/&gt;(Direct<sp/>function<sp/>call)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>CoreLogic</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>CoreLogic--&gt;&gt;Gradio:<sp/>Plotly<sp/>Figure<sp/>Object</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>CoreLogic</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Gradio-&gt;&gt;User:<sp/>Updates<sp/>Visualization<sp/>in<sp/>UI</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:73-89]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1338">
<title>Technology Stack</title><para>The project utilizes a combination of Python for the backend and core logic, and a choice between Python (Gradio) or a TypeScript/React (Next.js) stack for the frontend.</para>
<para>Sources: [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:5-20](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:92-120]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1339">
<title>Backend &amp; Core Logic</title><para><table rows="9" cols="2"><row>
<entry thead="yes"><para>Technology   </para>
</entry><entry thead="yes"><para>Role    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Python 3.8+</bold>   </para>
</entry><entry thead="no"><para>Foundational programming language for all backend and logic.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>FastAPI</bold>   </para>
</entry><entry thead="no"><para>High-performance REST API framework for the Next.js frontend.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Uvicorn</bold>   </para>
</entry><entry thead="no"><para>ASGI server to run the FastAPI application.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Pydantic</bold>   </para>
</entry><entry thead="no"><para>Data validation and settings management.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>NumPy</bold>   </para>
</entry><entry thead="no"><para>High-performance numerical operations and graph algorithms.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Pandas</bold>   </para>
</entry><entry thead="no"><para>Data manipulation and analysis.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>yfinance</bold>   </para>
</entry><entry thead="no"><para>Fetching real-time and historical financial market data.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>dataclasses &amp; enum</bold>   </para>
</entry><entry thead="no"><para>Defining structured data models and enumerations.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:7-20](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:109-120]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1340">
<title>Frontend</title><para><table rows="8" cols="2"><row>
<entry thead="yes"><para>Technology   </para>
</entry><entry thead="yes"><para>Role    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Next.js 14</bold>   </para>
</entry><entry thead="no"><para>React framework for the modern web UI.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>React 18</bold>   </para>
</entry><entry thead="no"><para>UI component library.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>TypeScript</bold>   </para>
</entry><entry thead="no"><para>Type safety for the frontend codebase.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Gradio</bold>   </para>
</entry><entry thead="no"><para>Framework for the original Python-based interactive UI.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Plotly / Plotly.js</bold>   </para>
</entry><entry thead="no"><para>Exclusive library for all interactive charts and 3D visualizations.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Axios</bold>   </para>
</entry><entry thead="no"><para>HTTP client for the Next.js frontend to communicate with the API.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Tailwind CSS</bold>   </para>
</entry><entry thead="no"><para>Styling for the Next.js frontend.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:94-107](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:8](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:13]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1341">
<title>Data Layer</title><para>The data layer is responsible for defining the structure of financial assets and sourcing the data.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1342">
<title>Data Models</title><para>The core data models are defined using Python&apos;s <computeroutput>dataclasses</computeroutput> for clarity and type safety. The base <computeroutput>Asset</computeroutput> class is inherited by more specific asset types.</para>
<para>This class diagram shows the inheritance structure of the financial asset models.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Asset<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+id:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+symbol:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+name:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+asset_class:<sp/>AssetClass</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+price:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+currency:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Equity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+sector:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+pe_ratio:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Bond<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+yield:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+duration:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Commodity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+contract_size:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Currency<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+country:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>RegulatoryEvent<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+activity:<sp/>RegulatoryActivity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+impact_score:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Equity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Bond</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Commodity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Currency</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:19-22](), [README.md:93-97]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1343">
<title>Data Sources</title><para>Data is ingested from two primary sources:</para>
<para><orderedlist>
<listitem><para><bold>Static Sample Data</bold>: A predefined set of assets located in <computeroutput><ref refid="sample__data_8py" kindref="compound">src/data/sample_data.py</ref></computeroutput> for demonstration and testing.</para>
</listitem><listitem><para><bold>Yahoo Finance</bold>: Real-time and historical market data is fetched using the <computeroutput>yfinance</computeroutput> library, as defined in <computeroutput><ref refid="real__data__fetcher_8py" kindref="compound">src/data/real_data_fetcher.py</ref></computeroutput>.</para>
</listitem></orderedlist>
</para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:42-46](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:14]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1344">
<title>Deployment Architecture</title><para>The application is designed for both local development and cloud deployment on Vercel.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1345">
<title>Local Development &amp; Docker</title><para>For local development, developers can run the FastAPI backend and Next.js frontend as separate processes. Alternatively, Docker provides a containerized environment. The <computeroutput>docker-compose.yml</computeroutput> file defines the service for running the application.</para>
<para><programlisting filename=".yaml"><codeline><highlight class="normal">#<sp/>docker-compose.yml</highlight></codeline>
<codeline><highlight class="normal">services:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>app:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>build:<sp/>.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ports:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>&quot;7860:7860&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>volumes:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>.:/app</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>environment:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>GRADIO_SERVER_NAME=0.0.0.0</highlight></codeline>
</programlisting></para>
<para>This configuration builds a Docker image from the local Dockerfile and maps port 7860 for the Gradio application.</para>
<para>Sources: [README.md:65-76](), [docker-compose.yml:1-9]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1346">
<title>Vercel Deployment</title><para>The Next.js application is optimized for deployment on Vercel. The frontend is served from Vercel&apos;s Edge Network, while the Python backend (FastAPI) is deployed as a Vercel Serverless Function. This provides auto-scaling capabilities and a seamless deployment experience integrated with Git.</para>
<para>This diagram shows the Vercel deployment model.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User[&quot;Internet<sp/>Users&quot;]<sp/>--&gt;|HTTPS|<sp/>Vercel</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Vercel<sp/>Platform</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>NextJS[&quot;Next.js<sp/>Frontend<sp/>(Edge<sp/>Network)&quot;]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FastAPI[&quot;Python<sp/>Backend<sp/>(Serverless<sp/>Function)&quot;]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>NextJS<sp/>--<sp/>&quot;Internal<sp/>Network&quot;<sp/>--&gt;<sp/>FastAPI</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:158-176]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1347">
<title>Conclusion</title><para>The architecture of the Financial Asset Relationship Database is designed to be modular, scalable, and flexible. By separating the core relationship engine from the presentation layer, the system can support multiple user experiences (Gradio and Next.js) and is well-suited for future expansion. The use of a decoupled API layer for the Next.js application follows modern web development best practices, while the direct-call mechanism for the Gradio app provides a simpler, Python-native alternative. The clear project structure and defined technology stack create a solid foundation for collaborative development and future feature enhancements.</para>
<para>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:410-413](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1348">
<title>Backend Architecture</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/api/main.py">api/main.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/logic/asset_graph.py">src/logic/asset_graph.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/models/financial_models.py">src/models/financial_models.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/app.py">app.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/data/real_data_fetcher.py">src/data/real_data_fetcher.py</ulink></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1349">
<title>Backend Architecture</title><para>The backend architecture of the Financial Asset Relationship Database is designed to support two distinct user interfaces: a modern Next.js web application and the original Gradio-based interactive demo. This is achieved through a dual-pathway system where a FastAPI server provides a RESTful API for the Next.js frontend, while the Gradio app interacts directly with the core business logic.</para>
<para>At the heart of the system is the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput>, a Python class that encapsulates all logic for managing financial assets, discovering their relationships, calculating network metrics, and preparing data for 3D visualization. The data layer is defined by a set of <computeroutput>dataclasses</computeroutput> representing various financial instruments and is populated using either sample data or real-time information fetched via the <computeroutput>yfinance</computeroutput> library.</para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [README.md:80-88](), [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>](), [<ref refid="app_8py" kindref="compound">app.py</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1350">
<title>System Components</title><para>The backend is composed of three primary layers: the API Layer, the Core Business Logic Layer, and the Data Layer. This modular design allows different frontends to consume the same underlying functionality.</para>
<para>This diagram illustrates the high-level system architecture, showing the two frontend applications and how they interface with the backend components.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>User_Interface_Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[Next.js<sp/>UI<sp/>on<sp/>Port<sp/>3000]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B[Gradio<sp/>UI<sp/>on<sp/>Port<sp/>7860]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>API_Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C[FastAPI<sp/>Backend<sp/>on<sp/>Port<sp/>8000]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Core_Business_Logic</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D[AssetRelationshipGraph]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E[Visualization<sp/>Logic]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Data_Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>F[Financial<sp/>Models]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>G[Data<sp/>Fetchers]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--<sp/>&quot;HTTP<sp/>REST<sp/>API&quot;<sp/>--&gt;<sp/>C</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--<sp/>&quot;Function<sp/>Calls&quot;<sp/>--&gt;<sp/>D</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>&quot;Direct<sp/>Function<sp/>Calls&quot;<sp/>--&gt;<sp/>D</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>&quot;Uses&quot;<sp/>--&gt;<sp/>F</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>&quot;Uses&quot;<sp/>--&gt;<sp/>G</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>&quot;Uses&quot;<sp/>--&gt;<sp/>E</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [README.md:19-33]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1351">
<title>API Layer (FastAPI)</title><para>The FastAPI application, defined in <computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput>, serves as the primary interface for the Next.js frontend. It exposes a set of RESTful endpoints to query the financial asset graph. A singleton pattern is used to initialize and reuse a single <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> instance, which is populated with real data on the first request.</para>
<para>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:34-48](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1352">
<title>Key Endpoints</title><para>The API provides endpoints for retrieving assets, relationships, metrics, and visualization data.</para>
<para><table rows="9" cols="4"><row>
<entry thead="yes" align='left'><para>Method   </para>
</entry><entry thead="yes" align='left'><para>Endpoint   </para>
</entry><entry thead="yes" align='left'><para>Description   </para>
</entry><entry thead="yes" align='left'><para>Core Logic Called    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/health</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Health check for the service.   </para>
</entry><entry thead="no" align='left'><para>N/A    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/assets</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Retrieves a list of all assets, with optional filtering by class and sector.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>graph.assets</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/assets/{asset_id}</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Fetches detailed information for a single asset.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>graph.get_asset_by_id()</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/relationships</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Returns all relationships in the graph.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>graph.relationships</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/metrics</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Calculates and returns key network metrics.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>graph.calculate_metrics()</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/visualization</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Generates node and edge data for 3D visualization.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>graph.get_3d_visualization_data()</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/asset-classes</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Lists all available asset classes.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>graph.get_all_asset_classes()</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/sectors</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Lists all unique sectors present in the data.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>graph.get_all_sectors()</computeroutput>   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:51-168]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1353">
<title>Request Flow (Next.js)</title><para>This sequence diagram shows a typical request from the Next.js frontend to the FastAPI backend to retrieve visualization data.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>User<sp/>as<sp/>&quot;User<sp/>(Browser)&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>NextApp<sp/>as<sp/>&quot;Next.js<sp/>Frontend&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>FastAPI<sp/>as<sp/>&quot;FastAPI<sp/>Backend&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Graph<sp/>as<sp/>&quot;AssetRelationshipGraph&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User-&gt;&gt;NextApp:<sp/>Load<sp/>3D<sp/>Visualization<sp/>Page</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>NextApp-&gt;&gt;FastAPI:<sp/>GET<sp/>/api/visualization</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>FastAPI</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>over<sp/>FastAPI:<sp/>get_graph()<sp/>singleton<sp/>is<sp/>called</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FastAPI-&gt;&gt;Graph:<sp/>get_3d_visualization_data()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Graph</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Graph--&gt;&gt;FastAPI:<sp/>{nodes:<sp/>[...],<sp/>edges:<sp/>[...]}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Graph</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FastAPI--&gt;&gt;NextApp:<sp/>200<sp/>OK<sp/>with<sp/>JSON<sp/>data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>FastAPI</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>NextApp-&gt;&gt;User:<sp/>Render<sp/>Plotly.js<sp/>graph</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:133-140](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1354">
<title>Core Business Logic Layer</title><para>The core logic is centralized in the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> class. This class is responsible for the in-memory representation and manipulation of the financial asset network.</para>
<para>Sources: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1355">
<title><computeroutput>AssetRelationshipGraph</computeroutput> Class</title><para>This class manages the lifecycle of assets and their relationships.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>AssetRelationshipGraph<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+List~Asset~<sp/>assets</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+List~Relationship~<sp/>relationships</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+add_asset(asset:<sp/>Asset)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+add_relationship(source_id,<sp/>target_id,<sp/>type,<sp/>strength)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+build_relationships()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+calculate_metrics()<sp/>:<sp/>dict</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+get_3d_visualization_data()<sp/>:<sp/>dict</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+get_asset_by_id(asset_id)<sp/>:<sp/>Asset</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-_find_relationships(asset1,<sp/>asset2)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>:21-255]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1356">
<title>Relationship Discovery</title><para>The <computeroutput>build_relationships()</computeroutput> method orchestrates the discovery of connections between assets. It iterates through all unique pairs of assets and calls <computeroutput>_find_relationships()</computeroutput> to identify potential links based on predefined rules.</para>
<para>This flowchart shows the logic for building relationships.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Start<sp/>build_relationships]<sp/>--&gt;<sp/>B{Iterate<sp/>through<sp/>all<sp/>unique<sp/>pairs<sp/>of<sp/>assets<sp/>(asset1,<sp/>asset2)}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[Call<sp/>_find_relationships(asset1,<sp/>asset2)]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D{Relationship<sp/>found?}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>Yes<sp/>--&gt;<sp/>E[Create<sp/>Relationship<sp/>object]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F[Add<sp/>to<sp/>graph.relationships]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>B</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>No<sp/>--&gt;<sp/>B</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>Loop<sp/>finished<sp/>--&gt;<sp/>G[End]</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>:100-120]()</para>
<para>The <computeroutput>_find_relationships</computeroutput> method contains the specific business rules, such as identifying assets in the same sector or linking a corporate bond to its parent equity.</para>
<para>Sources: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>:122-171]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1357">
<title>Data Layer</title><para>The data layer consists of data models that define the structure of financial assets and the logic for fetching data from external or internal sources.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1358">
<title>Data Models</title><para>The project uses Python&apos;s <computeroutput>dataclasses</computeroutput> to create strongly-typed and structured data models for all financial assets. A base <computeroutput>Asset</computeroutput> class defines common attributes, and specific classes like <computeroutput>Equity</computeroutput>, <computeroutput>Bond</computeroutput>, and <computeroutput>Commodity</computeroutput> inherit from it.</para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>]()</para>
<para>This diagram shows the inheritance hierarchy of the financial asset models.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>direction<sp/>LR</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Asset<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;dataclass&gt;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+id:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+symbol:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+name:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+asset_class:<sp/>AssetClass</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+price:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+currency:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Equity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;dataclass&gt;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+sector:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+market_cap:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Bond<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;dataclass&gt;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+issuer:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+credit_rating:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Commodity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;dataclass&gt;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+unit:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Currency<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;dataclass&gt;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+country:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Equity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Bond</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Commodity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Currency</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>:25-108]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1359">
<title>Data Fetching</title><para>Data is primarily sourced from <computeroutput>yfinance</computeroutput> for real-time and historical market data, as specified in the project&apos;s rules. The function <computeroutput>populate_graph_with_real_data</computeroutput> in <computeroutput><ref refid="real__data__fetcher_8py" kindref="compound">src/data/real_data_fetcher.py</ref></computeroutput> is responsible for fetching data for a predefined list of tickers and populating the graph.</para>
<para>Sources: [<ref refid="real__data__fetcher_8py" kindref="compound">src/data/real_data_fetcher.py</ref>:15-115](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1360">
<title>Gradio Integration</title><para>The original <computeroutput><ref refid="app_8py" kindref="compound">app.py</ref></computeroutput> provides a Gradio-based user interface. Unlike the Next.js application, it does not use the FastAPI layer. Instead, its event handlers make direct synchronous calls to the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> instance and associated visualization functions.</para>
<para>This architecture demonstrates a simpler, direct-coupling approach suitable for rapid prototyping and interactive demos.</para>
<para>This diagram shows the direct interaction between the Gradio UI and the core logic.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>GradioUI[Gradio<sp/>UI<sp/>Components]<sp/>--<sp/>&quot;User<sp/>Interaction&quot;<sp/>--&gt;<sp/>EventHandler[Gradio<sp/>Event<sp/>Handler<sp/>in<sp/>app.py]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>EventHandler<sp/>--<sp/>&quot;Direct<sp/>Function<sp/>Call&quot;<sp/>--&gt;<sp/>CoreLogic[AssetRelationshipGraph]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>CoreLogic<sp/>--<sp/>&quot;Returns<sp/>Data/Figure&quot;<sp/>--&gt;<sp/>EventHandler</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>EventHandler<sp/>--<sp/>&quot;Updates<sp/>UI&quot;<sp/>--&gt;<sp/>GradioUI</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="app_8py" kindref="compound">app.py</ref>:117-158]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1361">
<title>Summary</title><para>The backend architecture is flexible, supporting both a modern, decoupled frontend via a FastAPI REST API and a legacy, tightly-coupled Gradio UI through direct function calls. The system is centered around the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> class, which serves as the single source of truth for business logic, ensuring consistency across both interfaces. The use of <computeroutput>dataclasses</computeroutput> for modeling and a dedicated data-fetching layer creates a clear separation of concerns, making the system modular and extensible.</para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [README.md](), [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>](), [<ref refid="app_8py" kindref="compound">app.py</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1362">
<title>Frontend Architecture</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/app/page.tsx">frontend/app/page.tsx</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/app/lib/api.ts">frontend/app/lib/api.ts</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/next.config.js">frontend/next.config.js</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/README.md">frontend/README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/package.json">frontend/package.json</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/INTEGRATION_SUMMARY.md">INTEGRATION_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1363">
<title>Frontend Architecture</title><para>The frontend for the Financial Asset Relationship Database is a modern web application built with Next.js and React. Its primary purpose is to provide an interactive user interface for visualizing and exploring complex financial asset relationships. The application fetches data from a separate FastAPI backend and presents it through three main features: an interactive 3D network graph, a dashboard of key metrics, and a filterable table of assets.</para>
<para>The architecture emphasizes a clear separation of concerns, with dedicated components for each feature, a centralized API client for backend communication, and type safety enforced by TypeScript. This design makes the application responsive, scalable, and maintainable. For more information on the overall system, see the &quot;&quot; &quot;System Architecture&quot;.</para>
<para>Sources: [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1364">
<title>Technology Stack</title><para>The frontend leverages a modern technology stack centered around the React ecosystem. The core technologies and their roles are detailed below.</para>
<para><table rows="11" cols="3"><row>
<entry thead="yes" align='left'><para>Technology   </para>
</entry><entry thead="yes" align='left'><para>Version   </para>
</entry><entry thead="yes" align='left'><para>Role    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Next.js</bold>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>14.2.35</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The React framework for server-side rendering, routing, and building the application.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>React</bold>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>^18.2.0</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The UI library for building components.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>TypeScript</bold>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>^5.3.0</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Provides static typing for the entire codebase, ensuring type safety.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Tailwind CSS</bold>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>^3.3.0</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>A utility-first CSS framework for styling the application.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Plotly.js</bold>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>^2.27.0</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The core library for creating the interactive 3D network visualization.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>react-plotly.js</bold>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>^2.6.0</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>A React wrapper for Plotly.js, integrating it into the component model.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Recharts</bold>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>^2.10.0</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>A composable charting library used for the metrics dashboard.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Axios</bold>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>^1.13.2</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>A promise-based HTTP client for communicating with the backend REST API.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Jest</bold>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>^29.7.0</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The testing framework used for unit and component tests.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>React Testing Library</bold>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>^14.1.2</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Provides utilities for testing React components in a user-centric way.   </para>
</entry></row>
</table>
</para>
<para>Sources: [frontend/package.json](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1365">
<title>Project Structure</title><para>The frontend project is organized into a standard Next.js App Router structure. This layout separates concerns, making the codebase easy to navigate and maintain.</para>
<para><programlisting><codeline><highlight class="normal">frontend/</highlight></codeline>
<codeline><highlight class="normal">â”œâ”€â”€<sp/>app/</highlight></codeline>
<codeline><highlight class="normal">â”‚<sp/><sp/><sp/>â”œâ”€â”€<sp/>components/<sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>React<sp/>components</highlight></codeline>
<codeline><highlight class="normal">â”‚<sp/><sp/><sp/>â”‚<sp/><sp/><sp/>â”œâ”€â”€<sp/>AssetList.tsx</highlight></codeline>
<codeline><highlight class="normal">â”‚<sp/><sp/><sp/>â”‚<sp/><sp/><sp/>â”œâ”€â”€<sp/>MetricsDashboard.tsx</highlight></codeline>
<codeline><highlight class="normal">â”‚<sp/><sp/><sp/>â”‚<sp/><sp/><sp/>â””â”€â”€<sp/>NetworkVisualization.tsx</highlight></codeline>
<codeline><highlight class="normal">â”‚<sp/><sp/><sp/>â”œâ”€â”€<sp/>lib/<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Utility<sp/>libraries</highlight></codeline>
<codeline><highlight class="normal">â”‚<sp/><sp/><sp/>â”‚<sp/><sp/><sp/>â”œâ”€â”€<sp/>api.ts<sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>API<sp/>client</highlight></codeline>
<codeline><highlight class="normal">â”‚<sp/><sp/><sp/>â”‚<sp/><sp/><sp/>â””â”€â”€<sp/>index.ts<sp/><sp/><sp/><sp/>#<sp/>Barrel<sp/>exports</highlight></codeline>
<codeline><highlight class="normal">â”‚<sp/><sp/><sp/>â”œâ”€â”€<sp/>types/<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>TypeScript<sp/>type<sp/>definitions</highlight></codeline>
<codeline><highlight class="normal">â”‚<sp/><sp/><sp/>â”‚<sp/><sp/><sp/>â””â”€â”€<sp/>api.ts</highlight></codeline>
<codeline><highlight class="normal">â”‚<sp/><sp/><sp/>â”œâ”€â”€<sp/>globals.css<sp/><sp/><sp/><sp/><sp/>#<sp/>Global<sp/>styles</highlight></codeline>
<codeline><highlight class="normal">â”‚<sp/><sp/><sp/>â”œâ”€â”€<sp/>layout.tsx<sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Root<sp/>layout</highlight></codeline>
<codeline><highlight class="normal">â”‚<sp/><sp/><sp/>â””â”€â”€<sp/>page.tsx<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Main<sp/>page</highlight></codeline>
<codeline><highlight class="normal">â”œâ”€â”€<sp/>public/<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Static<sp/>assets</highlight></codeline>
<codeline><highlight class="normal">â”œâ”€â”€<sp/>next.config.js<sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Next.js<sp/>configuration</highlight></codeline>
<codeline><highlight class="normal">â”œâ”€â”€<sp/>package.json<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>Dependencies<sp/>and<sp/>scripts</highlight></codeline>
<codeline><highlight class="normal">â”œâ”€â”€<sp/>tsconfig.json<sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>TypeScript<sp/>configuration</highlight></codeline>
<codeline><highlight class="normal">â””â”€â”€<sp/>tailwind.config.js<sp/><sp/>#<sp/>Tailwind<sp/>CSS<sp/>configuration</highlight></codeline>
</programlisting></para>
<para><emphasis>Source: [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>]()</emphasis></para>
<para><itemizedlist>
<listitem><para><bold><computeroutput>app/</computeroutput></bold>: The core of the application, following the Next.js App Router convention.<itemizedlist>
<listitem><para><bold><computeroutput>components/</computeroutput></bold>: Contains reusable React components that form the building blocks of the UI.</para>
</listitem><listitem><para><bold><computeroutput>lib/</computeroutput></bold>: Houses utility functions, with <computeroutput>api.ts</computeroutput> being the most critical for backend communication.</para>
</listitem><listitem><para><bold><computeroutput>types/</computeroutput></bold>: Defines TypeScript interfaces for data structures, particularly for API responses.</para>
</listitem><listitem><para><bold><computeroutput>page.tsx</computeroutput></bold>: The main entry point and page component, which orchestrates the layout and data fetching for the different tabs.</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para><bold><computeroutput>public/</computeroutput></bold>: Stores static assets like images and fonts.</para>
</listitem><listitem><para><bold><computeroutput>next.config.js</computeroutput></bold>: Configuration file for the Next.js framework.</para>
</listitem><listitem><para><bold><computeroutput>package.json</computeroutput></bold>: Defines project metadata, dependencies, and scripts.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1366">
<title>Core Components</title><para>The UI is built from a set of modular React components, each responsible for a specific feature. The main page (<computeroutput>page.tsx</computeroutput>) uses a tabbed interface to switch between these components.</para>
<para><itemizedlist>
<listitem><para><bold><computeroutput>NetworkVisualization.tsx</computeroutput></bold>: Renders the interactive 3D network graph using <computeroutput>react-plotly.js</computeroutput>. It takes node and edge data as props and configures the 3D scene, camera, and layout.</para>
</listitem><listitem><para><bold><computeroutput>MetricsDashboard.tsx</computeroutput></bold>: Displays key network statistics and analytics, such as total assets, relationships, and network density. It uses <computeroutput>Recharts</computeroutput> to render charts like the asset class distribution.</para>
</listitem><listitem><para><bold><computeroutput>AssetList.tsx</computeroutput></bold>: Presents a filterable and searchable table of all financial assets. It allows users to filter assets by class and sector.</para>
</listitem></itemizedlist>
</para>
<para>These components are managed by the main <computeroutput>HomePage</computeroutput> component in <computeroutput>app/page.tsx</computeroutput>, which handles data fetching and passes the required data down as props.</para>
<para>Sources: [frontend/app/page.tsx](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1367">
<title>Data Flow and API Communication</title><para>The frontend is decoupled from the backend and communicates exclusively through a REST API. All API logic is encapsulated within the API client module.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1368">
<title>API Client (<computeroutput>lib/api.ts</computeroutput>)</title><para>This module uses <computeroutput>axios</computeroutput> to create a pre-configured client for making HTTP requests to the backend. The base URL is determined by the <computeroutput>NEXT_PUBLIC_API_URL</computeroutput> environment variable.</para>
<para>The following diagram illustrates the data fetching sequence when the application loads.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>User</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Page<sp/>as<sp/>&quot;HomePage<sp/>(page.tsx)&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>APIClient<sp/>as<sp/>&quot;API<sp/>Client<sp/>(api.ts)&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Backend<sp/>as<sp/>&quot;FastAPI<sp/>Backend&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User-&gt;&gt;Page:<sp/>Loads<sp/>application</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Page</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Page-&gt;&gt;APIClient:<sp/>Calls<sp/>getVisualizationData(),<sp/>getMetrics(),<sp/>getAssets()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>APIClient</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>over<sp/>Page,Backend:<sp/>Parallel<sp/>data<sp/>fetching<sp/>on<sp/>mount</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>APIClient-&gt;&gt;Backend:<sp/>GET<sp/>/api/visualization</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>APIClient-&gt;&gt;Backend:<sp/>GET<sp/>/api/metrics</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>APIClient-&gt;&gt;Backend:<sp/>GET<sp/>/api/assets</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Backend--&gt;&gt;APIClient:<sp/>{<sp/>nodes:<sp/>[...],<sp/>edges:<sp/>[...]<sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Backend--&gt;&gt;APIClient:<sp/>{<sp/>total_assets:<sp/>...,<sp/>...<sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Backend--&gt;&gt;APIClient:<sp/>[<sp/>{<sp/>id:<sp/>...,<sp/>symbol:<sp/>...<sp/>},<sp/>...<sp/>]</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Backend</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>APIClient--&gt;&gt;Page:<sp/>Returns<sp/>fetched<sp/>data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>APIClient</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Page-&gt;&gt;Page:<sp/>Sets<sp/>data<sp/>in<sp/>state<sp/>(e.g.,<sp/>setVizData)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Page--&gt;&gt;User:<sp/>Renders<sp/>UI<sp/>with<sp/>data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Page</highlight></codeline>
</programlisting></para>
<para>This diagram shows the initial parallel data fetching when the main page component mounts. <emphasis>Sources: [frontend/app/page.tsx](), [frontend/app/lib/api.ts](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</emphasis></para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1369">
<title>Key API Functions</title><para>The <computeroutput>api.ts</computeroutput> module exposes several functions to interact with the backend endpoints.</para>
<para><table rows="9" cols="4"><row>
<entry thead="yes" align='left'><para>Function Name   </para>
</entry><entry thead="yes" align='left'><para>HTTP Method   </para>
</entry><entry thead="yes" align='left'><para>Endpoint   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>healthCheck</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/health</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Checks the health of the backend API.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getAssets</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/assets</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Fetches a list of all assets, with optional filtering by class or sector.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getAssetDetail</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/assets/{id}</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Retrieves details for a single asset.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getAllRelationships</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/relationships</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Fetches all relationships in the graph.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getMetrics</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/metrics</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Retrieves network-wide metrics.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getVisualizationData</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/visualization</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Fetches the node and edge data required for the 3D graph.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getAssetClasses</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/asset-classes</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Gets a list of all available asset classes.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getSectors</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/sectors</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Gets a list of all available industry sectors.   </para>
</entry></row>
</table>
</para>
<para>Sources: [frontend/app/lib/api.ts](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1370">
<title>State Management</title><para>State management within the frontend is handled primarily by React hooks (<computeroutput>useState</computeroutput>, <computeroutput>useEffect</computeroutput>) inside the <computeroutput>HomePage</computeroutput> component (<computeroutput>app/page.tsx</computeroutput>). There is no external state management library like Redux or Zustand.</para>
<para>The main page component manages several state variables:</para>
<para><itemizedlist>
<listitem><para>Data for each component (<computeroutput>vizData</computeroutput>, <computeroutput>metrics</computeroutput>, <computeroutput>assets</computeroutput>).</para>
</listitem><listitem><para>Loading status (<computeroutput>loading</computeroutput>).</para>
</listitem><listitem><para>Error status (<computeroutput>error</computeroutput>).</para>
</listitem><listitem><para>The currently active tab.</para>
</listitem></itemizedlist>
</para>
<para>The following flowchart illustrates the state transitions during the initial data load.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Component<sp/>Mount]<sp/>--&gt;<sp/>B{Set<sp/>loading<sp/>=<sp/>true};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[Fetch<sp/>Data<sp/>from<sp/>API];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D{API<sp/>Call<sp/>Successful?};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>Yes<sp/>--&gt;<sp/>E[Set<sp/>data<sp/>in<sp/>state];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F[Set<sp/>loading<sp/>=<sp/>false];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>No<sp/>--&gt;<sp/>G[Set<sp/>error<sp/>message];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>F;</highlight></codeline>
</programlisting></para>
<para>This diagram shows the simple loading, success, and error state flow managed within the main page component. <emphasis>Source: [frontend/app/page.tsx]()</emphasis></para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1371">
<title>Configuration and Scripts</title><para>Project configuration and build scripts are managed through standard Next.js and Node.js files.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1372">
<title>Environment Variables</title><para>The frontend requires a single environment variable to be set in a <computeroutput>.env.local</computeroutput> file to connect to the backend API.</para>
<para><itemizedlist>
<listitem><para><computeroutput>NEXT_PUBLIC_API_URL</computeroutput>: The base URL for the FastAPI backend (e.g., <computeroutput><ulink url="http://localhost:8000">http://localhost:8000</ulink></computeroutput>).</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>](), [<ref refid="QUICK__START_8md" kindref="compound">QUICK_START.md</ref>]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1373">
<title><computeroutput>package.json</computeroutput> Scripts</title><para>The <computeroutput>package.json</computeroutput> file defines scripts for development, building, and testing.</para>
<para><table rows="7" cols="3"><row>
<entry thead="yes" align='left'><para>Script   </para>
</entry><entry thead="yes" align='left'><para>Command   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>dev</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>next dev</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Starts the Next.js development server.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>build</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>next build</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Creates a production-optimized build of the application.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>start</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>next start</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Starts the production server after a build.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>lint</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>next lint</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs ESLint to find and fix problems in the code.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>test</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>jest --silent</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs the Jest test suite in silent mode.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>test:coverage</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>jest --coverage --silent</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs tests and generates a code coverage report.   </para>
</entry></row>
</table>
</para>
<para>Source: [frontend/package.json:5-12]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1374">
<title>Testing</title><para>The project is configured for testing using Jest and React Testing Library. The <computeroutput>package.json</computeroutput> includes scripts to run tests, generate coverage reports, and run in watch mode. The testing setup is configured in <computeroutput>jest.config.js</computeroutput> and <computeroutput>jest.setup.js</computeroutput> (not included in context, but implied by <computeroutput>package.json</computeroutput> and <computeroutput><ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref></computeroutput>). Tests cover components, API utilities, and user interactions.</para>
<para>Sources: [frontend/package.json](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>](), [README.md]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1375">
<title>Financial Data Models</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/models/financial_models.py">src/models/financial_models.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AI_RULES.md">AI_RULES.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AUDIT_REPORT.md">AUDIT_REPORT.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/IMPROVEMENTS.md">IMPROVEMENTS.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1376">
<title>Financial Data Models</title><para>The financial data models are the structural foundation of the Financial Asset Relationship Database. They define the core entities, their attributes, and their relationships, ensuring data integrity, type safety, and a clear, extensible domain model. These models are implemented as Python <computeroutput>dataclasses</computeroutput>, providing a structured and maintainable way to represent complex financial instruments and events.</para>
<para>Sources: [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>](), [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>]()</para>
<para>The models are located in the <computeroutput>src/models/</computeroutput> directory and are a key component of the Data Layer, feeding into the Core Business Logic Layer where relationships are processed and visualizations are generated.</para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1377">
<title>Core Concepts</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1378">
<title>Dataclasses and Enums</title><para>The project exclusively uses Python&apos;s built-in <computeroutput>dataclasses</computeroutput> and <computeroutput>enum</computeroutput> modules for data modeling. This approach ensures type safety, clarity, and maintainability without introducing heavy external dependencies for data definition.</para>
<para><itemizedlist>
<listitem><para><bold><computeroutput>dataclasses</computeroutput></bold>: Used to define all structured data objects like <computeroutput>Asset</computeroutput>, <computeroutput>Equity</computeroutput>, and <computeroutput>Bond</computeroutput>.</para>
</listitem><listitem><para><bold><computeroutput>enum</computeroutput></bold>: Used for fixed sets of choices, such as <computeroutput>AssetClass</computeroutput> and <computeroutput>RegulatoryActivity</computeroutput>.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1379">
<title>Inheritance Model</title><para>The system employs a clear inheritance hierarchy, with a base <computeroutput>Asset</computeroutput> class defining common properties. Specific asset types like <computeroutput>Equity</computeroutput>, <computeroutput>Bond</computeroutput>, <computeroutput>Commodity</computeroutput>, and <computeroutput>Currency</computeroutput> inherit from this base class and add their own unique attributes. This promotes code reuse and a consistent structure across all asset types.</para>
<para>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>](), [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>]()</para>
<para>This diagram illustrates the inheritance structure of the financial asset models.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>direction<sp/>LR</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Asset<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>id</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>symbol</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+AssetClass<sp/>asset_class</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>currency</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>price</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>sector</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+dict<sp/>additional_fields</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Equity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>pe_ratio</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>dividend_yield</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>eps</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Bond<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>yield_to_maturity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>duration</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>credit_rating</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Commodity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>contract_size</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>unit_of_measure</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Currency<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>country</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Equity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Bond</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Commodity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Currency</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1380">
<title>Data Model Schema</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1381">
<title>Enumerations</title><para>Enumerations are used to standardize categorical data within the models.</para>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1382">
<title>AssetClass</title><para>Defines the supported types of financial assets.</para>
<para><table rows="6" cols="2"><row>
<entry thead="yes"><para>Member   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>EQUITY</computeroutput>   </para>
</entry><entry thead="no"><para>Represents stocks.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>BOND</computeroutput>   </para>
</entry><entry thead="no"><para>Represents fixed income.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>COMMODITY</computeroutput>   </para>
</entry><entry thead="no"><para>Represents commodities.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>CURRENCY</computeroutput>   </para>
</entry><entry thead="no"><para>Represents foreign exchange.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>DERIVATIVE</computeroutput>   </para>
</entry><entry thead="no"><para>Represents derivatives.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>](), [README.md]()</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1383">
<title>RegulatoryActivity</title><para>Defines the types of regulatory or corporate events.</para>
<para><table rows="4" cols="2"><row>
<entry thead="yes"><para>Member   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>EARNINGS</computeroutput>   </para>
</entry><entry thead="no"><para>Corporate earnings announcement.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>SEC_FILING</computeroutput>   </para>
</entry><entry thead="no"><para>Filing with the Securities and Exchange Commission.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>MERGER_ACQUISITION</computeroutput>   </para>
</entry><entry thead="no"><para>Merger or acquisition activity.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>](), [README.md]()</para>
</sect4>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1384">
<title>Core Data Models</title><sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1385">
<title>Asset (Base Class)</title><para>The <computeroutput>Asset</computeroutput> class is the abstract base for all financial instruments in the system.</para>
<para><table rows="9" cols="3"><row>
<entry thead="yes"><para>Field   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>id</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>Unique identifier for the asset.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>symbol</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>Ticker symbol or unique code.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>name</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>Full name of the asset.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>asset_class</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>AssetClass</computeroutput>   </para>
</entry><entry thead="no"><para>The type of the asset (e.g., EQUITY, BOND).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>currency</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The currency of the asset&apos;s price (ISO 4217 code).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>price</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>The current market price.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>sector</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput> (Optional)   </para>
</entry><entry thead="no"><para>Industry sector the asset belongs to.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>additional_fields</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>dict</computeroutput> (Optional)   </para>
</entry><entry thead="no"><para>A dictionary for any extra, non-standard data.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>]()</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1386">
<title>Equity</title><para>Inherits from <computeroutput>Asset</computeroutput> and adds fields specific to stocks.</para>
<para><table rows="4" cols="3"><row>
<entry thead="yes"><para>Field   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>pe_ratio</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>Price-to-Earnings ratio.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>dividend_yield</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>Annual dividend per share as a percentage of the share&apos;s price.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>eps</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>Earnings Per Share.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>](), [README.md]()</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1387">
<title>Bond</title><para>Inherits from <computeroutput>Asset</computeroutput> and adds fields specific to fixed-income securities.</para>
<para><table rows="4" cols="3"><row>
<entry thead="yes"><para>Field   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>yield_to_maturity</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>The total return anticipated on a bond if held until it matures.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>duration</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>A measure of the bond&apos;s price sensitivity to interest rate changes.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>credit_rating</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>A rating of the bond issuer&apos;s creditworthiness.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>](), [README.md]()</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1388">
<title>Commodity</title><para>Inherits from <computeroutput>Asset</computeroutput> and adds fields for commodities.</para>
<para><table rows="3" cols="3"><row>
<entry thead="yes"><para>Field   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>contract_size</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The amount of the commodity in one contract.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>unit_of_measure</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The unit for the contract size (e.g., barrels, bushels).   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>](), [README.md]()</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1389">
<title>Currency</title><para>Inherits from <computeroutput>Asset</computeroutput> and adds fields for currencies.</para>
<para><table rows="2" cols="3"><row>
<entry thead="yes"><para>Field   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>country</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The primary country associated with the currency.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>](), [README.md]()</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1390">
<title>RegulatoryEvent</title><para>Represents a corporate or regulatory event that can impact assets.</para>
<para><table rows="7" cols="3"><row>
<entry thead="yes"><para>Field   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>id</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>Unique identifier for the event.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>event_type</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>RegulatoryActivity</computeroutput>   </para>
</entry><entry thead="no"><para>The type of event (e.g., EARNINGS).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>date</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The date of the event (ISO 8601 format).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>description</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>A description of the event.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>impact_score</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>A score from -1.0 to 1.0 indicating the event&apos;s impact.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>related_assets</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>list[str]</computeroutput>   </para>
</entry><entry thead="no"><para>A list of asset IDs affected by this event.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>]()</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1391">
<title>AssetRelationship</title><para>Defines a connection between two assets.</para>
<para><table rows="6" cols="3"><row>
<entry thead="yes"><para>Field   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>source</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The ID of the source asset.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>target</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The ID of the target asset.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>type</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The nature of the relationship (e.g., <computeroutput>same_sector</computeroutput>).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>strength</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>The strength of the relationship, normalized from 0.0 to 1.0.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>is_bidirectional</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>bool</computeroutput>   </para>
</entry><entry thead="no"><para>Whether the relationship is symmetric.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>]()</para>
</sect4>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1392">
<title>Entity Relationship Diagram</title><para>This diagram shows the relationships between the main data entities. An <computeroutput>AssetRelationship</computeroutput> connects two <computeroutput>Asset</computeroutput> entities, and a <computeroutput>RegulatoryEvent</computeroutput> can be linked to multiple <computeroutput>Asset</computeroutput> entities.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">erDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>id<sp/>PK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>symbol</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AssetClass<sp/>asset_class</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET_RELATIONSHIP<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>source_id<sp/>FK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>target_id<sp/>FK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>type</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float<sp/>strength</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>REGULATORY_EVENT<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>id<sp/>PK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>RegulatoryActivity<sp/>event_type</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>date</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float<sp/>impact_score</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>||--o{<sp/>ASSET_RELATIONSHIP<sp/>:<sp/>&quot;has<sp/>source&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>||--o{<sp/>ASSET_RELATIONSHIP<sp/>:<sp/>&quot;has<sp/>target&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>}o--o{<sp/>REGULATORY_EVENT<sp/>:<sp/>&quot;is<sp/>affected<sp/>by&quot;</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>](), [README.md]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1393">
<title>Data Validation</title><para>Data integrity is enforced through validation logic within the <computeroutput>__post_init__</computeroutput> method of the dataclasses. This ensures that all created objects adhere to predefined business rules.</para>
<para>Key validation rules include:</para>
<para><itemizedlist>
<listitem><para>Asset <computeroutput>price</computeroutput> must be non-negative.</para>
</listitem><listitem><para><computeroutput>currency</computeroutput> codes must be 3-letter ISO format strings.</para>
</listitem><listitem><para><computeroutput>RegulatoryEvent</computeroutput> <computeroutput>impact_score</computeroutput> must be within the range of -1.0 to 1.0.</para>
</listitem><listitem><para><computeroutput>RegulatoryEvent</computeroutput> <computeroutput>date</computeroutput> must be in ISO 8601 format.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>](), [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>](), [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1394">
<title>Conclusion</title><para>The financial data models provide a robust and well-structured schema for the application&apos;s core data. By leveraging Python&apos;s native <computeroutput>dataclasses</computeroutput> and a clear inheritance structure, the models are both easy to understand and simple to extend. The built-in validation ensures a high level of data quality, which is critical for the accuracy of the relationship analysis and visualizations that form the core of the project.</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1395">
<title>Core Features</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1396">
<title>Feature: 3D Network Visualization</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/visualizations/graph_visuals.py">src/visualizations/graph_visuals.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/visualizations/graph_2d_visuals.py">src/visualizations/graph_2d_visuals.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/INTEGRATION_SUMMARY.md">INTEGRATION_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/app/components/NetworkVisualization.tsx">frontend/app/components/NetworkVisualization.tsx</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/__tests__/components/NetworkVisualization.test.tsx">frontend/**tests**/components/NetworkVisualization.test.tsx</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/__tests__/test-utils.test.ts">frontend/**tests**/test-utils.test.ts</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/api/main.py">api/main.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/logic/asset_graph.py">src/logic/asset_graph.py</ulink></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1397">
<title>Feature: 3D Network Visualization</title><para>The 3D Network Visualization is the core feature of the Financial Asset Relationship Database, providing an interactive 3D graph to explore the interconnectedness of financial assets. It supports various asset classes, including Equities, Bonds, Commodities, and Currencies, and models the relationships between them. This visualization is available through both the original Gradio UI and the newer Next.js web application.</para>
<para>The system is designed to automatically discover relationships and display them in a deterministic 3D layout, ensuring a consistent and analyzable view of the asset network. The visualization is powered by Plotly on both the Python backend and the React frontend.</para>
<para>Sources: [README.md](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1398">
<title>Architecture and Data Flow</title><para>The 3D visualization feature spans the full stack, from the backend data logic to the frontend rendering component. The modern implementation uses a Next.js frontend communicating with a FastAPI backend via a REST API.</para>
<para>The diagram below illustrates the data flow for the Next.js application to render the 3D graph.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>User<sp/>as<sp/>&quot;User<sp/>Browser&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>NextJS<sp/>as<sp/>&quot;Next.js<sp/>Frontend<sp/>(Port<sp/>3000)&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>FastAPI<sp/>as<sp/>&quot;FastAPI<sp/>Backend<sp/>(Port<sp/>8000)&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>CoreLogic<sp/>as<sp/>&quot;Python<sp/>Core<sp/>Logic&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User-&gt;&gt;NextJS:<sp/>Loads<sp/>main<sp/>page</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>NextJS-&gt;&gt;FastAPI:<sp/>GET<sp/>/api/visualization</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>right<sp/>of<sp/>NextJS:<sp/>API<sp/>call<sp/>made<sp/>from<sp/>NetworkVisualization.tsx</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FastAPI-&gt;&gt;CoreLogic:<sp/>get_3d_visualization_data()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>right<sp/>of<sp/>FastAPI:<sp/>Calls<sp/>method<sp/>on<sp/>AssetRelationshipGraph<sp/>instance</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>CoreLogic--&gt;&gt;FastAPI:<sp/>Returns<sp/>{nodes:<sp/>[...],<sp/>edges:<sp/>[...]}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>right<sp/>of<sp/>CoreLogic:<sp/>Data<sp/>includes<sp/>3D<sp/>positions<sp/>and<sp/>colors</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FastAPI--&gt;&gt;NextJS:<sp/>JSON<sp/>Response<sp/>with<sp/>visualization<sp/>data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>NextJS--&gt;&gt;User:<sp/>Renders<sp/>interactive<sp/>3D<sp/>graph<sp/>using<sp/>Plotly.js</highlight></codeline>
</programlisting></para>
<para>This sequence shows the clear separation of concerns: the frontend handles rendering, the backend provides a dedicated API endpoint, and the core logic is responsible for generating the visualization data structure.</para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>](), [frontend/app/components/NetworkVisualization.tsx](), [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1399">
<title>Backend Implementation</title><para>The backend is responsible for creating the data structure that the frontend uses to render the graph. This logic is encapsulated within the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> class and exposed via a FastAPI endpoint.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1400">
<title>Data Generation</title><para>The core method for generating visualization data is <computeroutput>AssetRelationshipGraph.get_3d_visualization_data()</computeroutput>. This method is called by the API endpoint and returns a dictionary containing nodes and edges.</para>
<para>A key feature of the backend is the use of a fixed random seed (<computeroutput>seed=42</computeroutput>) to ensure that the 3D layout of the assets is deterministic and consistent across page loads and application restarts. This is crucial for comparative analysis.</para>
<para>The overall process is as follows:</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[API<sp/>Request:<sp/>GET<sp/>/api/visualization]<sp/>--&gt;<sp/>B{Call<sp/>get_3d_visualization_data};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[Get<sp/>Assets<sp/>and<sp/>Relationships];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D[Calculate<sp/>3D<sp/>Positions<sp/>(seed=42)];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E[Assign<sp/>Colors<sp/>by<sp/>Asset<sp/>Class];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F[Assign<sp/>Node<sp/>Sizes];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G[Format<sp/>Node<sp/>and<sp/>Edge<sp/>Data];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>H[Return<sp/>JSON:<sp/>{nodes,<sp/>edges}];</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md](), [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>](), [<ref refid="graph__visuals_8py" kindref="compound">src/visualizations/graph_visuals.py</ref>]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1401">
<title>API Endpoint: <computeroutput>/api/visualization</computeroutput></title><para>The FastAPI backend exposes a dedicated endpoint to serve the 3D graph data.</para>
<para><itemizedlist>
<listitem><para><bold>Endpoint</bold>: <computeroutput>GET /api/visualization</computeroutput></para>
</listitem><listitem><para><bold>File</bold>: <computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput></para>
</listitem><listitem><para><bold>Description</bold>: Retrieves the complete data structure required to render the 3D network graph. It calls the core logic and returns the data in a JSON format.</para>
</listitem></itemizedlist>
</para>
<para>The response from this endpoint contains two main keys: <computeroutput>nodes</computeroutput> and <computeroutput>edges</computeroutput>.</para>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1402">
<title>Response Data Structure</title><para><table rows="3" cols="3"><row>
<entry thead="yes"><para>Key   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>nodes</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>Array&lt;Node&gt;</computeroutput>   </para>
</entry><entry thead="no"><para>An array of objects, where each object represents an asset in the graph.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>edges</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>Array&lt;Edge&gt;</computeroutput>   </para>
</entry><entry thead="no"><para>An array of objects, where each object represents a relationship between two assets.   </para>
</entry></row>
</table>
</para>
<para><bold>Node Object Structure</bold> <table rows="8" cols="3"><row>
<entry thead="yes"><para>Field   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>id</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no"><para>Unique identifier for the asset (e.g., &quot;ASSET_1&quot;).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>name</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no"><para>Full name of the asset (e.g., &quot;Apple Inc.&quot;).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>symbol</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no"><para>Ticker symbol or short identifier (e.g., &quot;AAPL&quot;).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>asset_class</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no"><para>The class of the asset (e.g., &quot;EQUITY&quot;).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>x</computeroutput>, <computeroutput>y</computeroutput>, <computeroutput>z</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>number</computeroutput>   </para>
</entry><entry thead="no"><para>The 3D coordinates for the node&apos;s position in the graph.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>color</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no"><para>Hex color code for the node, determined by its asset class.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>size</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>number</computeroutput>   </para>
</entry><entry thead="no"><para>The size of the node in the visualization.   </para>
</entry></row>
</table>
</para>
<para><bold>Edge Object Structure</bold> <table rows="5" cols="3"><row>
<entry thead="yes"><para>Field   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>source</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no"><para>The <computeroutput>id</computeroutput> of the source asset.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>target</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no"><para>The <computeroutput>id</computeroutput> of the target asset.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>relationship_type</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no"><para>The type of relationship (e.g., &quot;SAME_SECTOR&quot;).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>strength</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>number</computeroutput>   </para>
</entry><entry thead="no"><para>The strength of the relationship, typically a value between 0 and 1.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>](), [frontend/**tests**/test-utils.test.ts](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>]()</para>
</sect4>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1403">
<title>Frontend Implementation</title><para>The frontend uses a React component, <computeroutput>NetworkVisualization.tsx</computeroutput>, to render the 3D graph. This component fetches data from the <computeroutput>/api/visualization</computeroutput> endpoint and uses <computeroutput>react-plotly.js</computeroutput> to create the interactive visualization.</para>
<para>Sources: [frontend/app/components/NetworkVisualization.tsx](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1404">
<title>Component: <computeroutput>NetworkVisualization.tsx</computeroutput></title><para>This component is responsible for:</para>
<para><orderedlist>
<listitem><para>Receiving the <computeroutput>nodes</computeroutput> and <computeroutput>edges</computeroutput> data as props.</para>
</listitem><listitem><para>Processing this data into a format compatible with Plotly.</para>
</listitem><listitem><para>Configuring the layout and appearance of the 3D graph.</para>
</listitem><listitem><para>Handling loading and empty states.</para>
</listitem></orderedlist>
</para>
<para>The component&apos;s logic involves mapping the <computeroutput>nodes</computeroutput> array to Plotly&apos;s <computeroutput>scatter3d</computeroutput> trace for the assets and mapping the <computeroutput>edges</computeroutput> array to another <computeroutput>scatter3d</computeroutput> trace for the relationship lines.</para>
<para>The component&apos;s rendering logic is validated by unit tests that check for correct processing of node/edge data and proper Plotly configuration.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>NetworkVisualization.tsx</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[Props:<sp/>{data:<sp/>{nodes,<sp/>edges}}]<sp/>--&gt;<sp/>B{Process<sp/>Data};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[Create<sp/>Node<sp/>Trace<sp/>(scatter3d)];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>D[Create<sp/>Edge<sp/>Trace<sp/>(scatter3d)];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>E[Plotly<sp/>Chart];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E[Plotly<sp/>Chart];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F[Render<sp/>Interactive<sp/>3D<sp/>Graph];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
</programlisting></para>
<para>Sources: [frontend/app/components/NetworkVisualization.tsx](), [frontend/**tests**/components/NetworkVisualization.test.tsx]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1405">
<title>Visualization Libraries</title><para>The frontend relies on two key libraries for rendering:</para>
<para><itemizedlist>
<listitem><para><bold><computeroutput>plotly.js</computeroutput></bold>: The core JavaScript charting library that provides the 3D graphing capabilities.</para>
</listitem><listitem><para><bold><computeroutput>react-plotly.js</computeroutput></bold>: A React wrapper for <computeroutput>plotly.js</computeroutput> that simplifies its integration into React components.</para>
</listitem></itemizedlist>
</para>
<para>These dependencies are declared in <computeroutput>frontend/package.json</computeroutput>.</para>
<para>Sources: [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>](), [frontend/**tests**/config/package-validation.test.ts]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1406">
<title>Conclusion</title><para>The 3D Network Visualization feature is a well-architected, full-stack implementation that serves as the centerpiece of the application. It effectively separates backend data processing from frontend rendering, using a clean REST API for communication. The use of Plotly on both ends ensures powerful visualization capabilities, while the deterministic layout on the backend provides analytical consistency. The entire feature is designed to be interactive, informative, and extensible for future analytical needs.</para>
<para>Sources: [README.md](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1407">
<title>Feature: Asset Relationship Engine</title><para><details><summary>Relevant source files</summary><para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/logic/asset_graph.py">src/logic/asset_graph.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/INTEGRATION_SUMMARY.md">INTEGRATION_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AI_RULES.md">AI_RULES.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AUDIT_REPORT.md">AUDIT_REPORT.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1408">
<title>Feature: Asset Relationship Engine</title><para>The Asset Relationship Engine is the core business logic component of the Financial Asset Relationship Database. Its primary purpose is to automatically discover, quantify, and represent the complex relationships between various financial assets. The engine is encapsulated within the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> class, which serves as the central brain for processing financial data models and generating outputs for visualization and analysis.</para>
<para>This engine powers both the original Gradio user interface and the modern Next.js frontend (via a FastAPI backend). It ingests asset data, builds a network graph of their interconnections, calculates key performance metrics, and prepares data structures for 3D visualization. The entire system is designed to be deterministic, ensuring consistent graph layouts and analysis results.</para>
<para>Sources: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>](), [README.md:60-61](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:28-36]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1409">
<title>Core Architecture</title><para>The Asset Relationship Engine sits at the heart of the application, acting as a bridge between the data layer and the presentation (UI) layers. It consumes financial data models and is, in turn, called by the API/UI layers to provide processed graph data and analytics.</para>
<para>The diagram below illustrates the engine&apos;s central position within the system architecture.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Data_Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[Financial<sp/>Models<sp/>&lt;br&gt;<sp/>src/models/financial_models.py]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B[Data<sp/>Sources<sp/>&lt;br&gt;<sp/>src/data/]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Core_Business_Logic</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C[AssetRelationshipGraph<sp/>&lt;br&gt;<sp/>&lt;b&gt;(The<sp/>Engine)&lt;/b&gt;<sp/>&lt;br&gt;<sp/>src/logic/asset_graph.py]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>API_Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D[FastAPI<sp/>Backend<sp/>&lt;br&gt;<sp/>api/main.py]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>UI_Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E[Next.js<sp/>UI]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>F[Gradio<sp/>UI<sp/>&lt;br&gt;<sp/>app.py]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>C</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>F</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E</highlight></codeline>
</programlisting></para>
<para><emphasis>This diagram shows the data flow from data sources and models into the Asset Relationship Engine, which then serves both the FastAPI backend and the Gradio UI.</emphasis></para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:5-75](), [README.md:58-65]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1410">
<title>Data Models</title><para>The engine operates on a set of well-defined data structures defined in <computeroutput><ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref></computeroutput>. The fundamental building block is the <computeroutput>Asset</computeroutput> dataclass, which is inherited by specific asset types.</para>
<para>Sources: [README.md:60](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:15-17]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1411">
<title>Asset Class Hierarchy</title><para>The engine processes different classes of assets, each with its own specific attributes. The main supported classes are <computeroutput>Equity</computeroutput>, <computeroutput>Bond</computeroutput>, <computeroutput>Commodity</computeroutput>, and <computeroutput>Currency</computeroutput>.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>direction<sp/>LR</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Asset<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+id:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+symbol:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+name:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+asset_class:<sp/>AssetClass</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+price:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Equity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+sector:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+pe_ratio:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Bond<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+issuer:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+yield:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Commodity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+unit:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Currency<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+country:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Equity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Bond</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Commodity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Currency</highlight></codeline>
</programlisting></para>
<para><emphasis>This diagram shows the inheritance structure of the financial data models.</emphasis></para>
<para>Sources: [README.md:40-45](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:15-17](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:183]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1412">
<title>Relationship Discovery</title><para>The core function of the engine is to automatically discover relationships between assets. This is handled by the <computeroutput>build_relationships()</computeroutput> method, which iterates through all unique pairs of assets and calls <computeroutput>_find_relationships()</computeroutput> to identify specific connections.</para>
<para>Sources: [README.md:82-83](), [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1413">
<title>Discovery Process</title><para>The following flowchart outlines the logic for building the relationship graph.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>start[Start<sp/>build_relationships()]<sp/>--&gt;<sp/>A{Iterate<sp/>all<sp/>asset<sp/>pairs<sp/>(asset1,<sp/>asset2)}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>B[Call<sp/>_find_relationships(asset1,<sp/>asset2)]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C{Check<sp/>for<sp/>relationship<sp/>types}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--<sp/>Same<sp/>Sector<sp/>--&gt;<sp/>D[Create<sp/>&apos;same_sector&apos;<sp/>relationship]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--<sp/>Corporate<sp/>Bond<sp/>--&gt;<sp/>E[Create<sp/>&apos;corporate_bond_to_equity&apos;<sp/>relationship]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--<sp/>Other<sp/>types...<sp/>--&gt;<sp/>F[...]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>G[Add<sp/>relationship<sp/>to<sp/>graph]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>G</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>A</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--<sp/>Loop<sp/>finished<sp/>--&gt;<sp/>stop[End]</highlight></codeline>
</programlisting></para>
<para><emphasis>This flowchart shows the process of iterating through assets to find and add relationships to the graph.</emphasis></para>
<para>Sources: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>](), [README.md:82-83]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1414">
<title>Relationship Types</title><para>The engine can identify several types of relationships, each with a predefined strength score.</para>
<para><table rows="7" cols="4"><row>
<entry thead="yes"><para>Relationship Type   </para>
</entry><entry thead="yes"><para>Condition   </para>
</entry><entry thead="yes"><para>Default Strength   </para>
</entry><entry thead="yes"><para>Source File    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>same_sector</computeroutput>   </para>
</entry><entry thead="no"><para>Two equities are in the same industry sector.   </para>
</entry><entry thead="no"><para>0.7   </para>
</entry><entry thead="no"><para><computeroutput>README.md:48</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>corporate_bond_to_equity</computeroutput>   </para>
</entry><entry thead="no"><para>A bond is issued by the same company as an equity.   </para>
</entry><entry thead="no"><para>0.9   </para>
</entry><entry thead="no"><para><computeroutput>README.md:49</computeroutput>, <computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:31</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>commodity_exposure</computeroutput>   </para>
</entry><entry thead="no"><para>An equity company is exposed to commodity prices.   </para>
</entry><entry thead="no"><para>Varies   </para>
</entry><entry thead="no"><para><computeroutput>README.md:50</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>currency_risk</computeroutput>   </para>
</entry><entry thead="no"><para>An asset has exposure to foreign exchange risk.   </para>
</entry><entry thead="no"><para>0.8   </para>
</entry><entry thead="no"><para><computeroutput>README.md:51</computeroutput>, <computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:30</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>income_comparison</computeroutput>   </para>
</entry><entry thead="no"><para>Comparing an equity&apos;s dividend yield to a bond&apos;s yield.   </para>
</entry><entry thead="no"><para>Varies   </para>
</entry><entry thead="no"><para><computeroutput>README.md:52</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>event_impact</computeroutput>   </para>
</entry><entry thead="no"><para>A regulatory event affects multiple assets.   </para>
</entry><entry thead="no"><para>Varies   </para>
</entry><entry thead="no"><para><computeroutput>README.md:53</computeroutput>   </para>
</entry></row>
</table>
</para>
<para>Sources: [README.md:47-54](), [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:28-32]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1415">
<title>Analytics and Metrics</title><para>The engine provides analytical capabilities through the <computeroutput>calculate_metrics()</computeroutput> method. This function computes various network statistics that offer insights into the structure and density of the asset relationship graph.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1416">
<title>Calculated Metrics</title><para><table rows="7" cols="2"><row>
<entry thead="yes"><para>Metric   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>total_assets</computeroutput>   </para>
</entry><entry thead="no"><para>The total number of assets (nodes) in the graph.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>total_relationships</computeroutput>   </para>
</entry><entry thead="no"><para>The total number of connections (edges) in the graph.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>network_density</computeroutput>   </para>
</entry><entry thead="no"><para>A measure of how interconnected the assets are, on a scale from 0 to 1.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>avg_degree</computeroutput>   </para>
</entry><entry thead="no"><para>The average number of relationships per asset.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>max_degree</computeroutput>   </para>
</entry><entry thead="no"><para>The highest number of relationships held by a single asset.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>asset_classes</computeroutput>   </para>
</entry><entry thead="no"><para>A dictionary counting the number of assets in each class (e.g., Equity, Bond).   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>](), [<ref refid="TEST__SUMMARY_8md" kindref="compound">TEST_SUMMARY.md</ref>:48](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:22]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1417">
<title>Visualization Data Generation</title><para>A key feature of the engine is its ability to generate data formatted for 3D visualization with Plotly. The <computeroutput>get_3d_visualization_data()</computeroutput> method produces a dictionary containing lists of nodes and edges with positional and styling information.</para>
<para><itemizedlist>
<listitem><para><bold>Deterministic Layout</bold>: The 3D positions of the assets are calculated using a fixed random seed (<computeroutput>seed=42</computeroutput>) to ensure the visualization is consistent and reproducible across sessions.</para>
</listitem><listitem><para><bold>Node Sizing and Coloring</bold>: Nodes are colored based on their <computeroutput>AssetClass</computeroutput> and sized based on their importance or connectivity within the graph.</para>
</listitem><listitem><para><bold>Edge Styling</bold>: Edges can be styled based on relationship <computeroutput>strength</computeroutput>.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [README.md:70, 81](), [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1418">
<title>API Exposure</title><para>The engine&apos;s functionalities are exposed to the Next.js frontend via a REST API built with FastAPI. The API endpoints in <computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput> instantiate and interact with the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> to serve data to the client.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1419">
<title>API Interaction Flow</title><para>This sequence diagram shows how a frontend request for visualization data is processed.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>User<sp/>as<sp/>&quot;Next.js<sp/>UI&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>API<sp/>as<sp/>&quot;FastAPI<sp/>Backend&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Engine<sp/>as<sp/>&quot;AssetRelationshipGraph&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User-&gt;&gt;API:<sp/>GET<sp/>/api/visualization</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>API</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>API-&gt;&gt;Engine:<sp/>get_graph()<sp/>(singleton)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Engine</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Engine--&gt;&gt;API:<sp/>Graph<sp/>instance</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Engine</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>API-&gt;&gt;Engine:<sp/>get_3d_visualization_data()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Engine</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Engine--&gt;&gt;API:<sp/>{nodes:<sp/>[...],<sp/>edges:<sp/>[...]}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Engine</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>API--&gt;&gt;User:<sp/>JSON<sp/>Response</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>API</highlight></codeline>
</programlisting></para>
<para><emphasis>This diagram shows the sequence of calls from the UI to the API and finally to the Asset Relationship Engine to fetch visualization data.</emphasis></para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:80-97](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:15-23]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1420">
<title>Key API Endpoints</title><para>The following endpoints directly leverage the Asset Relationship Engine:</para>
<para><table rows="5" cols="3"><row>
<entry thead="yes"><para>Endpoint   </para>
</entry><entry thead="yes"><para>Method   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>/api/assets</computeroutput>   </para>
</entry><entry thead="no"><para>GET   </para>
</entry><entry thead="no"><para>Lists all assets from the graph.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>/api/relationships</computeroutput>   </para>
</entry><entry thead="no"><para>GET   </para>
</entry><entry thead="no"><para>Returns all discovered relationships.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>/api/metrics</computeroutput>   </para>
</entry><entry thead="no"><para>GET   </para>
</entry><entry thead="no"><para>Calculates and returns network metrics.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>/api/visualization</computeroutput>   </para>
</entry><entry thead="no"><para>GET   </para>
</entry><entry thead="no"><para>Generates and returns data for the 3D graph.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:15-23](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:43-51]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1421">
<title>Summary</title><para>The Asset Relationship Engine is the foundational component that enables the project&apos;s core value proposition. By encapsulating the logic for asset modeling, relationship discovery, analytics, and visualization data preparation, it provides a powerful and reusable service for multiple frontends. Its deterministic nature and clear separation from the UI and data layers make it a robust and central piece of the system architecture.</para>
<para>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:20-27](), [README.md:58-61]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1422">
<title>Feature: Supported Asset Classes</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/models/financial_models.py">src/models/financial_models.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/data/sample_data.py">src/data/sample_data.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CHANGELOG.md">CHANGELOG.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AI_RULES.md">AI_RULES.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/logic/asset_graph.py">src/logic/asset_graph.py</ulink></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1423">
<title>Feature: Supported Asset Classes</title><para>The Financial Asset Relationship Database is designed to model and visualize connections between a variety of financial instruments. The system supports five primary asset classes: Equities, Bonds, Commodities, Currencies, and Regulatory Events. This structured approach allows for cross-asset analysis and automatic discovery of relationships.</para>
<para>The core of this feature is a well-defined data model using Python&apos;s <computeroutput>dataclasses</computeroutput> and <computeroutput>enum</computeroutput> modules. A base <computeroutput>Asset</computeroutput> class provides common attributes, and specific subclasses extend it with fields relevant to each asset type. This object-oriented hierarchy is fundamental to the system&apos;s architecture, enabling consistent handling and analysis across different financial instruments.</para>
<para><emphasis>Sources: [README.md:31-37](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:14-16](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:83-89]()</emphasis></para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1424">
<title>Core Data Model</title><para>The foundation of the asset representation is built upon a base <computeroutput>Asset</computeroutput> dataclass and an <computeroutput>AssetClass</computeroutput> enumeration to categorize each instrument.</para>
<para><emphasis>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1425">
<title>AssetClass Enum</title><para>The <computeroutput>AssetClass</computeroutput> enum provides a controlled vocabulary for classifying assets. This ensures type safety and consistency throughout the application, from data creation to visualization.</para>
<para><emphasis>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>:11-19](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:34-35]()</emphasis></para>
<para><table rows="6" cols="2"><row>
<entry thead="yes"><para>Member   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>EQUITY</computeroutput>   </para>
</entry><entry thead="no"><para>Represents stocks or shares in a company.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>BOND</computeroutput>   </para>
</entry><entry thead="no"><para>Represents fixed-income instruments.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>COMMODITY</computeroutput>   </para>
</entry><entry thead="no"><para>Represents raw materials or primary agricultural products.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>CURRENCY</computeroutput>   </para>
</entry><entry thead="no"><para>Represents foreign exchange pairs.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>REGULATORY_EVENT</computeroutput>   </para>
</entry><entry thead="no"><para>Represents corporate or regulatory events affecting assets.   </para>
</entry></row>
</table>
</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1426">
<title>Asset Class Hierarchy</title><para>All specific asset models inherit from a common <computeroutput>Asset</computeroutput> base class. This design ensures that all assets share a fundamental set of properties, while allowing for specialized attributes in subclasses. The diagram below illustrates this inheritance structure.</para>
<para><emphasis>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>:22-101](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:83-89]()</emphasis></para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>direction<sp/>LR</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Asset<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;Abstract&gt;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>id</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>symbol</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+AssetClass<sp/>asset_class</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>sector</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>currency</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>price</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>market_cap</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+dict<sp/>additional_fields</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+__post_init__()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Equity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>pe_ratio</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>dividend_yield</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>eps</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Bond<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>yield_</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>duration</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>credit_rating</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Commodity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>futures_contract_specs</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>spot_price</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Currency<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>country</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>interest_rate</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>central_bank</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>RegulatoryEvent<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+RegulatoryActivity<sp/>activity_type</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+date<sp/>event_date</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>impact_score</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>description</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Equity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Bond</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Commodity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Currency</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>RegulatoryEvent</highlight></codeline>
</programlisting></para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1427">
<title>Base Asset Model</title><para>The <computeroutput>Asset</computeroutput> dataclass defines the common attributes shared by all financial instruments in the system. It includes validation in its <computeroutput>__post_init__</computeroutput> method to ensure data integrity, such as checking for non-negative prices.</para>
<para><emphasis>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>:22-47](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:21-23]()</emphasis></para>
<para><table rows="10" cols="4"><row>
<entry thead="yes"><para>Attribute   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Constraints    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>id</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>A unique identifier for the asset.   </para>
</entry><entry thead="no"><para></para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>symbol</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The ticker symbol or other short identifier.   </para>
</entry><entry thead="no"><para></para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>name</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The full name of the asset.   </para>
</entry><entry thead="no"><para></para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>asset_class</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>AssetClass</computeroutput>   </para>
</entry><entry thead="no"><para>The type of the asset, from the <computeroutput>AssetClass</computeroutput> enum.   </para>
</entry><entry thead="no"><para></para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>sector</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The industry sector the asset belongs to.   </para>
</entry><entry thead="no"><para></para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>currency</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The currency of the asset&apos;s price (3-letter ISO code).   </para>
</entry><entry thead="no"><para>Must be 3 uppercase letters.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>price</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>The current market price of the asset.   </para>
</entry><entry thead="no"><para>Must be non-negative.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>market_cap</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>The total market capitalization.   </para>
</entry><entry thead="no"><para></para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>additional_fields</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>dict</computeroutput>   </para>
</entry><entry thead="no"><para>A dictionary for any extra, non-standard data.   </para>
</entry><entry thead="no"><para></para>
</entry></row>
</table>
</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1428">
<title>Detailed Asset Classes</title><para>The system supports five specialized asset classes, each inheriting from the base <computeroutput>Asset</computeroutput> model and adding its own unique attributes. These were introduced in version 1.0.0 of the project.</para>
<para><emphasis>Sources: [<ref refid="CHANGELOG_8md" kindref="compound">CHANGELOG.md</ref>:52-56](), [README.md:32-37]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1429">
<title>Equities</title><para>Represents ownership stakes in a public company. The <computeroutput>Equity</computeroutput> class adds standard financial metrics used for stock valuation.</para>
<para><emphasis>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>:50-57]()</emphasis></para>
<para><table rows="4" cols="3"><row>
<entry thead="yes"><para>Attribute   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>pe_ratio</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>Price-to-Earnings ratio.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>dividend_yield</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>The ratio of the annual dividend to the share price.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>eps</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>Earnings Per Share.   </para>
</entry></row>
</table>
</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1430">
<title>Fixed Income (Bonds)</title><para>Represents debt instruments. The <computeroutput>Bond</computeroutput> class includes attributes related to yield and credit risk.</para>
<para><emphasis>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>:60-67]()</emphasis></para>
<para><table rows="4" cols="3"><row>
<entry thead="yes"><para>Attribute   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>yield_</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>The yield to maturity of the bond.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>duration</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>A measure of the bond&apos;s interest rate sensitivity.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>credit_rating</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The credit rating from an agency (e.g., AAA, BB+).   </para>
</entry></row>
</table>
</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1431">
<title>Commodities</title><para>Represents physical goods or raw materials. The <computeroutput>Commodity</computeroutput> class includes details about futures contracts and spot pricing.</para>
<para><emphasis>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>:70-75]()</emphasis></para>
<para><table rows="3" cols="3"><row>
<entry thead="yes"><para>Attribute   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>futures_contract_specs</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>Specifications for the futures contract.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>spot_price</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>The current market price for immediate delivery.   </para>
</entry></row>
</table>
</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1432">
<title>Currencies</title><para>Represents foreign exchange instruments. The <computeroutput>Currency</computeroutput> class adds macroeconomic indicators relevant to a currency&apos;s value.</para>
<para><emphasis>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>:78-84]()</emphasis></para>
<para><table rows="4" cols="3"><row>
<entry thead="yes"><para>Attribute   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>country</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The primary country associated with the currency.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>interest_rate</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>The central bank&apos;s benchmark interest rate.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>central_bank</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The name of the central bank issuing the currency.   </para>
</entry></row>
</table>
</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1433">
<title>Regulatory Events</title><para>Represents significant events that can impact other assets. The <computeroutput>RegulatoryEvent</computeroutput> model includes an impact score and a type classification.</para>
<para><emphasis>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>:87-101]()</emphasis></para>
<para><table rows="5" cols="4"><row>
<entry thead="yes"><para>Attribute   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Constraints    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>activity_type</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>RegulatoryActivity</computeroutput>   </para>
</entry><entry thead="no"><para>The type of event (e.g., Earnings, M&amp;A).   </para>
</entry><entry thead="no"><para></para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>event_date</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>date</computeroutput>   </para>
</entry><entry thead="no"><para>The date the event occurred.   </para>
</entry><entry thead="no"><para>Must be a valid ISO 8601 date.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>impact_score</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>A score from -1.0 (negative) to 1.0 (positive).   </para>
</entry><entry thead="no"><para>Must be within [-1.0, 1.0].    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>description</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>A brief description of the event.   </para>
</entry><entry thead="no"><para></para>
</entry></row>
</table>
</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1434">
<title>Extensibility</title><para>The system is designed to be extensible, allowing for the addition of new asset types. To add a new asset class, a developer can create a new dataclass that inherits from the base <computeroutput>Asset</computeroutput> class. This pattern is encouraged for future expansion.</para>
<para>The example below, taken from the project&apos;s documentation, shows how a <computeroutput>Derivative</computeroutput> asset could be added.</para>
<para><emphasis>Sources: [README.md:73-84]()</emphasis></para>
<para><programlisting filename=".py"><codeline><highlight class="keyword">from</highlight><highlight class="normal"><sp/>src.models.financial_models<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Asset,<sp/>AssetClass</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">#<sp/>Extend<sp/>Asset<sp/>for<sp/>new<sp/>types</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">@dataclass</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">Derivative(Asset):</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>underlying_asset:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>expiration_date:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>strike_price:<sp/>Optional[float]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight></codeline>
</programlisting></para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1435">
<title>Conclusion</title><para>The project&apos;s support for diverse asset classes is built on a robust and extensible object-oriented data model. By using a common base class and specialized subclasses, the system can consistently manage, analyze, and visualize a wide range of financial instruments and the complex relationships between them. This structured approach is central to the application&apos;s ability to provide meaningful cross-asset insights.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1436">
<title>Feature: Metrics and Analytics</title><para><details><summary>Relevant source files</summary><para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/visualizations/metric_visuals.py">src/visualizations/metric_visuals.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/app/components/MetricsDashboard.tsx">frontend/app/components/MetricsDashboard.tsx</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/logic/asset_graph.py">src/logic/asset_graph.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/TESTING_GUIDE.md">TESTING_GUIDE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/IMPROVEMENTS.md">IMPROVEMENTS.md</ulink></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1437">
<title>Feature: Metrics and Analytics</title><para>The Metrics and Analytics feature provides a quantitative overview of the financial asset network&apos;s structure and complexity. It calculates key statistical metrics from the underlying graph data and presents them through two distinct user interfaces: a modern Next.js dashboard and the original Gradio UI. This functionality is crucial for users to quickly assess the density, composition, and overall scale of the interconnected assets.</para>
<para>The system is designed to provide real-time metrics that are recalculated whenever the asset graph is updated, ensuring that the analytics always reflect the current state of the data. This feature is central to the project&apos;s goal of offering comprehensive analysis of asset relationships.</para>
<para>Sources: [README.md](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1438">
<title>Architecture and Data Flow</title><para>The metrics and analytics functionality spans from the core business logic layer, through the API, to the user interface. The <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> class is the single source of truth for all metric calculations. This data is then exposed via a FastAPI endpoint to the Next.js frontend or consumed directly by the Gradio UI.</para>
<para>This diagram illustrates the data flow for the metrics feature across both frontend implementations.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Core<sp/>Logic</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[src/logic/asset_graph.py]<sp/>--&gt;|calculate_metrics()|<sp/>B(Metrics<sp/>Dictionary)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>API<sp/>and<sp/>Frontend</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subgraph<sp/>Gradio<sp/>UI</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B<sp/>--&gt;|Direct<sp/>Call|<sp/>C[src/visualizations/metric_visuals.py]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D[Plotly<sp/>Gauge<sp/>&amp;<sp/>Pie<sp/>Charts]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E[Gradio<sp/>Dashboard]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subgraph<sp/>Next.js<sp/>UI</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B<sp/>--&gt;|FastAPI<sp/>Endpoint|<sp/>F(GET<sp/>/api/metrics)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>F<sp/>--&gt;|Axios<sp/>Request|<sp/>G[frontend/app/lib/api.ts]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>H[frontend/app/components/MetricsDashboard.tsx]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>H<sp/>--&gt;<sp/>I[React<sp/>Component<sp/>Rendering]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1439">
<title>Backend: Metric Calculation</title><para>All network metrics are computed within the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> class, specifically in the <computeroutput>calculate_metrics</computeroutput> method. This method aggregates data about the nodes (assets) and edges (relationships) to produce a dictionary of key statistics.</para>
<para>Sources: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>](), [README.md]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1440">
<title>Core Method: <computeroutput>calculate_metrics</computeroutput></title><para>This method is responsible for calculating all network statistics. It raises a <computeroutput>ValueError</computeroutput> if the graph is empty.</para>
<para>The following table details the metrics calculated by this method.</para>
<para><table rows="4" cols="3"><row>
<entry thead="yes" align='left'><para>Metric Key   </para>
</entry><entry thead="yes" align='left'><para>Description   </para>
</entry><entry thead="yes" align='left'><para>Calculation Logic    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>total_assets</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The total number of assets (nodes) in the graph.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>len(self.assets)</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>total_relationships</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The total number of relationships (edges) in the graph.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>len(self.relationships)</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>average_relationship_strength</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The mean strength of all relationships, clamped between 0 and 1.   </para>
</entry><entry thead="no" align='left'><para><lsquo/>np.mean([r[&apos;strength<rsquo/>] for r in self.relationships])<computeroutput>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowEven&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>network_density<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; A measure of how interconnected the graph is. A value of 1 means all possible connections exist. \ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>(2 * num_relationships) / (num_assets * (num_assets - 1))<computeroutput>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowOdd&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>asset_classes<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; A breakdown of assets by their class (e.g., Equity, Bond). \ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Counts assets for each</computeroutput>AssetClass<computeroutput>enum member. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowEven&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>average_degree<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; The average number of connections per asset. \ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>(2 * num_relationships) / num_assets<computeroutput>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowOdd&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>max_degree<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; The highest number of connections for any single asset in the network. \ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>max(degrees)<computeroutput>where</computeroutput>degrees` is a list of connection counts per asset.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>:218-268](), [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1441">
<title>API Layer: Exposing Metrics</title><para>The calculated metrics are exposed to the Next.js frontend via a dedicated REST API endpoint managed by FastAPI.</para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1442">
<title>Endpoint: <computeroutput>GET /api/metrics</computeroutput></title><para>This endpoint retrieves the calculated metrics from the singleton <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> instance and returns them as a JSON object.</para>
<para>The data flow for a frontend request is as follows:</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>User<sp/>as<sp/>&quot;User<sp/>Interface&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>NextApp<sp/>as<sp/>&quot;Next.js<sp/>Frontend&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>API<sp/>as<sp/>&quot;FastAPI<sp/>Backend&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Graph<sp/>as<sp/>&quot;AssetRelationshipGraph&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User-&gt;&gt;NextApp:<sp/>Loads<sp/>Metrics<sp/>Dashboard</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>NextApp-&gt;&gt;API:<sp/>GET<sp/>/api/metrics</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>API</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>API-&gt;&gt;Graph:<sp/>get_graph()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Graph--&gt;&gt;API:<sp/>Singleton<sp/>instance</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>API-&gt;&gt;Graph:<sp/>calculate_metrics()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Graph--&gt;&gt;API:<sp/>Metrics<sp/>Dictionary</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>API--&gt;&gt;NextApp:<sp/>200<sp/>OK<sp/>(JSON<sp/>Response)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>API</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>NextApp--&gt;&gt;User:<sp/>Renders<sp/>Metric<sp/>Cards</highlight></codeline>
</programlisting></para>
<para>This sequence shows the Next.js application fetching metrics from the FastAPI backend, which in turn calls the core logic to perform the calculation.</para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1443">
<title>Data Model: <computeroutput>MetricsResponse</computeroutput></title><para>The API response is validated using a Pydantic model to ensure type safety and consistency.</para>
<para><table rows="8" cols="3"><row>
<entry thead="yes" align='left'><para>Field   </para>
</entry><entry thead="yes" align='left'><para>Type   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>total_assets</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>int</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Total number of assets.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>total_relationships</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>int</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Total number of relationships.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>average_relationship_strength</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Average strength of relationships.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>network_density</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Density of the network graph.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>asset_classes</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>Dict[str, int]</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Count of assets per class.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>average_degree</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Average connections per asset.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>max_degree</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>int</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Maximum connections for a single asset.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>](), [<ref refid="TEST__SUMMARY_8md" kindref="compound">TEST_SUMMARY.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1444">
<title>Frontend: Displaying Metrics</title><para>The project provides two different UIs for displaying the calculated metrics, each with its own implementation.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1445">
<title>Next.js Metrics Dashboard</title><para>The Next.js frontend features a <computeroutput>MetricsDashboard</computeroutput> React component that fetches data from the <computeroutput>/api/metrics</computeroutput> endpoint and displays it in a series of cards.</para>
<para>Sources: [frontend/app/components/MetricsDashboard.tsx](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>]()</para>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1446">
<title>Component: <computeroutput>MetricsDashboard.tsx</computeroutput></title><para>This component is responsible for:</para>
<para><orderedlist>
<listitem><para>Receiving metrics data as props.</para>
</listitem><listitem><para>Rendering individual &quot;metric cards&quot; for each key statistic.</para>
</listitem><listitem><para>Formatting numerical data for readability (e.g., percentages, large numbers).</para>
</listitem><listitem><para>Displaying the asset class breakdown.</para>
</listitem></orderedlist>
</para>
<para>Key features of the component include:</para>
<para><itemizedlist>
<listitem><para><bold>Data Formatting</bold>: Values like <computeroutput>network_density</computeroutput> are formatted as percentages.</para>
</listitem><listitem><para><bold>Edge Case Handling</bold>: Correctly displays <computeroutput>0</computeroutput> for metrics when the data is empty or null, preventing <computeroutput>NaN</computeroutput> errors.</para>
</listitem><listitem><para><bold>Visual Consistency</bold>: Ensures a uniform look and feel for all displayed metrics.</para>
</listitem></itemizedlist>
</para>
<para>The following metrics are displayed on the dashboard:</para>
<para><table rows="7" cols="3"><row>
<entry thead="yes" align='left'><para>Metric Displayed   </para>
</entry><entry thead="yes" align='left'><para>Data Source   </para>
</entry><entry thead="yes" align='left'><para>Formatting    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>Total Assets   </para>
</entry><entry thead="no" align='left'><para><computeroutput>metrics.total_assets</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Raw integer    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>Total Relationships   </para>
</entry><entry thead="no" align='left'><para><computeroutput>metrics.total_relationships</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Raw integer    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>Network Density   </para>
</entry><entry thead="no" align='left'><para><computeroutput>metrics.network_density</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Percentage (2 decimal places)    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>Average Degree   </para>
</entry><entry thead="no" align='left'><para><computeroutput>metrics.average_degree</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Number (2 decimal places)    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>Max Degree   </para>
</entry><entry thead="no" align='left'><para><computeroutput>metrics.max_degree</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Raw integer    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>Asset Classes   </para>
</entry><entry thead="no" align='left'><para><computeroutput>metrics.asset_classes</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>List of class names and counts   </para>
</entry></row>
</table>
</para>
<para>Sources: [frontend/app/components/MetricsDashboard.tsx:11-80](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>]()</para>
</sect4>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1447">
<title>Gradio Metrics Dashboard</title><para>The original Gradio UI uses Plotly to create a more visual representation of the metrics, including gauge and pie charts.</para>
<para>Sources: [<ref refid="metric__visuals_8py" kindref="compound">src/visualizations/metric_visuals.py</ref>]()</para>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1448">
<title>Functions</title><para><itemizedlist>
<listitem><para><bold><computeroutput>create_metrics_dashboard(metrics)</computeroutput></bold>: The main function that orchestrates the creation of the entire dashboard layout in Gradio. It calls other helper functions to generate individual plots.</para>
</listitem><listitem><para><bold><computeroutput>create_gauge_chart(value, title, reference)</computeroutput></bold>: Generates a Plotly gauge chart, used for displaying metrics like &quot;Network Density&quot; and &quot;Avg. Relationship Strength&quot;.</para>
</listitem><listitem><para><bold><computeroutput>create_asset_class_pie_chart(asset_classes)</computeroutput></bold>: Creates a Plotly pie chart to visualize the distribution of different asset classes.</para>
</listitem></itemizedlist>
</para>
<para>The Gradio dashboard provides a different visual take on the same underlying data, emphasizing visual indicators over raw numbers for some metrics.</para>
<para>Sources: [<ref refid="metric__visuals_8py" kindref="compound">src/visualizations/metric_visuals.py</ref>:11-103]()</para>
</sect4>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1449">
<title>Summary</title><para>The Metrics and Analytics feature is a cornerstone of the application, providing essential insights into the structure of the financial asset graph. By centralizing the calculation logic in <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> and offering flexible display options through both a modern Next.js/FastAPI stack and a classic Gradio interface, the system ensures data consistency while catering to different presentation needs. The clear separation of concernsâ€”from calculation to API exposure to frontend renderingâ€”makes the feature robust, testable, and extensible.</para>
<para>Sources: [README.md](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1450">
<title>Feature: Regulatory Event Integration</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/models/financial_models.py">src/models/financial_models.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/logic/asset_graph.py">src/logic/asset_graph.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AUDIT_REPORT.md">AUDIT_REPORT.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AI_RULES.md">AI_RULES.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CHANGELOG.md">CHANGELOG.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1451">
<title>Feature: Regulatory Event Integration</title><para>The Regulatory Event Integration feature allows the system to model the impact of corporate and regulatory activities, such as SEC filings or M&amp;A announcements, on financial assets. This is achieved by representing these events as distinct nodes within the asset relationship graph. These event nodes create directional relationships with the assets they affect, with the relationship&apos;s strength determined by a predefined impact score. This adds a layer of qualitative, event-driven analysis to the quantitative market data.</para>
<para>Sources: [README.md](), [<ref refid="CHANGELOG_8md" kindref="compound">CHANGELOG.md</ref>](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1452">
<title>Data Models for Regulatory Events</title><para>The feature is built upon two primary data structures defined in the <computeroutput><ref refid="financial__models_8py" kindref="compound">financial_models.py</ref></computeroutput> module: the <computeroutput>RegulatoryActivity</computeroutput> enum and the <computeroutput>RegulatoryEvent</computeroutput> dataclass.</para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1453">
<title>RegulatoryActivity Enum</title><para>This enumeration defines the types of regulatory activities that can be modeled. It provides a fixed set of choices for categorizing events.</para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1454">
<title>RegulatoryEvent Dataclass</title><para>The <computeroutput>RegulatoryEvent</computeroutput> is a specialized type of <computeroutput>Asset</computeroutput> that encapsulates all information about a specific event. It includes a list of impacted asset symbols and an <computeroutput>impact_score</computeroutput> to quantify the event&apos;s effect.</para>
<para>The diagram below shows the structure of the <computeroutput>RegulatoryEvent</computeroutput> class and its relation to the base <computeroutput>Asset</computeroutput> class and <computeroutput>RegulatoryActivity</computeroutput> enum.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>direction<sp/>LR</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Asset<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>id</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>symbol</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+AssetClass<sp/>asset_class</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>RegulatoryEvent<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>date</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+RegulatoryActivity<sp/>activity_type</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+list[str]<sp/>impacted_symbols</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>impact_score</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>description</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+__post_init__()<sp/>void</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>RegulatoryActivity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;enumeration&gt;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>EARNINGS_RELEASE</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SEC_FILING</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MERGER_ACQUISITION</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PRODUCT_LAUNCH</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LEGAL_RULING</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>RegulatoryEvent</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>RegulatoryEvent<sp/>o--<sp/>RegulatoryActivity</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>]()</para>
<para>The fields of the <computeroutput>RegulatoryEvent</computeroutput> dataclass are detailed in the table below.</para>
<para><table rows="8" cols="4"><row>
<entry thead="yes"><para>Field   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Constraints    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>id</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>Unique identifier for the event.   </para>
</entry><entry thead="no"><para>Inherited from <computeroutput>Asset</computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>name</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>A descriptive name for the event.   </para>
</entry><entry thead="no"><para>Inherited from <computeroutput>Asset</computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>date</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The date of the event in ISO 8601 format.   </para>
</entry><entry thead="no"><para>Must be a valid ISO 8601 date string.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>activity_type</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>RegulatoryActivity</computeroutput>   </para>
</entry><entry thead="no"><para>The type of regulatory activity (e.g., <computeroutput>EARNINGS_RELEASE</computeroutput>).   </para>
</entry><entry thead="no"><para>Must be a member of the <computeroutput>RegulatoryActivity</computeroutput> enum.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>impacted_symbols</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>List[str]</computeroutput>   </para>
</entry><entry thead="no"><para>A list of asset symbols (e.g., stock tickers) that are affected by this event.   </para>
</entry><entry thead="no"><para>-    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>impact_score</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>A normalized score from -1.0 (negative impact) to +1.0 (positive impact) quantifying the event&apos;s effect.   </para>
</entry><entry thead="no"><para>Must be between -1.0 and 1.0, inclusive.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>description</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>A detailed text description of the event.   </para>
</entry><entry thead="no"><para>-   </para>
</entry></row>
</table>
</para>
<para>The <computeroutput>__post_init__</computeroutput> method in the <computeroutput>RegulatoryEvent</computeroutput> dataclass performs validation to ensure the <computeroutput>impact_score</computeroutput> is within its valid range and that the <computeroutput>date</computeroutput> conforms to the ISO 8601 standard.</para>
<para>Sources: [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1455">
<title>Integration into the Asset Relationship Graph</title><para>Regulatory events are integrated into the graph during the relationship-building phase, which is handled by the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> class. The system identifies assets that are <computeroutput>RegulatoryEvent</computeroutput> instances and creates directional relationships to the assets listed in their <computeroutput>impacted_symbols</computeroutput> field.</para>
<para>Sources: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1456">
<title>Relationship Discovery Logic</title><para>The core logic resides within the <computeroutput>_find_relationships</computeroutput> method of the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput>. The process for handling regulatory events is as follows:</para>
<para><orderedlist>
<listitem><para>The method iterates through all pairs of assets in the graph.</para>
</listitem><listitem><para>It checks if one of the assets in a pair is an instance of <computeroutput>RegulatoryEvent</computeroutput>.</para>
</listitem><listitem><para>If an event is found, the logic iterates through the <computeroutput>impacted_symbols</computeroutput> defined within that event object.</para>
</listitem><listitem><para>For each <computeroutput>impacted_symbol</computeroutput>, it checks if the other asset in the pair has a matching symbol.</para>
</listitem><listitem><para>If a match is found, a new directional relationship of type <computeroutput>event_impact</computeroutput> is created from the event to the impacted asset.</para>
</listitem></orderedlist>
</para>
<para>The following flowchart illustrates this discovery process.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Start<sp/>_find_relationships]<sp/>--&gt;<sp/>B{Iterate<sp/>through<sp/>asset<sp/>pairs<sp/>(asset1,<sp/>asset2)};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C{Is<sp/>asset1<sp/>a<sp/>RegulatoryEvent?};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--<sp/>Yes<sp/>--&gt;<sp/>D{Iterate<sp/>through<sp/>impacted_symbols<sp/>in<sp/>asset1};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E{Does<sp/>asset2.symbol<sp/>match<sp/>an<sp/>impacted_symbol?};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--<sp/>Yes<sp/>--&gt;<sp/>F[Create<sp/>&apos;event_impact&apos;<sp/>relationship<sp/>from<sp/>asset1<sp/>to<sp/>asset2];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>D;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--<sp/>No<sp/>--&gt;<sp/>D;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>End<sp/>of<sp/>symbols<sp/>--&gt;<sp/>B;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--<sp/>No<sp/>--&gt;<sp/>B;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>End<sp/>of<sp/>pairs<sp/>--&gt;<sp/>G[End];</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1457">
<title>The &apos;Event Impact&apos; Relationship</title><para>The integration of regulatory events introduces a unique, directional relationship type called <computeroutput>event_impact</computeroutput>.</para>
<para><itemizedlist>
<listitem><para><bold>Directionality</bold>: The relationship is always directed <emphasis>from</emphasis> the <computeroutput>RegulatoryEvent</computeroutput> <emphasis>to</emphasis> the impacted financial asset (e.g., an <computeroutput>Equity</computeroutput>). This signifies that the event causes an effect on the asset.</para>
</listitem><listitem><para><bold>Strength</bold>: The strength of the <computeroutput>event_impact</computeroutput> relationship is directly derived from the <computeroutput>impact_score</computeroutput> of the <computeroutput>RegulatoryEvent</computeroutput>. This allows the graph to model both the existence and the magnitude of an event&apos;s influence.</para>
</listitem></itemizedlist>
</para>
<para>This diagram shows an example of an <computeroutput>event_impact</computeroutput> relationship.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>&quot;Asset<sp/>Relationship<sp/>Graph&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>direction<sp/>LR</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Event[(&quot;Regulatory<sp/>Event&lt;br&gt;M&amp;A<sp/>Announcement&lt;br&gt;impact_score:<sp/>0.8&quot;)]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Asset[(&quot;Equity&lt;br&gt;AAPL&quot;)]</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Event<sp/>--<sp/>&quot;event_impact&lt;br&gt;strength:<sp/>0.8&quot;<sp/>--&gt;<sp/>Asset</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>](), [README.md]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1458">
<title>Validation and Testing</title><para>The system ensures the integrity of regulatory event data through validation and comprehensive testing.</para>
<para><itemizedlist>
<listitem><para><bold>Data Validation</bold>: As noted in the audit report, the <computeroutput>RegulatoryEvent</computeroutput> model includes <computeroutput>__post_init__</computeroutput> validation for the <computeroutput>impact_score</computeroutput> (must be between -1 and 1) and the date format (must be ISO 8601). This prevents malformed event data from entering the system.</para>
</listitem><listitem><para><bold>Unit Testing</bold>: The test suite includes fixtures like <computeroutput>sample_regulatory_event</computeroutput> in <computeroutput><ref refid="tests_2conftest_8py" kindref="compound">tests/conftest.py</ref></computeroutput> to create valid event objects for testing. Unit tests in <computeroutput><ref refid="test__financial__models_8py" kindref="compound">tests/unit/test_financial_models.py</ref></computeroutput> and <computeroutput><ref refid="test__asset__graph_8py" kindref="compound">tests/unit/test_asset_graph.py</ref></computeroutput> verify both the model&apos;s validation logic and the graph&apos;s ability to correctly build relationships from these events.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1459">
<title>Summary</title><para>The Regulatory Event Integration feature is a key component for adding qualitative depth to the financial asset graph. By modeling external events as nodes and creating directional, weighted relationships, the system can represent how non-market activities influence specific assets. This is supported by a robust data model with built-in validation and is a core part of the relationship discovery engine.</para>
<para>Sources: [README.md](), [<ref refid="CHANGELOG_8md" kindref="compound">CHANGELOG.md</ref>]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1460">
<title>Data Management and Flow</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1461">
<title>Database Schema</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><computeroutput><ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref></computeroutput></para>
</listitem><listitem><para><computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref></computeroutput></para>
</listitem><listitem><para><computeroutput><ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref></computeroutput></para>
</listitem><listitem><para><computeroutput>README.md</computeroutput></para>
</listitem><listitem><para><computeroutput><ref refid="SECURITY_8md" kindref="compound">SECURITY.md</ref></computeroutput></para>
</listitem><listitem><para><computeroutput><ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref></computeroutput></para>
</listitem><listitem><para><computeroutput><ref refid="DEPENDENCY__IMPROVEMENTS_8md" kindref="compound">DEPENDENCY_IMPROVEMENTS.md</ref></computeroutput></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1462">
<title>Database Schema</title><para>The Financial Asset Relationship Database system is designed to model and visualize complex relationships between various financial assets. The data architecture is evolving from an in-memory model to a persistent database system to ensure scalability, data integrity, and support for advanced analytics. This document outlines both the current in-memory data models and the planned future database schema.</para>
<para>The core of the data layer is built around Python <computeroutput>dataclasses</computeroutput> which define the structure for assets and their relationships. The future architecture will translate these models into a relational database schema, likely using PostgreSQL, and will be accessed via a Repository Pattern to decouple business logic from data storage.</para>
<para>Sources: [<computeroutput><ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref></computeroutput>](), [<computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref></computeroutput>](), [<computeroutput><ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref></computeroutput>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1463">
<title>Data Models (In-Memory)</title><para>The application currently relies on a set of well-defined Python <computeroutput>dataclasses</computeroutput> to represent financial entities. This approach ensures type safety and clear data definitions for the in-memory graph structure. The primary models are defined for different asset classes, all inheriting from a base <computeroutput>Asset</computeroutput> class.</para>
<para>Sources: [<computeroutput><ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref></computeroutput>](), [<computeroutput>README.md:65-73</computeroutput>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1464">
<title>Model Inheritance Diagram</title><para>The following diagram illustrates the inheritance hierarchy of the financial data models.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>direction<sp/>LR</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Asset<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>id</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>symbol</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+AssetClass<sp/>asset_class</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>sector</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>price</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>currency</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+dict<sp/>additional_fields</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Equity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>pe_ratio</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>dividend_yield</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Bond<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>yield</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>duration</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>credit_rating</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Commodity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>contract_size</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Currency<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>country</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>RegulatoryEvent<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>event_type</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>impact_score</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Equity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Bond</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Commodity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Currency</highlight></codeline>
</programlisting></para>
<para>Sources: [<computeroutput>README.md:65-73</computeroutput>](), [<computeroutput><ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref></computeroutput>]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1465">
<title>Core Asset Models</title><para>The system supports several asset classes, each with specific attributes.</para>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1466">
<title>Asset (Base Class)</title><para>This is the foundational data class from which all specific asset types inherit.</para>
<para><table rows="9" cols="3"><row>
<entry thead="yes" align='left'><para>Field   </para>
</entry><entry thead="yes" align='left'><para>Type   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>id</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Unique identifier for the asset.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>symbol</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The ticker or symbol for the asset.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>name</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The full name of the asset.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>asset_class</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput><ref refid="classEnum" kindref="compound">Enum</ref></computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The type of asset (e.g., EQUITY, BOND).    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>sector</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The industry sector the asset belongs to.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>price</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The current market price.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>currency</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The currency of the price (3-letter ISO code).    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>additional_fields</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>dict</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>A dictionary for any extra attributes.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<computeroutput>README.md:65-73</computeroutput>](), [<computeroutput><ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref></computeroutput>]()</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1467">
<title>Other Asset Types</title><para><itemizedlist>
<listitem><para><bold>Equity</bold>: Represents stocks and includes fields like <computeroutput>pe_ratio</computeroutput> and <computeroutput>dividend_yield</computeroutput>.</para>
</listitem><listitem><para><bold>Bond</bold>: Represents fixed-income securities with fields like <computeroutput>yield</computeroutput>, <computeroutput>duration</computeroutput>, and <computeroutput>credit_rating</computeroutput>.</para>
</listitem><listitem><para><bold>Commodity</bold>: Represents physical goods or raw materials.</para>
</listitem><listitem><para><bold>Currency</bold>: Represents foreign exchange pairs.</para>
</listitem><listitem><para><bold>Regulatory Events</bold>: Models corporate events like SEC filings or M&amp;A activities that can impact assets. It includes an <computeroutput>impact_score</computeroutput> from -1 to +1.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<computeroutput>README.md:65-73</computeroutput>]()</para>
</sect4>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1468">
<title>Planned Database Architecture</title><para>To support data persistence, real-time updates, and advanced analytics, the project architecture is planned to incorporate a relational database. The recommended approach involves using a <bold>Repository Pattern</bold> to abstract data access and a <bold>Service Layer</bold> for business logic.</para>
<para>Sources: [<computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref></computeroutput>](), [<computeroutput><ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref></computeroutput>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1469">
<title>Architectural Layers</title><para>This diagram shows the proposed layers for interacting with the database.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[API<sp/>Layer<sp/>/<sp/>UI]<sp/>--&gt;<sp/>B[Service<sp/>Layer];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[Repository<sp/>Interface];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D[PostgresRepository];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E[PostgreSQL<sp/>Database];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>F[InMemoryRepository];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G[In-Memory<sp/>Graph];</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>&quot;Business<sp/>Logic&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>&quot;Data<sp/>Access<sp/>Abstraction&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>&quot;Data<sp/>Access<sp/>Implementation&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>F</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>&quot;Data<sp/>Storage&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>G</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
</programlisting></para>
<para>This architecture allows the application to switch between an in-memory store and a persistent PostgreSQL database by simply changing the repository implementation injected into the service layer.</para>
<para>Sources: [<computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref></computeroutput>]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1470">
<title>Proposed Entity-Relationship Diagram (ERD)</title><para>The following ERD represents a possible database schema based on the existing in-memory data models. It includes tables for assets, their specific attributes, and the relationships between them.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">erDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(255)<sp/>id<sp/>PK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(255)<sp/>symbol</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(255)<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(50)<sp/>asset_class</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(100)<sp/>sector</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>decimal<sp/>price</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(3)<sp/>currency</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jsonb<sp/>additional_fields</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>EQUITY<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(255)<sp/>asset_id<sp/>PK,<sp/>FK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>decimal<sp/>pe_ratio</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>decimal<sp/>dividend_yield</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>BOND<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(255)<sp/>asset_id<sp/>PK,<sp/>FK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>decimal<sp/>yield</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>decimal<sp/>duration</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(10)<sp/>credit_rating</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>REGULATORY_EVENT<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(255)<sp/>id<sp/>PK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(255)<sp/>event_type</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>description</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>date<sp/>event_date</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>decimal<sp/>impact_score</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET_RELATIONSHIP<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(255)<sp/>source_asset_id<sp/>PK,<sp/>FK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(255)<sp/>target_asset_id<sp/>PK,<sp/>FK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(100)<sp/>relationship_type<sp/>PK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>decimal<sp/>strength</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>boolean<sp/>is_directional</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>EVENT_ASSET_LINK<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(255)<sp/>event_id<sp/>PK,<sp/>FK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>varchar(255)<sp/>asset_id<sp/>PK,<sp/>FK</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>||--o{<sp/>EQUITY<sp/>:<sp/>&quot;is<sp/>a&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>||--o{<sp/>BOND<sp/>:<sp/>&quot;is<sp/>a&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>||--o{<sp/>ASSET_RELATIONSHIP<sp/>:<sp/>&quot;has<sp/>source&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>||--o{<sp/>ASSET_RELATIONSHIP<sp/>:<sp/>&quot;has<sp/>target&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>REGULATORY_EVENT<sp/>||--|{<sp/>EVENT_ASSET_LINK<sp/>:<sp/>&quot;affects&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ASSET<sp/>||--|{<sp/>EVENT_ASSET_LINK<sp/>:<sp/>&quot;is<sp/>affected<sp/>by&quot;</highlight></codeline>
</programlisting></para>
<para>This schema normalizes asset-specific data into separate tables (<computeroutput>EQUITY</computeroutput>, <computeroutput>BOND</computeroutput>) linked back to the main <computeroutput>ASSET</computeroutput> table. Relationships are stored in a dedicated <computeroutput>ASSET_RELATIONSHIP</computeroutput> table.</para>
<para>Sources: [<computeroutput>README.md:65-73</computeroutput>](), [<computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref></computeroutput>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1471">
<title>Database Security</title><para>When implementing the database, several security best practices are recommended to protect sensitive financial data.</para>
<para><table rows="7" cols="2"><row>
<entry thead="yes" align='left'><para>Practice   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Parameterized Queries</bold>   </para>
</entry><entry thead="no" align='left'><para>Use parameterized queries or ORMs to prevent SQL injection attacks.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Secrets Management</bold>   </para>
</entry><entry thead="no" align='left'><para>Store database credentials securely using environment variables or a secrets manager (e.g., AWS Secrets Manager, Azure Key Vault), not in code.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Connection Pooling</bold>   </para>
</entry><entry thead="no" align='left'><para>Use connection pooling to manage database connections efficiently and securely.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Encryption</bold>   </para>
</entry><entry thead="no" align='left'><para>Enable encryption at rest for stored data and encryption in transit (TLS/SSL) for data moving between the application and the database.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Role-Based Access</bold>   </para>
</entry><entry thead="no" align='left'><para>Configure specific database user roles with the minimum required permissions.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Audit Logging</bold>   </para>
</entry><entry thead="no" align='left'><para>Enable audit logging on the database to track access and changes to data.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<computeroutput><ref refid="SECURITY_8md" kindref="compound">SECURITY.md</ref></computeroutput>](), [<computeroutput><ref refid="DEPENDENCY__IMPROVEMENTS_8md" kindref="compound">DEPENDENCY_IMPROVEMENTS.md</ref></computeroutput>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1472">
<title>Example: Secure Query</title><para>The following code snippet illustrates the use of parameterized queries to prevent SQL injection.</para>
<para><programlisting filename=".py"><codeline><highlight class="comment">#<sp/>GOOD<sp/>-<sp/>Use<sp/>parameterized<sp/>queries</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>sqlalchemy<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>text</highlight></codeline>
<codeline><highlight class="normal">query<sp/>=<sp/>text(</highlight><highlight class="stringliteral">&quot;SELECT<sp/>*<sp/>FROM<sp/>assets<sp/>WHERE<sp/>id<sp/>=<sp/>:asset_id&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline><highlight class="normal">result<sp/>=<sp/>session.execute(query,<sp/>{</highlight><highlight class="stringliteral">&quot;asset_id&quot;</highlight><highlight class="normal">:<sp/>asset_id})</highlight></codeline>
</programlisting></para>
<para>Sources: [<computeroutput><ref refid="SECURITY_8md" kindref="compound">SECURITY.md</ref></computeroutput>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1473">
<title>Conclusion</title><para>The project&apos;s data architecture is strategically designed for evolution. It starts with a flexible, in-memory <computeroutput>dataclass</computeroutput>-based model that is ideal for rapid development and visualization. The clear and well-documented plan to migrate to a persistent PostgreSQL database using a repository pattern ensures that the system can scale to handle larger datasets, support more complex queries, and provide a robust foundation for future features like real-time analytics and machine learning integration. Adherence to security best practices during this transition will be critical for protecting data integrity.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1474">
<title>Data Repository Pattern</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/IMPROVEMENTS.md">IMPROVEMENTS.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/TESTING_GUIDE.md">TESTING_GUIDE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AI_RULES.md">AI_RULES.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1475">
<title>Data Repository Pattern</title><para>The Data Repository Pattern is a recommended architectural improvement for the Financial Asset Relationship Database project. Its purpose is to abstract the data access layer from the core business logic. This decouples the application from a specific data storage implementation, enhances testability, and prepares the system for future enhancements like database persistence.</para>
<para>Currently, the project&apos;s data management is tightly coupled with the business logic inside the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> class. The proposed pattern introduces a dedicated <computeroutput>AssetRepository</computeroutput> to handle all data operations, creating a more scalable and maintainable layered architecture.</para>
<para>Sources: [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:123-135](), [README.md:65-68]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1476">
<title>Current Data Management Architecture</title><para>In the existing architecture, the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> class serves as both the core logic engine and an in-memory data store. The API layer (FastAPI) or UI layer (Gradio) interacts directly with this class to manage assets and relationships.</para>
<para>Sources: [README.md:65-68](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:38-46]()</para>
<para>The diagram below illustrates the current tightly-coupled data flow.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>API/UI<sp/>Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[FastAPI<sp/>Endpoints]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B[Gradio<sp/>Interface]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Core<sp/>Logic</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C[AssetRelationshipGraph]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>In-Memory<sp/>Storage</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D{Assets<sp/>&amp;<sp/>Relationships}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>C</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--<sp/>Manages<sp/>--&gt;<sp/>D</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>style<sp/>C<sp/>fill:#f9f,stroke:#333,stroke-width:2px</highlight></codeline>
</programlisting></para>
<para><emphasis>Diagram showing the API/UI layers directly calling <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput>, which manages in-memory data.</emphasis></para>
<para>Sources: [README.md:65-68](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:38-46]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1477">
<title>Proposed Repository Pattern Architecture</title><para>The <computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref></computeroutput> document recommends refactoring the architecture to introduce a formal Repository Pattern. This involves creating a dedicated repository layer that sits between the business logic (Service Layer) and the data source.</para>
<para>Sources: [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:123-125]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1478">
<title>Key Components</title><para>The proposed architecture consists of three main components:</para>
<para><table rows="4" cols="3"><row>
<entry thead="yes" align='left'><para>Component   </para>
</entry><entry thead="yes" align='left'><para>Description   </para>
</entry><entry thead="yes" align='left'><para>Source File    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>AssetRepository</bold>   </para>
</entry><entry thead="no" align='left'><para>An interface or class that defines data access methods like <computeroutput>get_by_id</computeroutput>, <computeroutput>get_all</computeroutput>, and <computeroutput>save</computeroutput>. It abstracts the underlying data storage mechanism.   </para>
</entry><entry thead="no" align='left'><para><computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>AssetService</bold>   </para>
</entry><entry thead="no" align='left'><para>A business logic layer that consumes the <computeroutput>AssetRepository</computeroutput>. It contains the core application logic, such as calculating portfolio risk, without knowing how data is stored.   </para>
</entry><entry thead="no" align='left'><para><computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Dependency Injection</bold>   </para>
</entry><entry thead="no" align='left'><para>A mechanism to provide the <computeroutput>AssetService</computeroutput> with a concrete implementation of the <computeroutput>AssetRepository</computeroutput>, facilitating easier testing and decoupling.   </para>
</entry><entry thead="no" align='left'><para><computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref></computeroutput>   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:123-150]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1479">
<title>Proposed Data Flow</title><para>The new data flow would be layered, promoting a clean separation of concerns.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[API<sp/>Layer]<sp/>--&gt;<sp/>B[Service<sp/>Layer<sp/>(e.g.,<sp/>AssetService)]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[Repository<sp/>Interface<sp/>(e.g.,<sp/>AssetRepository)]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D[Data<sp/>Source<sp/>(In-Memory<sp/>or<sp/>DB)]</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>&quot;Business<sp/>Logic&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>&quot;Data<sp/>Access<sp/>Layer&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
</programlisting></para>
<para><emphasis>Diagram illustrating the proposed layered architecture where the API interacts with a Service Layer, which in turn uses a Repository to access data.</emphasis></para>
<para>Sources: [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:123-150]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1480">
<title><computeroutput>AssetRepository</computeroutput> Interface</title><para>The <computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref></computeroutput> document suggests the following structure for the <computeroutput>AssetRepository</computeroutput>. This interface defines the contract for all data access operations related to assets.</para>
<para><programlisting filename=".py"><codeline><highlight class="comment">#<sp/>Proposed<sp/>in:<sp/>src/repositories/asset_repository.py</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">AssetRepository:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">get_by_id(self,<sp/>asset_id:<sp/>str)<sp/>-&gt;<sp/>Optional[Asset]:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">get_all(self)<sp/>-&gt;<sp/>List[Asset]:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">save(self,<sp/>asset:<sp/>Asset)<sp/>-&gt;<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight></codeline>
</programlisting></para>
<para><emphasis>Source: [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:126-135]()</emphasis></para>
<para>The following class diagram shows the proposed <computeroutput>AssetRepository</computeroutput> and its relationship with the <computeroutput>Asset</computeroutput> model.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>AssetRepository<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;Interface&gt;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+get_by_id(asset_id:<sp/>str)<sp/>Optional[Asset]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+get_all()<sp/>List[Asset]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+save(asset:<sp/>Asset)<sp/>None</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Asset<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+id:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+symbol:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+name:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>AssetRepository<sp/>..&gt;<sp/>Asset<sp/>:<sp/>&quot;manages&quot;</highlight></codeline>
</programlisting></para>
<para><emphasis>Class diagram for the proposed <computeroutput>AssetRepository</computeroutput> interface.</emphasis></para>
<para>Sources: [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:126-135](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:12-13]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1481">
<title>Integration with a Service Layer</title><para>The repository is designed to be consumed by a service layer, which will house the business logic currently in <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput>. The <computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref></computeroutput> document provides an example of an <computeroutput>AssetService</computeroutput> that uses dependency injection to receive a repository instance.</para>
<para><programlisting filename=".py"><codeline><highlight class="comment">#<sp/>Proposed<sp/>in:<sp/>src/services/asset_service.py</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">AssetService:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(self,<sp/>repository:<sp/>AssetRepository):</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.repository<sp/>=<sp/>repository</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">calculate_portfolio_risk(self,<sp/>assets:<sp/>List[Asset])<sp/>-&gt;<sp/>float:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Business<sp/>logic<sp/>here</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight></codeline>
</programlisting></para>
<para><emphasis>Source: [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:139-147]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1482">
<title>Sequence of Operations</title><para>This sequence diagram shows how a request to fetch an asset would flow through the proposed architecture.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>API<sp/>as<sp/>&quot;API<sp/>Endpoint&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Service<sp/>as<sp/>&quot;AssetService&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Repo<sp/>as<sp/>&quot;AssetRepository&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>DS<sp/>as<sp/>&quot;Data<sp/>Source&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>API-&gt;&gt;Service:<sp/>get_asset_details(&quot;AAPL&quot;)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Service</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Service-&gt;&gt;Repo:<sp/>get_by_id(&quot;AAPL&quot;)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Repo</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Repo-&gt;&gt;DS:<sp/>Retrieve<sp/>asset<sp/>data<sp/>for<sp/>&quot;AAPL&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>DS--&gt;&gt;Repo:<sp/>Asset<sp/>data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Repo--&gt;&gt;Service:<sp/>Asset<sp/>object</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Repo</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Service--&gt;&gt;API:<sp/>Asset<sp/>JSON<sp/>response</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Service</highlight></codeline>
</programlisting></para>
<para><emphasis>Sequence diagram showing an API request being handled by the Service, which uses the Repository to fetch data.</emphasis></para>
<para>Sources: [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:123-150]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1483">
<title>Benefits of Adopting the Repository Pattern</title><para>Implementing this pattern offers several advantages for the project&apos;s long-term health and scalability:</para>
<para><itemizedlist>
<listitem><para><bold>Separation of Concerns</bold>: Isolates data access logic from business logic, making the code easier to understand and maintain.</para>
</listitem><listitem><para><bold>Improved Testability</bold>: Business logic can be tested independently of the data layer by mocking the repository interface. This is a key part of the project&apos;s testing strategy.</para>
</listitem><listitem><para><bold>Data Source Agnosticism</bold>: The underlying data storage can be changed (e.g., from in-memory to a SQL database like PostgreSQL) without affecting the business logic, as long as the new data source class implements the <computeroutput>AssetRepository</computeroutput> interface.</para>
</listitem><listitem><para><bold>Enables Persistence</bold>: It is a prerequisite for adding a persistent data storage layer, a suggested future feature.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:123-125, 148-150](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:19-25]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1484">
<title>Conclusion</title><para>The Data Repository Pattern is a strategic architectural improvement recommended for the <computeroutput>financial-asset-relationship-db</computeroutput> project. By transitioning from the current monolithic <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> to a layered architecture with a dedicated <computeroutput>AssetRepository</computeroutput> and <computeroutput>AssetService</computeroutput>, the project will become more modular, testable, and prepared for future features like database persistence. This change aligns with modern software design principles and is crucial for the application&apos;s evolution.</para>
<para>Sources: [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>](), [README.md]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1485">
<title>Real Data Fetching</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/data/real_data_fetcher.py">src/data/real_data_fetcher.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AI_RULES.md">AI_RULES.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/INTEGRATION_SUMMARY.md">INTEGRATION_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/IMPROVEMENTS.md">IMPROVEMENTS.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CHANGELOG.md">CHANGELOG.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1486">
<title>Real Data Fetching</title><para>The Real Data Fetching module is responsible for acquiring live and historical financial market data from external sources. Its primary function is to populate the application&apos;s financial models with real-world data, which is essential for both the 3D visualization and the underlying analysis. This functionality is a core component of the system, supporting both the original Gradio interface and the newer FastAPI/Next.js architecture.</para>
<para>The system is standardized to use the <computeroutput>yfinance</computeroutput> library for all public financial market data acquisition, ensuring a consistent and reliable data source. This module acts as the bridge between the external Yahoo Finance API and the application&apos;s internal logic.</para>
<para>Sources: [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>](), [<ref refid="CHANGELOG_8md" kindref="compound">CHANGELOG.md</ref>](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1487">
<title>Core Technology</title><para>The project mandates the use of a specific library for financial data acquisition to ensure consistency and maintainability.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1488">
<title>yfinance Library</title><para>The <computeroutput>yfinance</computeroutput> library is the sole approved tool for retrieving public financial market data, including stock prices, company information, and news. This rule prevents the implementation of custom web scrapers or the use of other external financial APIs unless explicitly approved.</para>
<para>Sources: [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>](), [README.md]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1489">
<title>Architecture and Data Flow</title><para>The data fetching mechanism is centralized within the <computeroutput>src/data/</computeroutput> directory and is called by higher-level application layers like the API backend.</para>
<para>This diagram illustrates the data flow from the API layer to the external data source.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[API<sp/>Layer<sp/>/<sp/>App<sp/>Logic]<sp/>--&gt;<sp/>B[real_data_fetcher.py];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C{yfinance<sp/>Library};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D[(Yahoo<sp/>Finance<sp/>API)];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;&gt;<sp/>C;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;&gt;<sp/>B;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;&gt;<sp/>A[Returns<sp/>Populated<sp/>Asset<sp/>Models];</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1490">
<title>Sequence of Operations</title><para>The sequence diagram below shows how the FastAPI backend interacts with the data fetching module to retrieve asset information.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Next_js<sp/>as<sp/>&quot;Next.js<sp/>Frontend&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>FastAPI<sp/>as<sp/>&quot;FastAPI<sp/>Backend&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Fetcher<sp/>as<sp/>&quot;real_data_fetcher.py&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>YFinance<sp/>as<sp/>&quot;yfinance<sp/>Library&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>YahooAPI<sp/>as<sp/>&quot;Yahoo<sp/>Finance<sp/>API&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Next_js-&gt;&gt;FastAPI:<sp/>GET<sp/>/api/assets</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>FastAPI</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>over<sp/>FastAPI:<sp/>Uses<sp/>real<sp/>data<sp/>from<sp/>real_data_fetcher.py</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FastAPI-&gt;&gt;Fetcher:<sp/>fetch_data()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Fetcher</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Fetcher-&gt;&gt;YFinance:<sp/>Ticker(symbol).info</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>YFinance</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>YFinance-&gt;&gt;YahooAPI:<sp/>HTTP<sp/>GET<sp/>Request</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>YahooAPI--&gt;&gt;YFinance:<sp/>JSON<sp/>Response</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>YFinance--&gt;&gt;Fetcher:<sp/>Data<sp/>Dictionary</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>YFinance</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Fetcher--&gt;&gt;FastAPI:<sp/>Populated<sp/>Asset<sp/>Objects</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Fetcher</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FastAPI--&gt;&gt;Next_js:<sp/>JSON<sp/>Response<sp/>with<sp/>Asset<sp/>Data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>FastAPI</highlight></codeline>
</programlisting></para>
<para>This flow demonstrates the clear separation of concerns, where the API layer delegates data acquisition to the specialized fetcher module.</para>
<para>Sources: [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>](), [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1491">
<title>System Integration</title><para>The real data fetching capability is integrated into multiple parts of the application.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1492">
<title>FastAPI Backend</title><para>The FastAPI backend, located in <computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput>, utilizes <computeroutput><ref refid="real__data__fetcher_8py" kindref="compound">src/data/real_data_fetcher.py</ref></computeroutput> to serve real-time data to the Next.js frontend. This is a key part of the modern web interface, allowing it to display up-to-date financial information in the asset explorer and visualizations.</para>
<para>Sources: [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1493">
<title>Gradio Application</title><para>The initial version of the application, built with Gradio, also relies on <computeroutput>yfinance</computeroutput> for real-time data fetching to power its interactive visualizations and analytics dashboard. This was a feature from the first major release.</para>
<para>Sources: [<ref refid="CHANGELOG_8md" kindref="compound">CHANGELOG.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1494">
<title>Error Handling and Improvements</title><para>The <computeroutput><ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref></computeroutput> document highlights an area for enhancement within the <computeroutput><ref refid="real__data__fetcher_8py" kindref="compound">real_data_fetcher.py</ref></computeroutput> module concerning its error handling strategy.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1495">
<title>Broad Exception Handling</title><para>The current implementation in <computeroutput><ref refid="real__data__fetcher_8py" kindref="compound">real_data_fetcher.py</ref></computeroutput> uses broad <computeroutput>except Exception</computeroutput> clauses. This pattern is discouraged because it can catch unexpected exceptions, making debugging more difficult.</para>
<para><table rows="4" cols="2"><row>
<entry thead="yes" align='left'><para>Current (Discouraged)   </para>
</entry><entry thead="yes" align='left'><para>Recommended    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>Catches all exceptions, including system-level ones.   </para>
</entry><entry thead="no" align='left'><para>Catches specific, expected exceptions like <computeroutput>ValueError</computeroutput> or <computeroutput>ConnectionError</computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>Can hide bugs by catching errors that should have been propagated.   </para>
</entry><entry thead="no" align='left'><para>Allows unexpected errors to propagate for easier debugging.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>Makes it hard to distinguish between different error types (e.g., data vs. network).   </para>
</entry><entry thead="no" align='left'><para>Provides distinct handling for different error scenarios.   </para>
</entry></row>
</table>
</para>
<para><bold>Recommendation:</bold> Refactor the <computeroutput>try...except</computeroutput> blocks to catch more specific exceptions first, with a final <computeroutput>except Exception</computeroutput> to log and re-raise any truly unexpected errors.</para>
<para><programlisting filename=".py"><codeline><highlight class="comment">#<sp/>Instead<sp/>of:</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>data<sp/>=<sp/>fetch_data()</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>e:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>logger.error(f</highlight><highlight class="stringliteral">&quot;Error:<sp/>{e}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">#<sp/>Use<sp/>specific<sp/>exceptions:</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>data<sp/>=<sp/>fetch_data()</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>(ValueError,<sp/>KeyError,<sp/>TypeError)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>e:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>logger.error(f</highlight><highlight class="stringliteral">&quot;Data<sp/>error:<sp/>{e}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>ConnectionError<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>e:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>logger.error(f</highlight><highlight class="stringliteral">&quot;Network<sp/>error:<sp/>{e}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>e:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>logger.exception(f</highlight><highlight class="stringliteral">&quot;Unexpected<sp/>error:<sp/>{e}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">#<sp/>Re-raise<sp/>unexpected<sp/>errors</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1496">
<title>Conclusion</title><para>The Real Data Fetching module is a critical, standardized component for sourcing live financial data using the <computeroutput>yfinance</computeroutput> library. It serves as the data backbone for both the original Gradio application and the newer FastAPI/Next.js stack. While functionally complete, its robustness can be improved by refining its error-handling logic to be more specific, as outlined in the project&apos;s improvement recommendations.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1497">
<title>Sample Data Generation</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/data/sample_data.py">src/data/sample_data.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AUDIT_REPORT.md">AUDIT_REPORT.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AI_RULES.md">AI_RULES.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/IMPROVEMENTS.md">IMPROVEMENTS.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/SUMMARY.md">SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/TESTING_GUIDE.md">TESTING_GUIDE.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1498">
<title>Sample Data Generation</title><para>The sample data generation module is a core component responsible for creating a static, in-memory dataset of financial assets and regulatory events. Its primary purpose is to allow the application to run and demonstrate its visualization capabilities without requiring live data fetching, making it essential for development, testing, and quick demonstrations.</para>
<para>This module, primarily located in <computeroutput><ref refid="sample__data_8py" kindref="compound">src/data/sample_data.py</ref></computeroutput>, populates the system with a variety of asset classes, including equities, bonds, commodities, and currencies. This pre-defined dataset ensures a consistent and reproducible state for the application&apos;s 3D network graph, as the visualization&apos;s layout is deterministic.</para>
<para>Sources: [README.md](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1499">
<title>Architecture and Generation Flow</title><para>The sample data generation process is straightforward. A central function orchestrates the creation of various asset objects and collects them into a list. This process is deterministic, partly due to the use of a fixed random seed for any operations involving randomness, ensuring the 3D graph layout remains consistent across application runs.</para>
<para>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>](), [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1500">
<title>Core Function</title><para>The main entry point for data generation is the <computeroutput>create_sample_assets()</computeroutput> function (inferred name). This function instantiates hardcoded <computeroutput>dataclasses</computeroutput> for each asset and returns them as a list to be consumed by other parts of the application, such as the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput>.</para>
<para>Sources: [README.md](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1501">
<title>Generation Process Flow</title><para>The following diagram illustrates the logical flow of creating the sample dataset.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Start:<sp/>create_sample_assets()]<sp/>--&gt;<sp/>B{Initialize<sp/>empty<sp/>asset<sp/>list};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[Create<sp/>Equity<sp/>objects];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D[Create<sp/>Bond<sp/>objects];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E[Create<sp/>Commodity<sp/>objects];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F[Create<sp/>Currency<sp/>objects];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G[Create<sp/>Regulatory<sp/>Event<sp/>objects];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Asset<sp/>Creation</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>F</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>G</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>H{Append<sp/>all<sp/>objects<sp/>to<sp/>list};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>H<sp/>--&gt;<sp/>I[Return<sp/>list<sp/>of<sp/>Assets];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>I<sp/>--&gt;<sp/>J[End];</highlight></codeline>
</programlisting></para>
<para>This diagram shows the sequential creation of different asset types, which are then aggregated and returned.</para>
<para>Sources: [README.md](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1502">
<title>Data Models</title><para>The sample data generation relies on a set of well-defined data models defined in <computeroutput><ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref></computeroutput>. These models are implemented using Python&apos;s <computeroutput>dataclasses</computeroutput> and <computeroutput>enum</computeroutput> modules to ensure type safety, clarity, and maintainability. The core model is a base <computeroutput>Asset</computeroutput> class from which specific asset types inherit.</para>
<para>Sources: [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1503">
<title>Asset Class Hierarchy</title><para>The system uses a clear inheritance hierarchy for its financial models. This structure allows for both shared attributes and specialized fields for each asset class.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>direction<sp/>LR</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Asset<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+id:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+symbol:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+name:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+asset_class:<sp/>AssetClass</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+price:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+currency:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+sector:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Equity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+pe_ratio:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+dividend_yield:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Bond<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+yield:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+duration:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+credit_rating:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Commodity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+contract_size:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Currency<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+country:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>RegulatoryEvent<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+event_type:<sp/>RegulatoryActivity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+impact_score:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Equity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Bond</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Commodity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Currency</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>RegulatoryEvent</highlight></codeline>
</programlisting></para>
<para>This diagram shows the base <computeroutput>Asset</computeroutput> class and the specialized classes for <computeroutput>Equity</computeroutput>, <computeroutput>Bond</computeroutput>, <computeroutput>Commodity</computeroutput>, <computeroutput>Currency</computeroutput>, and <computeroutput>RegulatoryEvent</computeroutput>.</para>
<para>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>](), [README.md]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1504">
<title>Enumerations</title><para>To enforce a fixed set of choices for categories, the system uses <computeroutput>enum</computeroutput>.</para>
<para><table rows="3" cols="2"><row>
<entry thead="yes"><para><ref refid="classEnum" kindref="compound">Enum</ref> Name   </para>
</entry><entry thead="yes"><para>Purpose    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>AssetClass</computeroutput>   </para>
</entry><entry thead="no"><para>Defines the major types of assets (e.g., EQUITY, BOND).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>RegulatoryActivity</computeroutput>   </para>
</entry><entry thead="no"><para>Defines the types of regulatory events (e.g., EARNINGS, SEC_FILING).   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1505">
<title>Generated Asset Types</title><para>The <computeroutput><ref refid="sample__data_8py" kindref="compound">sample_data.py</ref></computeroutput> module creates instances for all supported asset classes. The hardcoded values provide a rich and interconnected dataset for visualization.</para>
<para>Sources: [README.md](), [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1506">
<title>Equities</title><para>Sample stocks are created with financial metrics like P/E ratio and dividend yield.</para>
<para><table rows="5" cols="3"><row>
<entry thead="yes"><para>Symbol   </para>
</entry><entry thead="yes"><para>Name   </para>
</entry><entry thead="yes"><para>Sector    </para>
</entry></row>
<row>
<entry thead="no"><para>AAPL   </para>
</entry><entry thead="no"><para>Apple Inc.   </para>
</entry><entry thead="no"><para>Technology    </para>
</entry></row>
<row>
<entry thead="no"><para>MSFT   </para>
</entry><entry thead="no"><para>Microsoft Corp.   </para>
</entry><entry thead="no"><para>Technology    </para>
</entry></row>
<row>
<entry thead="no"><para>JPM   </para>
</entry><entry thead="no"><para>JPMorgan Chase &amp; Co.   </para>
</entry><entry thead="no"><para>Financials    </para>
</entry></row>
<row>
<entry thead="no"><para>XOM   </para>
</entry><entry thead="no"><para>Exxon Mobil Corp.   </para>
</entry><entry thead="no"><para>Energy   </para>
</entry></row>
</table>
</para>
<para>Sources: [README.md](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1507">
<title>Bonds</title><para>Corporate bonds are included, often linked to the equities of the issuing company.</para>
<para><table rows="3" cols="3"><row>
<entry thead="yes"><para>Symbol   </para>
</entry><entry thead="yes"><para>Name   </para>
</entry><entry thead="yes"><para>Issuer    </para>
</entry></row>
<row>
<entry thead="no"><para>AAPL25   </para>
</entry><entry thead="no"><para>Apple 2.4% 2025   </para>
</entry><entry thead="no"><para>Apple Inc.    </para>
</entry></row>
<row>
<entry thead="no"><para>MSFT30   </para>
</entry><entry thead="no"><para>Microsoft 3.1% 2030   </para>
</entry><entry thead="no"><para>Microsoft Corp.   </para>
</entry></row>
</table>
</para>
<para>Sources: [README.md](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1508">
<title>Other Asset Classes</title><para>The sample dataset also includes:</para>
<para><itemizedlist>
<listitem><para><bold>Commodities</bold>: Such as Gold (GC=F) and Crude Oil (CL=F).</para>
</listitem><listitem><para><bold>Currencies</bold>: FX pairs like EUR/USD and GBP/USD.</para>
</listitem><listitem><para><bold>Regulatory Events</bold>: SEC filings or earnings reports linked to specific assets.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [README.md](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1509">
<title>Usage in the Application</title><para>The data generated by this module is fundamental to the application&apos;s ability to display a graph upon startup. The main application file (<computeroutput><ref refid="app_8py" kindref="compound">app.py</ref></computeroutput> or <computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput>) fetches this data and uses it to initialize the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput>.</para>
<para>Sources: [README.md](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1510">
<title>Data Flow on Application Start</title><para>This sequence diagram shows how the sample data is loaded and processed when the application starts.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>User</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>App<sp/>as<sp/>&quot;Application<sp/>(app.py/api.main.py)&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>SampleData<sp/>as<sp/>&quot;sample_data.py&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>AssetGraph<sp/>as<sp/>&quot;AssetRelationshipGraph&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User-&gt;&gt;App:<sp/>Starts<sp/>Application</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>App</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>App-&gt;&gt;SampleData:<sp/>create_sample_assets()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>SampleData</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SampleData--&gt;&gt;App:<sp/>Returns<sp/>list<sp/>of<sp/>Asset<sp/>objects</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>SampleData</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>App-&gt;&gt;AssetGraph:<sp/>new<sp/>AssetRelationshipGraph()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>AssetGraph</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>AssetGraph</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>App-&gt;&gt;AssetGraph:<sp/>add_asset()<sp/>for<sp/>each<sp/>asset</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>App-&gt;&gt;AssetGraph:<sp/>build_relationships()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>App-&gt;&gt;AssetGraph:<sp/>get_3d_visualization_data()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>AssetGraph</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>AssetGraph--&gt;&gt;App:<sp/>Returns<sp/>visualization<sp/>data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>AssetGraph</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>App--&gt;&gt;User:<sp/>Renders<sp/>3D<sp/>Graph</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>App</highlight></codeline>
</programlisting></para>
<para>This flow demonstrates the critical role of <computeroutput><ref refid="sample__data_8py" kindref="compound">sample_data.py</ref></computeroutput> in bootstrapping the application&apos;s primary feature.</para>
<para>Sources: [README.md](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>](), [<ref refid="TEST__SUMMARY_8md" kindref="compound">TEST_SUMMARY.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1511">
<title>Role in Testing</title><para>The sample data provides a reliable and consistent baseline for the project&apos;s comprehensive test suite. Test fixtures, defined in <computeroutput><ref refid="tests_2conftest_8py" kindref="compound">tests/conftest.py</ref></computeroutput>, are heavily inspired by or are direct subsets of the data generated in <computeroutput><ref refid="sample__data_8py" kindref="compound">sample_data.py</ref></computeroutput>. These fixtures are then used across unit and integration tests to validate the behavior of the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput>, API endpoints, and data models.</para>
<para>For example, tests for relationship discovery in <computeroutput><ref refid="test__asset__graph_8py" kindref="compound">tests/unit/test_asset_graph.py</ref></computeroutput> use fixtures representing sample equities and bonds to assert that the correct relationships are created. This ensures that the core logic of the application is sound and behaves as expected with a known dataset.</para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1512">
<title>Conclusion</title><para>The sample data generation module is a cornerstone of the <computeroutput>financial-asset-relationship-db</computeroutput> project. It provides a self-contained, deterministic, and representative dataset that enables immediate visualization and robust testing. By decoupling the application&apos;s core logic from live data sources, it enhances developer productivity, ensures consistent demonstrations, and provides a stable foundation for the entire test suite.</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1513">
<title>Backend Systems</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1514">
<title>FastAPI API Reference</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/api/main.py">api/main.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/tests/unit/test_api_main.py">tests/unit/test_api_main.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/INTEGRATION_SUMMARY.md">INTEGRATION_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/DEPLOYMENT.md">DEPLOYMENT.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/QUICK_START.md">QUICK_START.md</ulink></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1515">
<title>FastAPI API Reference</title><para>The FastAPI backend serves as the primary data provider for the modern Next.js frontend. Its main purpose is to expose the functionalities of the core <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> logic through a high-performance, RESTful API. The API handles requests for asset data, relationship information, network metrics, and visualization data, returning it in a structured JSON format.</para>
<para>This API is designed to be run as a serverless function on platforms like Vercel, working in tandem with the Next.js application. It includes automatic OpenAPI documentation, which can be accessed at the <computeroutput>/docs</computeroutput> endpoint during local development.</para>
<para><emphasis>Sources: [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [<ref refid="QUICK__START_8md" kindref="compound">QUICK_START.md</ref>]()</emphasis></para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1516">
<title>Architecture</title><para>The API is built using the FastAPI framework and runs on a Uvicorn ASGI server. It acts as a wrapper around the existing Python business logic, primarily interacting with a singleton instance of the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> class. This design separates the web-serving layer from the core data processing engine.</para>
<para><emphasis>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:18-24]()</emphasis></para>
<para>The following diagram illustrates the high-level architecture and data flow from the user to the core logic via the FastAPI layer.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>User_Interface</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[Next.js<sp/>Frontend]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>API_Layer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B[FastAPI<sp/>Backend]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Core_Logic</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C[AssetRelationshipGraph]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D[Data<sp/>Sources<sp/>e.g.,<sp/>yfinance]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--<sp/>&quot;REST<sp/>API<sp/>Calls&quot;<sp/>--&gt;<sp/>B</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>&quot;Function<sp/>Calls&quot;<sp/>--&gt;<sp/>C</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--<sp/>&quot;Fetches<sp/>Data&quot;<sp/>--&gt;<sp/>D</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1517">
<title>Core Logic Integration</title><para>To ensure efficiency and maintain state, the API uses a thread-safe singleton pattern to manage the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> instance. The graph is initialized only once on the first request and is then reused for all subsequent calls. This avoids the costly process of re-fetching and rebuilding the graph for every API hit.</para>
<para>A <computeroutput>threading.Lock</computeroutput> is used to prevent race conditions during the initial creation of the graph, making it safe for concurrent requests.</para>
<para><emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:31-48](), [<ref refid="test__api__main_8py" kindref="compound">tests/unit/test_api_main.py</ref>:70-93]()</emphasis></para>
<para>This diagram shows the logic for initializing the singleton graph instance.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Request<sp/>Received]<sp/>--&gt;<sp/>B{graph<sp/>is<sp/>None?};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>Yes<sp/>--&gt;<sp/>C{Acquire<sp/>Lock};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D{graph<sp/>is<sp/>None?};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>Yes<sp/>--&gt;<sp/>E[Initialize<sp/>AssetRelationshipGraph];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F[Set<sp/>global<sp/>graph<sp/>instance];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G[Release<sp/>Lock];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>No<sp/>--&gt;<sp/>G;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>No<sp/>--&gt;<sp/>H[Return<sp/>Existing<sp/>Graph];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>H;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>H<sp/>--&gt;<sp/>I[Process<sp/>Request];</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:31-48]()</emphasis></para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1518">
<title>CORS Configuration</title><para>The API is configured with CORS (Cross-Origin Resource Sharing) middleware to allow requests from the Next.js frontend, which runs on a different port during local development (<computeroutput><ulink url="http://localhost:3000">http://localhost:3000</ulink></computeroutput>) and on Vercel deployment domains (<computeroutput><ulink url="https://">https://</ulink>*.vercel.app</computeroutput>).</para>
<para><emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:220-229](), [<ref refid="DEPLOYMENT_8md" kindref="compound">DEPLOYMENT.md</ref>]()</emphasis></para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1519">
<title>API Endpoints</title><para>The API is available under the <computeroutput>/api/</computeroutput> prefix.</para>
<para><emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>](), [<ref refid="DEPLOYMENT_8md" kindref="compound">DEPLOYMENT.md</ref>](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1520">
<title>Health &amp; Metadata</title><sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1521">
<title><computeroutput>GET /api/health</computeroutput></title><para>Returns the operational status of the API.</para>
<para><itemizedlist>
<listitem><para><bold>Response:</bold> <programlisting filename=".json"><codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;status&quot;:<sp/>&quot;healthy&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;graph_initialized&quot;:<sp/>true</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting> <emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:100-106](), [<ref refid="test__api__main_8py" kindref="compound">tests/unit/test_api_main.py</ref>:130-135]()</emphasis></para>
</listitem></itemizedlist>
</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1522">
<title><computeroutput>GET /api/asset-classes</computeroutput></title><para>Returns a list of all available asset classes.</para>
<para><itemizedlist>
<listitem><para><bold>Response:</bold> <programlisting filename=".json"><codeline><highlight class="normal">[&quot;EQUITY&quot;,<sp/>&quot;BOND&quot;,<sp/>&quot;COMMODITY&quot;,<sp/>&quot;CURRENCY&quot;]</highlight></codeline>
</programlisting> <emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:189-194](), [<ref refid="test__api__main_8py" kindref="compound">tests/unit/test_api_main.py</ref>:302-307]()</emphasis></para>
</listitem></itemizedlist>
</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1523">
<title><computeroutput>GET /api/sectors</computeroutput></title><para>Returns a list of all unique sectors available in the asset graph.</para>
<para><itemizedlist>
<listitem><para><bold>Response:</bold> <programlisting filename=".json"><codeline><highlight class="normal">[&quot;Technology&quot;,<sp/>&quot;Financial<sp/>Services&quot;,<sp/>&quot;Consumer<sp/>Cyclical&quot;]</highlight></codeline>
</programlisting> <emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:197-202](), [<ref refid="test__api__main_8py" kindref="compound">tests/unit/test_api_main.py</ref>:309-314]()</emphasis></para>
</listitem></itemizedlist>
</para>
</sect4>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1524">
<title>Assets</title><sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1525">
<title><computeroutput>GET /api/assets</computeroutput></title><para>Retrieves a list of all assets, with optional filtering.</para>
<para><table rows="3" cols="3"><row>
<entry thead="yes"><para>Parameter   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>asset_class</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>(Optional) Filter assets by a specific asset class (e.g., <computeroutput>EQUITY</computeroutput>).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>sector</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>(Optional) Filter assets by a specific sector (e.g., <computeroutput>Technology</computeroutput>).   </para>
</entry></row>
</table>
</para>
<para><itemizedlist>
<listitem><para><bold>Response:</bold> An array of <computeroutput>AssetResponse</computeroutput> objects. <emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:110-129](), [<ref refid="test__api__main_8py" kindref="compound">tests/unit/test_api_main.py</ref>:151-189]()</emphasis></para>
</listitem></itemizedlist>
</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1526">
<title><computeroutput>GET /api/assets/{asset_id}</computeroutput></title><para>Retrieves detailed information for a single asset by its ID.</para>
<para><itemizedlist>
<listitem><para><bold>Response:</bold> A single <computeroutput>AssetResponse</computeroutput> object or a 404 error if not found. <emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:132-143](), [<ref refid="test__api__main_8py" kindref="compound">tests/unit/test_api_main.py</ref>:191-203]()</emphasis></para>
</listitem></itemizedlist>
</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1527">
<title><computeroutput>GET /api/assets/{asset_id}/relationships</computeroutput></title><para>Retrieves all relationships for a specific asset.</para>
<para><itemizedlist>
<listitem><para><bold>Response:</bold> An array of <computeroutput>RelationshipResponse</computeroutput> objects. <emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:146-157](), [<ref refid="test__api__main_8py" kindref="compound">tests/unit/test_api_main.py</ref>:221-233]()</emphasis></para>
</listitem></itemizedlist>
</para>
</sect4>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1528">
<title>Relationships</title><sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1529">
<title><computeroutput>GET /api/relationships</computeroutput></title><para>Retrieves all relationships in the graph.</para>
<para><itemizedlist>
<listitem><para><bold>Response:</bold> An array of <computeroutput>RelationshipResponse</computeroutput> objects. <emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:160-166](), [<ref refid="test__api__main_8py" kindref="compound">tests/unit/test_api_main.py</ref>:235-241]()</emphasis></para>
</listitem></itemizedlist>
</para>
</sect4>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1530">
<title>Metrics &amp; Visualization</title><sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1531">
<title><computeroutput>GET /api/metrics</computeroutput></title><para>Calculates and returns key metrics about the network graph.</para>
<para><itemizedlist>
<listitem><para><bold>Response:</bold> A <computeroutput>MetricsResponse</computeroutput> object. <emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:169-175](), [<ref refid="test__api__main_8py" kindref="compound">tests/unit/test_api_main.py</ref>:243-256]()</emphasis></para>
</listitem></itemizedlist>
</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1532">
<title><computeroutput>GET /api/visualization</computeroutput></title><para>Returns the data required for the frontend to render the 3D network graph.</para>
<para><itemizedlist>
<listitem><para><bold>Response:</bold> A <computeroutput>VisualizationDataResponse</computeroutput> object containing nodes and edges. <emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:178-186](), [<ref refid="test__api__main_8py" kindref="compound">tests/unit/test_api_main.py</ref>:258-279]()</emphasis></para>
</listitem></itemizedlist>
</para>
<para>The following sequence diagram shows a typical request to the visualization endpoint.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Client<sp/>as<sp/>&quot;Next.js<sp/>Frontend&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>API<sp/>as<sp/>&quot;FastAPI<sp/>Backend&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Graph<sp/>as<sp/>&quot;AssetRelationshipGraph&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Client-&gt;&gt;API:<sp/>GET<sp/>/api/visualization</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>API-&gt;&gt;Graph:<sp/>get_graph()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>right<sp/>of<sp/>API:<sp/>Get<sp/>singleton<sp/>instance</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Graph--&gt;&gt;API:<sp/>graph_instance</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>API-&gt;&gt;Graph:<sp/>get_3d_visualization_data()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Graph--&gt;&gt;API:<sp/>{nodes:<sp/>[...],<sp/>links:<sp/>[...]}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>API--&gt;&gt;Client:<sp/>200<sp/>OK<sp/>with<sp/>JSON<sp/>payload</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:178-186](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</emphasis></para>
</sect4>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1533">
<title>Data Models</title><para>The API uses Pydantic models to define and validate the structure of JSON responses.</para>
<para><emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:51-97](), [<ref refid="test__api__main_8py" kindref="compound">tests/unit/test_api_main.py</ref>:95-128]()</emphasis></para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>AssetResponse<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>id</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>symbol</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>asset_class</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>sector</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>currency</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>price</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>market_cap</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+dict<sp/>additional_fields</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>RelationshipResponse<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>source</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>target</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>relationship_type</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>strength</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>MetricsResponse<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+int<sp/>total_assets</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+int<sp/>total_relationships</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>network_density</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>average_degree</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+int<sp/>max_degree</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+dict<sp/>asset_class_distribution</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>VisualizationNode<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>id</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>asset_class</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>sector</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>val</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+list~float~<sp/>x,<sp/>y,<sp/>z</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>VisualizationLink<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>source</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>target</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>type</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>strength</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>VisualizationDataResponse<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+list~VisualizationNode~<sp/>nodes</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+list~VisualizationLink~<sp/>links</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>AssetResponse<sp/>&quot;1&quot;<sp/>--<sp/>&quot;0..*&quot;<sp/>RelationshipResponse<sp/>:<sp/>(source/target)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>MetricsResponse<sp/>..&gt;<sp/>AssetResponse<sp/>:<sp/>(counts)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>VisualizationDataResponse<sp/>o--<sp/>&quot;many&quot;<sp/>VisualizationNode</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>VisualizationDataResponse<sp/>o--<sp/>&quot;many&quot;<sp/>VisualizationLink</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>VisualizationNode<sp/>..&gt;<sp/>AssetResponse<sp/>:<sp/>(derived<sp/>from)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>VisualizationLink<sp/>..&gt;<sp/>RelationshipResponse<sp/>:<sp/>(derived<sp/>from)</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:51-97]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1534">
<title>AssetResponse</title><para><table rows="10" cols="3"><row>
<entry thead="yes"><para>Field   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>id</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>Unique identifier for the asset.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>symbol</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>Ticker symbol or identifier.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>name</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>Full name of the asset.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>asset_class</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The class of the asset (e.g., <computeroutput>EQUITY</computeroutput>).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>sector</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The industry sector.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>currency</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>The currency of the asset price.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>price</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>The current price.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>market_cap</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>The market capitalization.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>additional_fields</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>dict</computeroutput>   </para>
</entry><entry thead="no"><para>A dictionary of asset-specific fields.   </para>
</entry></row>
</table>
</para>
<para><emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:52-63]()</emphasis></para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1535">
<title>MetricsResponse</title><para><table rows="7" cols="3"><row>
<entry thead="yes"><para>Field   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>total_assets</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>int</computeroutput>   </para>
</entry><entry thead="no"><para>Total number of assets in the graph.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>total_relationships</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>int</computeroutput>   </para>
</entry><entry thead="no"><para>Total number of relationships.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>network_density</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>The density of the network graph.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>average_degree</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>The average number of connections per node.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>max_degree</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>int</computeroutput>   </para>
</entry><entry thead="no"><para>The highest number of connections for any single node.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>asset_class_distribution</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>dict</computeroutput>   </para>
</entry><entry thead="no"><para>A count of assets per asset class.   </para>
</entry></row>
</table>
</para>
<para><emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:72-80]()</emphasis></para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1536">
<title>Error Handling</title><para>The API includes a generic exception handler that catches any unhandled server-side errors. This prevents internal stack traces from being exposed to the client and returns a standard <computeroutput>500 Internal Server Error</computeroutput> response. Specific errors, such as a non-existent asset, result in a <computeroutput>404 Not Found</computeroutput> status code.</para>
<para><emphasis>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:205-217](), [<ref refid="test__api__main_8py" kindref="compound">tests/unit/test_api_main.py</ref>:316-332]()</emphasis></para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1537">
<title>Summary</title><para>The FastAPI application provides a robust and modern API layer that decouples the frontend from the core Python logic. It leverages a thread-safe singleton pattern for efficient data management and uses Pydantic for reliable data validation. The well-defined endpoints supply all necessary data for the Next.js frontend to deliver a rich, interactive user experience for exploring financial asset relationships.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1538">
<title>API Authentication</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/api/auth.py">api/auth.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/api/main.py">api/main.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/tests/integration/test_api_integration.py">tests/integration/test_api_integration.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/SECURITY.md">SECURITY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/INTEGRATION_SUMMARY.md">INTEGRATION_SUMMARY.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1539">
<title>API Authentication</title><para>The Financial Asset Relationship Database API employs an OAuth2 Password Flow with JSON Web Tokens (JWT) to secure its endpoints. This system ensures that only authenticated users can access protected resources. The implementation is built using FastAPI&apos;s security utilities, providing a standardized and robust authentication mechanism.</para>
<para>The core logic is encapsulated within <computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref></computeroutput>, which handles user verification, token creation, and decoding. The main API application, defined in <computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput>, integrates this authentication module to expose a token issuance endpoint and protect specific routes. The entire flow is validated through integration tests found in <computeroutput><ref refid="test__api__integration_8py" kindref="compound">tests/integration/test_api_integration.py</ref></computeroutput>.</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1540">
<title>Architecture and Core Components</title><para>The authentication system is composed of several key parts: data models for users and tokens, functions for handling the authentication logic, and API endpoints for user interaction.</para>
<para>Sources: [<ref refid="auth_8py" kindref="compound">api/auth.py</ref>](), [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1541">
<title>Data Models</title><para>Pydantic models are used to define the data structures for users and tokens, ensuring type safety and validation.</para>
<para>This diagram illustrates the Pydantic models used for authentication.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Token<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+access_token:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+token_type:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>TokenData<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+username:<sp/>str<sp/>|<sp/>None</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>User<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+username:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+email:<sp/>str<sp/>|<sp/>None</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+full_name:<sp/>str<sp/>|<sp/>None</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+disabled:<sp/>bool<sp/>|<sp/>None</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>UserInDB<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+hashed_password:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User<sp/>&lt;|--<sp/>UserInDB</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Token<sp/>--|&gt;<sp/>TokenData<sp/>:<sp/>&quot;Decodes<sp/>to&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>UserInDB<sp/>--|&gt;<sp/>User<sp/>:<sp/>&quot;Extends&quot;</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="auth_8py" kindref="compound">api/auth.py</ref>:28-51]()</para>
<para><table rows="5" cols="4"><row>
<entry thead="yes"><para>Model   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Fields   </para>
</entry><entry thead="yes"><para>Source File    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>User</computeroutput>   </para>
</entry><entry thead="no"><para>Basic user model.   </para>
</entry><entry thead="no"><para><computeroutput>username</computeroutput>, <computeroutput>email</computeroutput>, <computeroutput>full_name</computeroutput>, <computeroutput>disabled</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:43-47</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>UserInDB</computeroutput>   </para>
</entry><entry thead="no"><para>Extends <computeroutput>User</computeroutput> to include the hashed password for storage.   </para>
</entry><entry thead="no"><para>Inherits from <computeroutput>User</computeroutput>, adds <computeroutput>hashed_password</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:50-51</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>Token</computeroutput>   </para>
</entry><entry thead="no"><para>Represents the access token returned to the client.   </para>
</entry><entry thead="no"><para><computeroutput>access_token</computeroutput>, <computeroutput>token_type</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:28-30</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>TokenData</computeroutput>   </para>
</entry><entry thead="no"><para>Represents the data encoded within the JWT.   </para>
</entry><entry thead="no"><para><computeroutput>username</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:33-34</computeroutput>   </para>
</entry></row>
</table>
</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1542">
<title>Configuration</title><para>Authentication behavior is configured through environment variables. A hardcoded user database is present for simplicity, with credentials also loaded from the environment.</para>
<para><table rows="8" cols="4"><row>
<entry thead="yes"><para>Variable   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Default Value   </para>
</entry><entry thead="yes"><para>Source File    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>SECRET_KEY</computeroutput>   </para>
</entry><entry thead="no"><para>A secret string for encoding and decoding JWTs.   </para>
</entry><entry thead="no"><para>&quot;a_very_secret_key&quot;   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:18</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>ALGORITHM</computeroutput>   </para>
</entry><entry thead="no"><para>The algorithm used for JWT signing.   </para>
</entry><entry thead="no"><para>&quot;HS256&quot;   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:19</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>ACCESS_TOKEN_EXPIRE_MINUTES</computeroutput>   </para>
</entry><entry thead="no"><para>The token&apos;s validity period in minutes.   </para>
</entry><entry thead="no"><para>30   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:20</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>ADMIN_USERNAME</computeroutput>   </para>
</entry><entry thead="no"><para>Username for the default admin user.   </para>
</entry><entry thead="no"><para>&quot;admin&quot;   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:57</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>ADMIN_PASSWORD</computeroutput>   </para>
</entry><entry thead="no"><para>Password for the default admin user.   </para>
</entry><entry thead="no"><para>&quot;admin&quot;   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:58</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>ADMIN_EMAIL</computeroutput>   </para>
</entry><entry thead="no"><para>Email for the default admin user.   </para>
</entry><entry thead="no"><para>&quot;admin@example.com&quot;   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:59</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>ADMIN_FULL_NAME</computeroutput>   </para>
</entry><entry thead="no"><para>Full name for the default admin user.   </para>
</entry><entry thead="no"><para>&quot;Admin User&quot;   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:60</computeroutput>   </para>
</entry></row>
</table>
</para>
<para>The use of these environment variables is confirmed in the integration tests. Sources: [<ref refid="auth_8py" kindref="compound">api/auth.py</ref>:17-21, 56-61](), [<ref refid="test__api__integration_8py" kindref="compound">tests/integration/test_api_integration.py</ref>:139-142]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1543">
<title>Key Functions</title><para>The authentication logic is handled by a set of functions in <computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref></computeroutput>.</para>
<para><table rows="4" cols="3"><row>
<entry thead="yes"><para>Function   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Source File    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>authenticate_user()</computeroutput>   </para>
</entry><entry thead="no"><para>Verifies a user&apos;s credentials (username and password) against the user database.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:70-79</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>create_access_token()</computeroutput>   </para>
</entry><entry thead="no"><para>Generates a new JWT for a given username and expiration time.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:82-90</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>get_current_active_user()</computeroutput>   </para>
</entry><entry thead="no"><para>A FastAPI dependency that decodes the JWT from the request header and retrieves the corresponding active user.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref>:93-111</computeroutput>   </para>
</entry></row>
</table>
</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1544">
<title>Authentication Flow</title><para>The process of obtaining and using an access token follows the standard OAuth2 Password Flow.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1545">
<title>1. Token Issuance</title><para>A client requests an access token by sending its credentials to the <computeroutput>/token</computeroutput> endpoint.</para>
<para>The following sequence diagram shows the token issuance process.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Client</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>API<sp/>as<sp/>&quot;FastAPI<sp/>App&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Auth<sp/>as<sp/>&quot;Auth<sp/>Module&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Client-&gt;&gt;API:<sp/>POST<sp/>/token<sp/>(username,<sp/>password)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>API</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>API-&gt;&gt;Auth:<sp/>authenticate_user(username,<sp/>password)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Auth</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>right<sp/>of<sp/>Auth:<sp/>Verifies<sp/>password<sp/>hash</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Auth--&gt;&gt;API:<sp/>UserInDB<sp/>object<sp/>or<sp/>False</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Auth</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>alt<sp/>Credentials<sp/>are<sp/>valid</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>API-&gt;&gt;Auth:<sp/>create_access_token(data={&quot;sub&quot;:<sp/>username})</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>activate<sp/>Auth</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Note<sp/>right<sp/>of<sp/>Auth:<sp/>Encodes<sp/>JWT<sp/>with<sp/>SECRET_KEY</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Auth--&gt;&gt;API:<sp/>access_token</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deactivate<sp/>Auth</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>API--&gt;&gt;Client:<sp/>200<sp/>OK<sp/>{<sp/>&quot;access_token&quot;:<sp/>&quot;...&quot;,<sp/>&quot;token_type&quot;:<sp/>&quot;bearer&quot;<sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>else<sp/>Credentials<sp/>are<sp/>invalid</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>API--xClient:<sp/>401<sp/>Unauthorized</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>API</highlight></codeline>
</programlisting></para>
<para>This flow is initiated by the <computeroutput>login_for_access_token</computeroutput> function in <computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput>, which handles the <computeroutput>/token</computeroutput> endpoint. Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:129-142](), [<ref refid="auth_8py" kindref="compound">api/auth.py</ref>:70-90](), [<ref refid="test__api__integration_8py" kindref="compound">tests/integration/test_api_integration.py</ref>:137-150]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1546">
<title>2. Accessing Protected Endpoints</title><para>Once the client has an access token, it can access protected endpoints by including the token in the <computeroutput>Authorization</computeroutput> header.</para>
<para>This flowchart shows how a request to a protected endpoint is validated.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Client<sp/>sends<sp/>request<sp/>with<sp/>&apos;Authorization:<sp/>Bearer<sp/>TOKEN&apos;]<sp/>--&gt;<sp/>B{Protected<sp/>Endpoint};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C{Depends(get_current_active_user)};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D[Decode<sp/>JWT<sp/>from<sp/>header];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E{Token<sp/>valid<sp/>and<sp/>not<sp/>expired?};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--<sp/>Yes<sp/>--&gt;<sp/>F[Retrieve<sp/>username<sp/>from<sp/>token<sp/>payload];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G[Fetch<sp/>user<sp/>from<sp/>DB];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>H{User<sp/>exists<sp/>and<sp/>is<sp/>active?};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>H<sp/>--<sp/>Yes<sp/>--&gt;<sp/>I[Execute<sp/>endpoint<sp/>logic];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>I<sp/>--&gt;<sp/>J[Return<sp/>response];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--<sp/>No<sp/>--&gt;<sp/>K[HTTPException<sp/>401<sp/>Unauthorized];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>H<sp/>--<sp/>No<sp/>--&gt;<sp/>K;</highlight></codeline>
</programlisting></para>
<para>The <computeroutput>get_current_active_user</computeroutput> function serves as the FastAPI dependency that enforces this validation. Any endpoint that includes <computeroutput>Depends(get_current_active_user)</computeroutput> in its signature is automatically protected. Sources: [<ref refid="auth_8py" kindref="compound">api/auth.py</ref>:93-111](), [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:145-149]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1547">
<title>API Endpoints</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1548">
<title>Authentication Endpoints</title><para><table rows="3" cols="6"><row>
<entry thead="yes"><para>Endpoint   </para>
</entry><entry thead="yes"><para>Method   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Parameters (form-data)   </para>
</entry><entry thead="yes"><para>Response   </para>
</entry><entry thead="yes"><para>Source File    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>/token</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>POST</computeroutput>   </para>
</entry><entry thead="no"><para>Issues a JWT access token upon successful authentication.   </para>
</entry><entry thead="no"><para><computeroutput>username: str</computeroutput>, <computeroutput>password: str</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>Token</computeroutput> model   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:129-142</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>/api/users/me</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no"><para>Returns the details of the currently authenticated user. Protected endpoint.   </para>
</entry><entry thead="no"><para>None   </para>
</entry><entry thead="no"><para><computeroutput>User</computeroutput> model   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:145-149</computeroutput>   </para>
</entry></row>
</table>
</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1549">
<title>Example Usage</title><para>To obtain a token, a client sends a POST request with form data.</para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">curl<sp/>-X<sp/>POST<sp/>&quot;http://localhost:8000/token&quot;<sp/>\</highlight></codeline>
<codeline><highlight class="normal">-H<sp/>&quot;Content-Type:<sp/>application/x-www-form-urlencoded&quot;<sp/>\</highlight></codeline>
<codeline><highlight class="normal">-d<sp/>&quot;username=admin&amp;password=admin&quot;</highlight></codeline>
</programlisting></para>
<para>The response will be a JSON object containing the access token.</para>
<para><programlisting filename=".json"><codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;access_token&quot;:<sp/>&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;token_type&quot;:<sp/>&quot;bearer&quot;</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para>This token is then used to access protected endpoints.</para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">curl<sp/>-X<sp/>GET<sp/>&quot;http://localhost:8000/api/users/me&quot;<sp/>\</highlight></codeline>
<codeline><highlight class="normal">-H<sp/>&quot;Authorization:<sp/>Bearer<sp/>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="test__api__integration_8py" kindref="compound">tests/integration/test_api_integration.py</ref>:137-165]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1550">
<title>Security Considerations</title><para>The current implementation uses a simple, in-memory user database defined in <computeroutput><ref refid="auth_8py" kindref="compound">api/auth.py</ref></computeroutput>. This is suitable for development and demonstration but is not secure for a production environment. The <computeroutput><ref refid="SECURITY_8md" kindref="compound">SECURITY.md</ref></computeroutput> document recommends implementing JWT authentication, which has been done, but a production system should replace the hardcoded user store with a proper database.</para>
<para><itemizedlist>
<listitem><para><bold>User Storage</bold>: The user database is hardcoded. For production, this should be migrated to a secure database system.</para>
</listitem><listitem><para><bold>Secret Management</bold>: The <computeroutput>SECRET_KEY</computeroutput> should be managed securely via environment variables or a secrets management service, not hardcoded or left as the default.</para>
</listitem><listitem><para><bold>HTTPS</bold>: In production, the API should be served over HTTPS to protect credentials and tokens in transit.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="auth_8py" kindref="compound">api/auth.py</ref>:54-68](), [<ref refid="SECURITY_8md" kindref="compound">SECURITY.md</ref>:53-70]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1551">
<title>Summary</title><para>The API authentication system provides a secure and standard way to protect endpoints using OAuth2 and JWT. It is configured via environment variables and relies on a core <computeroutput>auth</computeroutput> module for its logic. While the current user management is basic, the overall structure is robust and follows modern security practices recommended for web APIs. The integration tests confirm that the token issuance and validation flow works as expected.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1552">
<title>Gradio Application (Legacy)</title><para><details><summary>Relevant source files</summary><para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/app.py">app.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AI_RULES.md">AI_RULES.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/UI_COMPARISON.md">UI_COMPARISON.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/pyproject.toml">pyproject.toml</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1553">
<title>Gradio Application (Legacy)</title><para>The Gradio application, defined in <computeroutput><ref refid="app_8py" kindref="compound">app.py</ref></computeroutput>, serves as the original, Python-native user interface for the Financial Asset Relationship Database. It provides an interactive web-based demo for visualizing the complex network of financial assets, exploring their relationships, and analyzing key metrics. Built using the Gradio library, it allows for rapid prototyping and direct interaction with the backend Python logic.</para>
<para>This application runs as a standalone web server and is launched via the command <computeroutput>python <ref refid="app_8py" kindref="compound">app.py</ref></computeroutput>. While it remains fully functional, it is considered the legacy UI in comparison to the newer &quot;&quot; &quot;Next.js Frontend&quot;, which offers a more modern and scalable architecture. The Gradio app is particularly suited for data scientists and Python developers who need a quick way to visualize and interact with the asset graph without requiring a separate frontend development environment.</para>
<para><emphasis>Sources: [<ref refid="app_8py" kindref="compound">app.py</ref>](), [<ref refid="UI__COMPARISON_8md" kindref="compound">UI_COMPARISON.md</ref>](), [README.md](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</emphasis></para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1554">
<title>Architecture and Core Components</title><para>The application&apos;s logic is encapsulated within the <computeroutput>FinancialAssetApp</computeroutput> class in <computeroutput><ref refid="app_8py" kindref="compound">app.py</ref></computeroutput>. This class manages the application state, handles data initialization, and defines the methods that respond to user interactions in the UI.</para>
<para><emphasis>Sources: [<ref refid="app_8py" kindref="compound">app.py</ref>:141-144]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1555">
<title><computeroutput>FinancialAssetApp</computeroutput> Class</title><para>The <computeroutput>FinancialAssetApp</computeroutput> class is the central controller for the Gradio interface. It initializes the core <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> and connects UI components to backend data processing and visualization functions.</para>
<para>The diagram below shows the key methods within the <computeroutput>FinancialAssetApp</computeroutput> class.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>FinancialAssetApp<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+graph:<sp/>AssetRelationshipGraph</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+__init__()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-_initialize_graph()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+ensure_graph()<sp/>AssetRelationshipGraph</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+create_interface()<sp/>Blocks</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+refresh_all_outputs()<sp/>Tuple</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+refresh_visualization(...)<sp/>Tuple</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+update_asset_info(asset_id)<sp/>Tuple</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+generate_formulaic_analysis()<sp/>Tuple</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+show_formula_details(formula_name)<sp/>Tuple</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-_update_metrics_text()<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-_format_formula_summary()<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="app_8py" kindref="compound">app.py</ref>:141-419]()</emphasis></para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1556">
<title>Key Methods</title><para><table rows="7" cols="3"><row>
<entry thead="yes"><para>Method   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Source    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>_initialize_graph()</computeroutput>   </para>
</entry><entry thead="no"><para>Initializes the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> by calling <computeroutput>create_real_database()</computeroutput> to fetch data from Yahoo Finance.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="app_8py" kindref="compound">app.py</ref>:146-156</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>create_interface()</computeroutput>   </para>
</entry><entry thead="no"><para>Constructs the entire Gradio UI, defining all tabs, components, and their layouts.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="app_8py" kindref="compound">app.py</ref>:421-638</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>refresh_all_outputs()</computeroutput>   </para>
</entry><entry thead="no"><para>A master function that refreshes all visualizations and reports across all tabs simultaneously.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="app_8py" kindref="compound">app.py</ref>:206-236</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>refresh_visualization()</computeroutput>   </para>
</entry><entry thead="no"><para>Updates the 2D/3D network graph based on user-selected filters (e.g., view mode, relationship types).   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="app_8py" kindref="compound">app.py</ref>:238-280</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>update_asset_info()</computeroutput>   </para>
</entry><entry thead="no"><para>Fetches and displays detailed JSON data for a selected asset in the &quot;Asset Explorer&quot; tab.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="app_8py" kindref="compound">app.py</ref>:189-204</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>generate_formulaic_analysis()</computeroutput>   </para>
</entry><entry thead="no"><para>Runs the <computeroutput>FormulaicdAnalyzer</computeroutput> and uses <computeroutput>FormulaicVisualizer</computeroutput> to create and display plots in the &quot;Formulaic Analysis&quot; tab.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="app_8py" kindref="compound">app.py</ref>:282-336</computeroutput>   </para>
</entry></row>
</table>
</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1557">
<title>Application Startup Flow</title><para>When the application is started with <computeroutput>python <ref refid="app_8py" kindref="compound">app.py</ref></computeroutput>, it follows a clear initialization sequence before launching the web interface.</para>
<para>The following flowchart illustrates the startup process.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Start<sp/>`python<sp/>app.py`]<sp/>--&gt;<sp/>B{`if<sp/>__name__<sp/>==<sp/>&quot;__main__&quot;`};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[Instantiate<sp/>`FinancialAssetApp`];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D[Call<sp/>`app._initialize_graph()`];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E[Call<sp/>`create_real_database()`<sp/>from<sp/>`real_data_fetcher.py`];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F[Fetch<sp/>data<sp/>from<sp/>yfinance];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G[Create<sp/>`AssetRelationshipGraph`<sp/>instance];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>H[Store<sp/>graph<sp/>in<sp/>`app.graph`];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>H<sp/>--&gt;<sp/>I[Call<sp/>`app.create_interface()`];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>I<sp/>--&gt;<sp/>J[Build<sp/>Gradio<sp/>UI<sp/>components];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>J<sp/>--&gt;<sp/>K[Call<sp/>`demo.launch()`];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>K<sp/>--&gt;<sp/>L[Gradio<sp/>UI<sp/>available<sp/>at<sp/>http://localhost:7860];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--<sp/>On<sp/>Error<sp/>--&gt;<sp/>M{Log<sp/>Error<sp/>&amp;<sp/>Raise};</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="app_8py" kindref="compound">app.py</ref>:641-648](), [<ref refid="app_8py" kindref="compound">app.py</ref>:146-156](), [README.md]()</emphasis></para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1558">
<title>User Interface Tabs</title><para>The UI is organized into several tabs, each serving a distinct purpose for exploring the financial asset data. The interface is built using Gradio and Plotly for visualizations.</para>
<para><emphasis>Sources: [<ref refid="app_8py" kindref="compound">app.py</ref>:424-533](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>]()</emphasis></para>
<para><table rows="7" cols="3"><row>
<entry thead="yes"><para>Tab Name   </para>
</entry><entry thead="yes"><para>Purpose   </para>
</entry><entry thead="yes"><para>Key Functions    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Network Visualization (2D/3D)</bold>   </para>
</entry><entry thead="no"><para>The main interactive view of the asset network. Supports 2D and 3D modes with extensive filtering.   </para>
</entry><entry thead="no"><para><computeroutput>refresh_visualization</computeroutput>, <computeroutput>visualize_3d_graph_with_filters</computeroutput>, <computeroutput>visualize_2d_graph</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Metrics &amp; Analytics</bold>   </para>
</entry><entry thead="no"><para>Displays quantitative statistics and charts about the network, such as asset distribution and relationship types.   </para>
</entry><entry thead="no"><para><computeroutput>update_all_metrics_outputs</computeroutput>, <computeroutput>visualize_metrics</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Schema &amp; Rules</bold>   </para>
</entry><entry thead="no"><para>Shows a generated report of the database schema, data models, and business rules for relationships.   </para>
</entry><entry thead="no"><para><computeroutput>refresh_all_outputs</computeroutput>, <computeroutput>generate_schema_report</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Asset Explorer</bold>   </para>
</entry><entry thead="no"><para>Allows users to select a specific asset from a dropdown and view its detailed attributes and connections in JSON format.   </para>
</entry><entry thead="no"><para><computeroutput>update_asset_info</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Formulaic Analysis</bold>   </para>
</entry><entry thead="no"><para>Provides advanced mathematical analysis, extracting and visualizing formulas and correlations between financial variables.   </para>
</entry><entry thead="no"><para><computeroutput>generate_formulaic_analysis</computeroutput>, <computeroutput>show_formula_details</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Documentation</bold>   </para>
</entry><entry thead="no"><para>A static tab containing help text and a quick start guide on how to use the application.   </para>
</entry><entry thead="no"><para>N/A (Static Markdown)   </para>
</entry></row>
</table>
</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1559">
<title>Network Visualization Tab</title><para>This is the primary tab for visual exploration. It provides numerous controls to filter and customize the graph view.</para>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1560">
<title>Visualization Controls</title><para><table rows="5" cols="5"><row>
<entry thead="yes"><para>Control   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Options   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Source    </para>
</entry></row>
<row>
<entry thead="no"><para>Visualization Mode   </para>
</entry><entry thead="no"><para>Radio   </para>
</entry><entry thead="no"><para><computeroutput>3D</computeroutput>, <computeroutput>2D</computeroutput>   </para>
</entry><entry thead="no"><para>Toggles between 2D and 3D graph layouts.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="app_8py" kindref="compound">app.py</ref>:437</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para>2D Layout Type   </para>
</entry><entry thead="no"><para>Radio   </para>
</entry><entry thead="no"><para><computeroutput>spring</computeroutput>, <computeroutput>circular</computeroutput>, <computeroutput>grid</computeroutput>   </para>
</entry><entry thead="no"><para>Selects the algorithm for the 2D graph layout. Visible only in 2D mode.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="app_8py" kindref="compound">app.py</ref>:441</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para>Relationship Filters   </para>
</entry><entry thead="no"><para>Checkbox   </para>
</entry><entry thead="no"><para>(Multiple)   </para>
</entry><entry thead="no"><para>A series of checkboxes to toggle the visibility of different relationship types (e.g., &quot;Same Sector&quot;, &quot;Regulatory Impact&quot;).   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="app_8py" kindref="compound">app.py</ref>:451-465</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para>Show Direction Arrows   </para>
</entry><entry thead="no"><para>Checkbox   </para>
</entry><entry thead="no"><para><computeroutput>True</computeroutput>, <computeroutput>False</computeroutput>   </para>
</entry><entry thead="no"><para>Toggles the visibility of arrows indicating relationship direction in the 3D view.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="app_8py" kindref="compound">app.py</ref>:466</computeroutput>   </para>
</entry></row>
</table>
</para>
<para><emphasis>Sources: [<ref refid="app_8py" kindref="compound">app.py</ref>:432-466]()</emphasis></para>
</sect4>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1561">
<title>Event Handling and Data Flow</title><para>User interactions in the Gradio UI trigger specific Python methods in the <computeroutput>FinancialAssetApp</computeroutput> class. The <computeroutput>gr.State</computeroutput> component is used to maintain the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> object between events.</para>
<para>The sequence diagram below shows a typical user interaction: changing a filter and refreshing the 3D visualization.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>User</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Gradio_UI<sp/>as<sp/>&quot;Gradio<sp/>UI&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>FinancialAssetApp<sp/>as<sp/>&quot;app.py&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>GraphVisuals<sp/>as<sp/>&quot;graph_visuals.py&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User-&gt;&gt;Gradio_UI:<sp/>Clicks<sp/>&apos;Show<sp/>Regulatory&apos;<sp/>checkbox</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Gradio_UI-&gt;&gt;FinancialAssetApp:<sp/>Calls<sp/>refresh_visualization()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>over<sp/>FinancialAssetApp:<sp/>Passes<sp/>current<sp/>state<sp/>of<sp/>all<sp/>filter<sp/>checkboxes</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FinancialAssetApp-&gt;&gt;FinancialAssetApp:<sp/>ensure_graph()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FinancialAssetApp-&gt;&gt;GraphVisuals:<sp/>visualize_3d_graph_with_filters(graph,<sp/>filters)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>GraphVisuals--&gt;&gt;FinancialAssetApp:<sp/>Returns<sp/>Plotly<sp/>Figure<sp/>object</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FinancialAssetApp--&gt;&gt;Gradio_UI:<sp/>Returns<sp/>Figure<sp/>and<sp/>error<sp/>state</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Gradio_UI--&gt;&gt;User:<sp/>Updates<sp/>3D<sp/>Plot<sp/>component</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="app_8py" kindref="compound">app.py</ref>:596-601](), [<ref refid="app_8py" kindref="compound">app.py</ref>:238-280]()</emphasis></para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1562">
<title>Dependencies</title><para>The Gradio application relies on several key Python libraries defined in the project&apos;s configuration.</para>
<para><table rows="5" cols="3"><row>
<entry thead="yes"><para>Library   </para>
</entry><entry thead="yes"><para>Usage   </para>
</entry><entry thead="yes"><para>Source    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>gradio</computeroutput>   </para>
</entry><entry thead="no"><para>The core framework for building the web UI.   </para>
</entry><entry thead="no"><para><computeroutput>pyproject.toml:16</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>plotly</computeroutput>   </para>
</entry><entry thead="no"><para>The exclusive library used for all 2D and 3D visualizations.   </para>
</entry><entry thead="no"><para><computeroutput>pyproject.toml:17</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>pandas</computeroutput>   </para>
</entry><entry thead="no"><para>Used for data manipulation before visualization.   </para>
</entry><entry thead="no"><para><computeroutput>pyproject.toml:22</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>yfinance</computeroutput>   </para>
</entry><entry thead="no"><para>Fetches real-time financial data to populate the graph.   </para>
</entry><entry thead="no"><para><computeroutput>pyproject.toml:20</computeroutput>   </para>
</entry></row>
</table>
</para>
<para><emphasis>Sources: [pyproject.toml:15-23](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>]()</emphasis></para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1563">
<title>Conclusion</title><para>The <computeroutput><ref refid="app_8py" kindref="compound">app.py</ref></computeroutput> file provides a powerful, self-contained, and interactive tool for financial data analysis. As the original UI, it demonstrates the core value of the project by enabling direct, visual interaction with the asset relationship graph. While the project has evolved to include a more modern Next.js frontend, the Gradio application remains a valuable asset for rapid development, debugging, and Python-centric data exploration.</para>
<para><emphasis>Sources: [<ref refid="app_8py" kindref="compound">app.py</ref>](), [<ref refid="UI__COMPARISON_8md" kindref="compound">UI_COMPARISON.md</ref>]()</emphasis></para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1564">
<title>Frontend Components</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1565">
<title>Next.js Frontend Overview</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/README.md">frontend/README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/package.json">frontend/package.json</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/INTEGRATION_SUMMARY.md">INTEGRATION_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/QUICK_START.md">QUICK_START.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/TESTING_GUIDE.md">TESTING_GUIDE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/__tests__/config/package-validation.test.ts">frontend/**tests**/config/package-validation.test.ts</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/UI_COMPARISON.md">UI_COMPARISON.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1566">
<title>Next.js Frontend Overview</title><para>The Next.js frontend is a modern, responsive, and type-safe web application that serves as the primary user interface for the Financial Asset Relationship Database. It is built with Next.js 14, React 18, and TypeScript, offering a more feature-rich and customizable experience compared to the original Gradio UI. The application communicates with a dedicated FastAPI backend via a REST API to fetch and display complex financial data, including interactive 3D network graphs, analytical metrics, and a filterable asset explorer.</para>
<para>This frontend is designed for scalability and can be deployed on serverless platforms like Vercel. It provides a clear separation between the user interface and the core business logic, which is handled by the Python backend. For more information on the backend, see the Architecture Overview.</para>
<para>Sources: [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>](), [<ref refid="UI__COMPARISON_8md" kindref="compound">UI_COMPARISON.md</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1567">
<title>Architecture and Technology Stack</title><para>The frontend application is a client-side Next.js/React application that interacts with a Python-based FastAPI server. This architecture decouples the presentation layer from the data processing and business logic, enabling independent development and scaling.</para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:4-43](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:65-95]()</para>
<para>This diagram illustrates the high-level system architecture, showing the interaction between the Next.js frontend, the FastAPI backend, and the core Python logic.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>User_Browser</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[Next.js<sp/>UI<sp/>on<sp/>Port<sp/>3000]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Vercel_Platform</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B[FastAPI<sp/>Backend<sp/>on<sp/>Port<sp/>8000]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C[Core<sp/>Business<sp/>Logic&lt;br&gt;(asset_graph.py)]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--<sp/>&quot;REST<sp/>API<sp/>Calls<sp/>(Axios)&quot;<sp/>--&gt;<sp/>B</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>&quot;Direct<sp/>Function<sp/>Calls&quot;<sp/>--&gt;<sp/>C</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>style<sp/>A<sp/>fill:#cde4ff</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>style<sp/>B<sp/>fill:#d5f0d5</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:120-136](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:65-95]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1568">
<title>Technology Stack</title><para>The frontend leverages a modern web development stack to deliver a high-quality user experience.</para>
<para><table rows="10" cols="3"><row>
<entry thead="yes"><para>Technology   </para>
</entry><entry thead="yes"><para>Version   </para>
</entry><entry thead="yes"><para>Purpose    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Next.js</bold>   </para>
</entry><entry thead="no"><para><computeroutput>14.2.35</computeroutput>   </para>
</entry><entry thead="no"><para>React framework for server-side rendering, routing, and build optimization.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>React</bold>   </para>
</entry><entry thead="no"><para><computeroutput>^18.2.0</computeroutput>   </para>
</entry><entry thead="no"><para>UI library for building components.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>TypeScript</bold>   </para>
</entry><entry thead="no"><para><computeroutput>^5.3.0</computeroutput>   </para>
</entry><entry thead="no"><para>Provides static typing for code quality and maintainability.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Tailwind CSS</bold>   </para>
</entry><entry thead="no"><para><computeroutput>^3.3.0</computeroutput>   </para>
</entry><entry thead="no"><para>A utility-first CSS framework for styling.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Plotly.js</bold>   </para>
</entry><entry thead="no"><para><computeroutput>^2.27.0</computeroutput>   </para>
</entry><entry thead="no"><para>Library for creating interactive 2D and 3D visualizations.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Recharts</bold>   </para>
</entry><entry thead="no"><para><computeroutput>^2.10.0</computeroutput>   </para>
</entry><entry thead="no"><para>A composable charting library built on React components.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Axios</bold>   </para>
</entry><entry thead="no"><para><computeroutput>^1.13.2</computeroutput>   </para>
</entry><entry thead="no"><para>HTTP client for making REST API requests to the backend.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Jest</bold>   </para>
</entry><entry thead="no"><para><computeroutput>^29.7.0</computeroutput>   </para>
</entry><entry thead="no"><para>Testing framework for unit and component tests.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>React Testing Library</bold>   </para>
</entry><entry thead="no"><para><computeroutput>^14.1.2</computeroutput>   </para>
</entry><entry thead="no"><para>Utilities for testing React components in a user-centric way.   </para>
</entry></row>
</table>
</para>
<para>Sources: [frontend/package.json:15-39](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:63-69](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:100-107]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1569">
<title>Project Structure</title><para>The <computeroutput>frontend</computeroutput> directory is organized to follow Next.js conventions, separating UI components, business logic, type definitions, and static assets.</para>
<para>This diagram shows the layout of the key directories within the <computeroutput>frontend</computeroutput> folder.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A(frontend/)<sp/>--&gt;<sp/>B(app/)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>C(public/)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>D(package.json)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>E(next.config.js)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>F(tailwind.config.js)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>G(__tests__/)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>B1(components/)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>B2(lib/)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>B3(types/)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>B4(page.tsx)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>B5(layout.tsx)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>B6(globals.css)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B1<sp/>--&gt;<sp/>B1a(NetworkVisualization.tsx)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B1<sp/>--&gt;<sp/>B1b(MetricsDashboard.tsx)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B1<sp/>--&gt;<sp/>B1c(AssetList.tsx)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B2<sp/>--&gt;<sp/>B2a(api.ts)</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:38-53](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:30-46]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1570">
<title>Key Directories and Files</title><para><table rows="12" cols="2"><row>
<entry thead="yes"><para>Path   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>app/</computeroutput>   </para>
</entry><entry thead="no"><para>Contains all application routes, components, and logic, following the Next.js App Router convention.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>app/components/</computeroutput>   </para>
</entry><entry thead="no"><para>Houses reusable React components like <computeroutput>NetworkVisualization.tsx</computeroutput>, <computeroutput>MetricsDashboard.tsx</computeroutput>, and <computeroutput>AssetList.tsx</computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>app/lib/api.ts</computeroutput>   </para>
</entry><entry thead="no"><para>The API client module responsible for all communication with the backend. It uses <computeroutput>axios</computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>app/types/api.ts</computeroutput>   </para>
</entry><entry thead="no"><para>Contains TypeScript type definitions for API request and response objects.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>app/page.tsx</computeroutput>   </para>
</entry><entry thead="no"><para>The main entry point page for the application, which integrates all the major components into a tabbed interface.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>app/layout.tsx</computeroutput>   </para>
</entry><entry thead="no"><para>The root layout component for the application.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>public/</computeroutput>   </para>
</entry><entry thead="no"><para>Stores static assets like images and fonts.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>__tests__/</computeroutput>   </para>
</entry><entry thead="no"><para>Contains all Jest tests for components, libraries, and configuration.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>package.json</computeroutput>   </para>
</entry><entry thead="no"><para>Defines project metadata, dependencies, and npm scripts.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>next.config.js</computeroutput>   </para>
</entry><entry thead="no"><para>Configuration file for the Next.js framework.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>tailwind.config.js</computeroutput>   </para>
</entry><entry thead="no"><para>Configuration file for Tailwind CSS.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:38-53](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:30-46](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:121-122]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1571">
<title>Core Components</title><para>The UI is built from a set of modular React components, each responsible for a specific feature.</para>
<para><table rows="4" cols="3"><row>
<entry thead="yes"><para>Component   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Features    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>NetworkVisualization.tsx</bold>   </para>
</entry><entry thead="no"><para>Renders the interactive 3D network graph of financial assets.   </para>
</entry><entry thead="no"><para>Uses Plotly.js, supports zoom/pan/rotate, displays node and edge details on hover.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>MetricsDashboard.tsx</bold>   </para>
</entry><entry thead="no"><para>Displays key statistics and analytics about the asset network.   </para>
</entry><entry thead="no"><para>Shows total assets, relationships, network density, and asset class distribution.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>AssetList.tsx</bold>   </para>
</entry><entry thead="no"><para>Provides a filterable and searchable table of all financial assets.   </para>
</entry><entry thead="no"><para>Allows filtering by asset class and sector.   </para>
</entry></row>
</table>
</para>
<para>These components are integrated into the main page (<computeroutput>app/page.tsx</computeroutput>) and organized within a tabbed layout, allowing users to switch between different views of the data.</para>
<para>Sources: [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:40-43](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:49-63](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:121-122, 178-185]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1572">
<title>Data Flow</title><para>User interactions in the frontend trigger API calls to the FastAPI backend to fetch data, which is then rendered by the React components. The <computeroutput>app/lib/api.ts</computeroutput> module centralizes all data-fetching logic.</para>
<para>The following sequence diagram shows the data flow for loading the 3D visualization.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>User<sp/>as<sp/>User</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>ReactComponent<sp/>as<sp/>&quot;NetworkVisualization.tsx&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>ApiClient<sp/>as<sp/>&quot;api.ts<sp/>(Axios)&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>FastAPIServer<sp/>as<sp/>&quot;FastAPI<sp/>Backend&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>CoreLogic<sp/>as<sp/>&quot;asset_graph.py&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User-&gt;&gt;ReactComponent:<sp/>Navigates<sp/>to<sp/>Visualization<sp/>Tab</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>ReactComponent</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ReactComponent-&gt;&gt;ApiClient:<sp/>getVisualizationData()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>ApiClient</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ApiClient-&gt;&gt;FastAPIServer:<sp/>GET<sp/>/api/visualization</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>FastAPIServer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FastAPIServer-&gt;&gt;CoreLogic:<sp/>get_3d_visualization_data()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>CoreLogic</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>CoreLogic--&gt;&gt;FastAPIServer:<sp/>{<sp/>nodes:<sp/>[...],<sp/>edges:<sp/>[...]<sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>CoreLogic</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FastAPIServer--&gt;&gt;ApiClient:<sp/>200<sp/>OK<sp/>with<sp/>JSON<sp/>data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>FastAPIServer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ApiClient--&gt;&gt;ReactComponent:<sp/>Returns<sp/>visualization<sp/>data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>ApiClient</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ReactComponent-&gt;&gt;ReactComponent:<sp/>Renders<sp/>data<sp/>with<sp/>Plotly.js</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>ReactComponent</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:73-95](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:10-23, 37-38]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1573">
<title>Setup and Development</title><para>To run the frontend locally, a few setup steps are required.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1574">
<title>Prerequisites</title><para><itemizedlist>
<listitem><para>Node.js 18 or higher</para>
</listitem><listitem><para>npm or yarn</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:8-9]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1575">
<title>Installation and Execution</title><para><orderedlist>
<listitem><para><bold>Install dependencies</bold> from the <computeroutput>frontend</computeroutput> directory: <computeroutput>bash npm install </computeroutput></para>
</listitem><listitem><para><bold>Configure environment variables</bold>. Create a <computeroutput>.env.local</computeroutput> file in the <computeroutput>frontend</computeroutput> directory with the URL of the running backend API: <computeroutput>env NEXT_PUBLIC_API_URL=<ulink url="http://localhost:8000">http://localhost:8000</ulink> </computeroutput></para>
</listitem><listitem><para><bold>Run the development server</bold>: <computeroutput>bash npm run dev </computeroutput> The application will be available at <computeroutput><ulink url="http://localhost:3000">http://localhost:3000</ulink></computeroutput>.</para>
</listitem></orderedlist>
</para>
<para>Sources: [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:12-24](), [<ref refid="QUICK__START_8md" kindref="compound">QUICK_START.md</ref>:41-52]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1576">
<title>NPM Scripts</title><para>The <computeroutput>package.json</computeroutput> file defines several scripts for managing the development lifecycle.</para>
<para><table rows="9" cols="2"><row>
<entry thead="yes"><para>Script   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>dev</computeroutput>   </para>
</entry><entry thead="no"><para>Starts the Next.js development server with hot-reloading.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>build</computeroutput>   </para>
</entry><entry thead="no"><para>Creates an optimized production build of the application.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>start</computeroutput>   </para>
</entry><entry thead="no"><para>Starts the production server (requires a build first).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>lint</computeroutput>   </para>
</entry><entry thead="no"><para>Runs ESLint to check for code quality and style issues.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>test</computeroutput>   </para>
</entry><entry thead="no"><para>Runs the Jest test suite.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>test:watch</computeroutput>   </para>
</entry><entry thead="no"><para>Runs tests in interactive watch mode.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>test:coverage</computeroutput>   </para>
</entry><entry thead="no"><para>Runs tests and generates a code coverage report.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>test:ci</computeroutput>   </para>
</entry><entry thead="no"><para>Runs tests in a CI-friendly mode.   </para>
</entry></row>
</table>
</para>
<para>Sources: [frontend/package.json:5-12](), [frontend/**tests**/config/package-validation.test.ts:88-95]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1577">
<title>Testing</title><para>The frontend includes a comprehensive test suite using Jest and React Testing Library. Tests cover components, the API client, and configuration files.</para>
<para><itemizedlist>
<listitem><para><bold>Component Tests</bold>: Verify that components render correctly, handle user interactions, and manage data states (loading, error, success). Key files tested include <computeroutput>AssetList.test.tsx</computeroutput>, <computeroutput>MetricsDashboard.test.tsx</computeroutput>, and <computeroutput>NetworkVisualization.test.tsx</computeroutput>.</para>
</listitem><listitem><para><bold>API Client Tests</bold>: The <computeroutput>api.test.ts</computeroutput> file ensures that the API client correctly calls backend endpoints, handles parameters, and manages success and error responses.</para>
</listitem><listitem><para><bold>Configuration Tests</bold>: The <computeroutput>package-validation.test.ts</computeroutput> file validates the <computeroutput>package.json</computeroutput> for correct dependencies, scripts, and versioning.</para>
</listitem></itemizedlist>
</para>
<para>To run the tests, use the following commands from the <computeroutput>frontend</computeroutput> directory:</para>
<para><itemizedlist>
<listitem><para><computeroutput>npm test</computeroutput>: Run all tests.</para>
</listitem><listitem><para><computeroutput>npm test -- --coverage</computeroutput>: Run tests with a coverage report.</para>
</listitem><listitem><para><computeroutput>npm test -- --watch</computeroutput>: Run tests in watch mode.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:28-36](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:92-192]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1578">
<title>Conclusion</title><para>The Next.js frontend provides a robust, modern, and maintainable interface for the Financial Asset Relationship Database. Its component-based architecture, separation from the backend API, and comprehensive testing strategy make it a scalable solution suitable for production deployment. It stands as a powerful alternative to the original Gradio UI, offering superior customization, user experience, and alignment with modern web development practices.</para>
<para>Sources: [<ref refid="UI__COMPARISON_8md" kindref="compound">UI_COMPARISON.md</ref>:13-33, 142-150](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1579">
<title>Frontend API Integration</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/app/lib/api.ts">frontend/app/lib/api.ts</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/app/types/api.ts">frontend/app/types/api.ts</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/__tests__/lib/api.test.ts">frontend/**tests**/lib/api.test.ts</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/INTEGRATION_SUMMARY.md">INTEGRATION_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/TEST_SUMMARY.md">TEST_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/README.md">frontend/README.md</ulink></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1580">
<title>Frontend API Integration</title><para>The Frontend API integration layer is a TypeScript module that serves as the exclusive communication bridge between the Next.js frontend application and the backend FastAPI server. Its primary purpose is to provide a centralized, type-safe, and testable interface for all data-fetching operations. This module abstracts the underlying HTTP communication, handled by Axios, and exposes a set of asynchronous functions tailored to the application&apos;s data requirements, such as fetching assets, relationships, network metrics, and visualization data.</para>
<para>This system is a core part of the modern web interface, which runs parallel to the original Gradio UI. The architecture ensures a clean separation between the frontend presentation logic and the backend business logic, with this API client acting as the intermediary. For more information on the overall system design, see the Architecture Overview.</para>
<para>Sources: [frontend/app/lib/api.ts](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1581">
<title>Architecture and Configuration</title><para>The API client is built around a pre-configured Axios instance. This instance sets the base URL for all API requests, which is dynamically sourced from an environment variable. This approach allows the application to seamlessly switch between different backend environments (e.g., local development, staging, production) without code changes.</para>
<para>Sources: [frontend/app/lib/api.ts:7-11](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1582">
<title>Client Initialization</title><para>An Axios instance is created with the <computeroutput>baseURL</computeroutput> set to the value of <computeroutput>NEXT_PUBLIC_API_URL</computeroutput>. If this environment variable is not set, it defaults to <computeroutput><ulink url="http://localhost:8000">http://localhost:8000</ulink></computeroutput>, ensuring functionality in a standard local development setup.</para>
<para><programlisting filename=".typescript"><codeline><highlight class="normal">//<sp/>Source:<sp/>frontend/app/lib/api.ts:7-11</highlight></codeline>
<codeline><highlight class="normal">const<sp/>apiClient<sp/>=<sp/>axios.create({</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>baseURL:<sp/>process.env.NEXT_PUBLIC_API_URL<sp/>||<sp/>&quot;http://localhost:8000&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>timeout:<sp/>10000,<sp/>//<sp/>Example<sp/>timeout</highlight></codeline>
<codeline><highlight class="normal">});</highlight></codeline>
</programlisting></para>
<para>Sources: [frontend/app/lib/api.ts:7-11](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>]()</para>
<para>The following diagram illustrates the configuration flow for the API client.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Environment]<sp/>--<sp/>reads<sp/>--&gt;<sp/>B(process.env.NEXT_PUBLIC_API_URL);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>&quot;Is<sp/>it<sp/>defined?&quot;<sp/>--&gt;<sp/>C{Use<sp/>Value};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>&quot;Is<sp/>it<sp/>undefined?&quot;<sp/>--&gt;<sp/>D[Use<sp/>Default<sp/>&apos;http://localhost:8000&apos;];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>E[axios.create({<sp/>baseURL<sp/>})];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F(apiClient<sp/>Instance);</highlight></codeline>
</programlisting></para>
<para>This diagram shows how the <computeroutput>apiClient</computeroutput> instance is configured with the correct base URL. Sources: [frontend/app/lib/api.ts:7-11](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1583">
<title>API Client Functions</title><para>The module exports a collection of functions, each corresponding to a specific backend API endpoint. These functions encapsulate the logic for making the request, handling the response data, and managing potential errors.</para>
<para>Sources: [frontend/app/lib/api.ts](), [<ref refid="TEST__SUMMARY_8md" kindref="compound">TEST_SUMMARY.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1584">
<title>Endpoint Summary</title><para>The table below maps the client functions to their respective backend API endpoints.</para>
<para><table rows="10" cols="4"><row>
<entry thead="yes" align='left'><para>Function Name   </para>
</entry><entry thead="yes" align='left'><para>HTTP Method   </para>
</entry><entry thead="yes" align='left'><para>Endpoint Path   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>healthCheck</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/health</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Checks the health of the backend API.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getAssets</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/assets</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Fetches a list of assets, with optional filtering.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getAssetDetail</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/assets/{id}</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Fetches detailed information for a single asset.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getAssetRelationships</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/assets/{id}/relationships</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Fetches relationships for a specific asset.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getAllRelationships</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/relationships</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Fetches all relationships in the graph.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getMetrics</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/metrics</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Fetches network-wide metrics.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getVisualizationData</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/visualization</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Fetches data required for the 3D network graph.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getAssetClasses</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/asset-classes</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Fetches the list of available asset classes.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>getSectors</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>GET</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>/api/sectors</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Fetches the list of available industry sectors.   </para>
</entry></row>
</table>
</para>
<para>Sources: [frontend/app/lib/api.ts](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>](), [<ref refid="TEST__SUMMARY_8md" kindref="compound">TEST_SUMMARY.md</ref>]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1585">
<title>Function Details</title><sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1586">
<title><computeroutput>getAssets</computeroutput></title><para>This function retrieves a list of financial assets. It supports optional filtering by <computeroutput>assetClass</computeroutput> and <computeroutput>sector</computeroutput>.</para>
<para><itemizedlist>
<listitem><para><bold>Parameters</bold>:<itemizedlist>
<listitem><para><computeroutput>assetClass</computeroutput> (optional, <computeroutput>string</computeroutput>): The asset class to filter by.</para>
</listitem><listitem><para><computeroutput>sector</computeroutput> (optional, <computeroutput>string</computeroutput>): The sector to filter by.</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para><bold>Returns</bold>: <computeroutput>Promise&lt;Asset[]&gt;</computeroutput></para>
</listitem></itemizedlist>
</para>
<para>The function constructs query parameters dynamically based on the provided arguments.</para>
<para>Sources: [frontend/app/lib/api.ts:25-36]()</para>
</sect4>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1587">
<title>API Call Flow Example</title><para>The following sequence diagram illustrates a typical flow when a frontend component calls the <computeroutput>getAssets</computeroutput> function.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Component<sp/>as<sp/>&quot;React<sp/>Component&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>APIClient<sp/>as<sp/>&quot;api.ts&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Axios<sp/>as<sp/>&quot;Axios<sp/>Instance&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Backend<sp/>as<sp/>&quot;FastAPI<sp/>Backend&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Component-&gt;&gt;APIClient:<sp/>getAssets({<sp/>assetClass:<sp/>&apos;Equity&apos;<sp/>})</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>APIClient</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>APIClient-&gt;&gt;Axios:<sp/>apiClient.get(&apos;/api/assets&apos;,<sp/>{<sp/>params:<sp/>{<sp/>asset_class:<sp/>&apos;Equity&apos;<sp/>}<sp/>})</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Axios</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Axios-&gt;&gt;Backend:<sp/>GET<sp/>/api/assets?asset_class=Equity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Backend</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Backend--&gt;&gt;Axios:<sp/>200<sp/>OK<sp/>(JSON:<sp/>Asset[])</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Backend</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Axios--&gt;&gt;APIClient:<sp/>Promise<sp/>resolves<sp/>with<sp/>response</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Axios</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>APIClient--&gt;&gt;Component:<sp/>return<sp/>response.data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>APIClient</highlight></codeline>
</programlisting></para>
<para>This diagram shows the journey of a request from a React component to the backend and back. Sources: [frontend/app/lib/api.ts:25-36](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1588">
<title>Data Models and Types</title><para>To ensure type safety across the application, all data structures returned by the API are strictly typed using TypeScript interfaces defined in <computeroutput>frontend/app/types/api.ts</computeroutput>. These types are used as generics in the API client functions to provide compile-time checks and editor autocompletion.</para>
<para>Sources: [frontend/app/types/api.ts](), [<ref refid="TEST__SUMMARY_8md" kindref="compound">TEST_SUMMARY.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1589">
<title>Core Data Models</title><para>The diagram below shows the main data entities and their relationships.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Asset<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+id:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+symbol:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+name:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+asset_class:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+sector:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+currency:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+market_cap:<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+price:<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+additional_fields:<sp/>object</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Relationship<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+source:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+target:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+type:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+strength:<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Metrics<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+total_assets:<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+total_relationships:<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+network_density:<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+average_degree:<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+max_degree:<sp/>AssetDegree</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+asset_class_distribution:<sp/>object</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>VisualizationData<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+nodes:<sp/>Node[]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+edges:<sp/>Edge[]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Node<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>+id:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>+label:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>+color:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>+size:<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>+details:<sp/>Asset</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Edge<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>+source:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>+target:<sp/>string</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>+strength:<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>VisualizationData<sp/>&quot;1&quot;<sp/>--<sp/>&quot;0..*&quot;<sp/>Node</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>VisualizationData<sp/>&quot;1&quot;<sp/>--<sp/>&quot;0..*&quot;<sp/>Edge</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Node<sp/>&quot;1&quot;<sp/>--<sp/>&quot;1&quot;<sp/>Asset<sp/>:<sp/>contains</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Edge<sp/>&quot;1&quot;<sp/>--<sp/>&quot;1&quot;<sp/>Relationship<sp/>:<sp/>represents</highlight></codeline>
</programlisting></para>
<para>This class diagram outlines the structure of the primary data types used in the API communication. Sources: [frontend/app/types/api.ts](), [<ref refid="TEST__SUMMARY_8md" kindref="compound">TEST_SUMMARY.md</ref>]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1590">
<title><computeroutput>Asset</computeroutput> Interface</title><para><table rows="10" cols="3"><row>
<entry thead="yes" align='left'><para>Property   </para>
</entry><entry thead="yes" align='left'><para>Type   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>id</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Unique identifier for the asset.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>symbol</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The ticker symbol or identifier.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>name</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The full name of the asset.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>asset_class</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The class of the asset (e.g., &apos;Equity&apos;, &apos;Bond&apos;).    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>sector</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The industry sector.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>currency</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The currency the asset is priced in (ISO code).    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>market_cap</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>number</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The market capitalization.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>price</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>number</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The current price of the asset.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>additional_fields</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>Record&lt;string, any&gt;</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>A key-value map for asset-specific data.   </para>
</entry></row>
</table>
</para>
<para>Sources: [frontend/app/types/api.ts:1-11]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1591">
<title>Error Handling</title><para>Error handling is implemented using <computeroutput>try...catch</computeroutput> blocks within each API function. The client is designed to catch errors thrown by Axios, which are typically instances of <computeroutput>AxiosError</computeroutput>. The caught error is logged to the console, and the function re-throws the error to allow the calling component to implement its own UI-specific error handling logic (e.g., displaying a notification or a fallback UI).</para>
<para>The test suite validates this behavior by mocking various error scenarios, including network errors, timeouts, and HTTP status codes like 404 and 500.</para>
<para>Sources: [frontend/app/lib/api.ts](), [frontend/**tests**/lib/api.test.ts]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1592">
<title>Error Handling Flow</title><para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Component<sp/>calls<sp/>API<sp/>function]<sp/>--&gt;<sp/>B{try...catch<sp/>block};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>&quot;try&quot;<sp/>--&gt;<sp/>C[apiClient<sp/>makes<sp/>HTTP<sp/>request];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D{Request<sp/>Successful?};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>Yes<sp/>--&gt;<sp/>E[Return<sp/>response.data];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>No<sp/>--&gt;<sp/>F[Axios<sp/>throws<sp/>error];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G[catch<sp/>(error)<sp/>block];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>H[Log<sp/>error<sp/>to<sp/>console];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>H<sp/>--&gt;<sp/>I[Re-throw<sp/>error];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>I<sp/>--&gt;<sp/>J[Calling<sp/>component<sp/>handles<sp/>error];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>J;</highlight></codeline>
</programlisting></para>
<para>This flowchart shows the standardized error handling process for all API calls. Sources: [frontend/app/lib/api.ts:13-23](), [frontend/**tests**/lib/api.test.ts]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1593">
<title>Testing</title><para>The API client is extensively tested using Jest. The tests cover every exported function and validate multiple scenarios:</para>
<para><itemizedlist>
<listitem><para><bold>Configuration</bold>: Ensures the Axios instance is created correctly.</para>
</listitem><listitem><para><bold>Successful Responses</bold>: Verifies that data is returned in the expected format.</para>
</listitem><listitem><para><bold>Filtering</bold>: Confirms that query parameters are correctly passed for functions like <computeroutput>getAssets</computeroutput>.</para>
</listitem><listitem><para><bold>Error Handling</bold>: Mocks network errors, HTTP 404/500 errors, and timeouts to ensure they are handled gracefully.</para>
</listitem><listitem><para><bold>Type Safety</bold>: The tests are written in TypeScript, implicitly validating the data models.</para>
</listitem></itemizedlist>
</para>
<para>These tests provide a safety net against regressions and ensure the API client remains reliable and consistent with the backend contract.</para>
<para>Sources: [frontend/**tests**/lib/api.test.ts](), [<ref refid="TEST__SUMMARY_8md" kindref="compound">TEST_SUMMARY.md</ref>](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1594">
<title>Component: NetworkVisualization</title><para><details><summary>Relevant source files</summary><para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/app/components/NetworkVisualization.tsx">frontend/app/components/NetworkVisualization.tsx</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/__tests__/components/NetworkVisualization.test.tsx">frontend/**tests**/components/NetworkVisualization.test.tsx</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/app/types/api.ts">frontend/app/types/api.ts</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/app/page.tsx">frontend/app/page.tsx</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/api/main.py">api/main.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1595">
<title>Component: NetworkVisualization</title><para>The <computeroutput>NetworkVisualization</computeroutput> component is a client-side React component responsible for rendering an interactive 3D graph of financial assets and their relationships. It utilizes the <computeroutput>react-plotly.js</computeroutput> library to create the visualization based on data fetched from the backend API. This component is a core feature of the Next.js frontend, providing a visual representation of the interconnected financial network.</para>
<para>The component is designed to be integrated into a tabbed interface on the main application page, where it receives processed data and handles its own rendering logic, including loading and empty states.</para>
<para>Sources: [frontend/app/components/NetworkVisualization.tsx](), [frontend/app/page.tsx:16](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1596">
<title>Component Architecture</title><para>The component receives visualization data as a prop and processes it into a format suitable for Plotly.js. Its internal logic handles different states: loading, empty data, and successful data rendering.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1597">
<title>Component Props</title><para>The component accepts a single prop:</para>
<para>| Prop | Type | Description | | :--<mdash/> | :--------------<mdash/> | :-------<mdash/> | ---------------------------------------------------------------------------------<mdash/> | | <computeroutput>data</computeroutput> | <computeroutput>VisualizationData | null</computeroutput> | An object containing node and edge data for the graph, or <computeroutput>null</computeroutput> if data is loading. |</para>
<para>Sources: [frontend/app/components/NetworkVisualization.tsx:11]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1598">
<title>State Management</title><para>The component is stateless and derives its entire view from the <computeroutput>data</computeroutput> prop. It implements conditional rendering based on the state of this prop:</para>
<para><orderedlist>
<listitem><para>If <computeroutput>data</computeroutput> is <computeroutput>null</computeroutput>, it displays a &quot;Loading visualization...&quot; message.</para>
</listitem><listitem><para>If <computeroutput>data</computeroutput> is present but <computeroutput>data.nodes</computeroutput> is an empty array, it displays a &quot;No visualization data available.&quot; message.</para>
</listitem><listitem><para>If <computeroutput>data</computeroutput> and <computeroutput>data.nodes</computeroutput> are populated, it renders the Plotly graph.</para>
</listitem></orderedlist>
</para>
<para>Sources: [frontend/app/components/NetworkVisualization.tsx:14-19]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1599">
<title>Rendering Flow</title><para>The following diagram illustrates the component&apos;s rendering logic.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Component<sp/>Renders]<sp/>--&gt;<sp/>B{Is<sp/>`data`<sp/>prop<sp/>null?};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>Yes<sp/>--&gt;<sp/>C[Display<sp/>&quot;Loading<sp/>visualization...&quot;];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>No<sp/>--&gt;<sp/>D{Is<sp/>`data.nodes`<sp/>empty?};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>Yes<sp/>--&gt;<sp/>E[Display<sp/>&quot;No<sp/>visualization<sp/>data<sp/>available.&quot;];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>No<sp/>--&gt;<sp/>F[Process<sp/>Nodes<sp/>and<sp/>Edges];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G[Configure<sp/>Plotly<sp/>Data<sp/>and<sp/>Layout];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>H[Render<sp/>Plotly<sp/>3D<sp/>Graph];</highlight></codeline>
</programlisting></para>
<para><emphasis>This diagram shows the conditional rendering path based on the <computeroutput>data</computeroutput> prop.</emphasis></para>
<para>Sources: [frontend/app/components/NetworkVisualization.tsx:13-89]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1600">
<title>Data Processing</title><para>The component receives data structured according to the <computeroutput>VisualizationData</computeroutput> type and transforms it into traces for Plotly.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1601">
<title>Input Data Structure</title><para>The <computeroutput>data</computeroutput> prop conforms to the <computeroutput>VisualizationData</computeroutput> interface, which is defined in <computeroutput>frontend/app/types/api.ts</computeroutput>.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>VisualizationData<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+Node[]<sp/>nodes</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+Edge[]<sp/>edges</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Node<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+string<sp/>id</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+string<sp/>label</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+string<sp/>color</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+number<sp/>size</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+number<sp/>x</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+number<sp/>y</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+number<sp/>z</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Edge<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+string<sp/>source</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+string<sp/>target</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+string<sp/>color</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+number<sp/>width</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>VisualizationData<sp/>&quot;1&quot;<sp/>*--<sp/>&quot;0..*&quot;<sp/>Node</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>VisualizationData<sp/>&quot;1&quot;<sp/>*--<sp/>&quot;0..*&quot;<sp/>Edge</highlight></codeline>
</programlisting></para>
<para><emphasis>This diagram shows the structure of the <computeroutput>VisualizationData</computeroutput> object, including its <computeroutput>Node</computeroutput> and <computeroutput>Edge</computeroutput> arrays.</emphasis></para>
<para>Sources: [frontend/app/types/api.ts:25-41]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1602">
<title>Node and Edge Transformation</title><para>The component processes the <computeroutput>nodes</computeroutput> and <computeroutput>edges</computeroutput> arrays to create separate traces for the Plotly chart.</para>
<para><orderedlist>
<listitem><para><bold>Node Processing</bold>: It iterates through <computeroutput>data.nodes</computeroutput> to create a <computeroutput>scatter3d</computeroutput> trace. The <computeroutput>x</computeroutput>, <computeroutput>y</computeroutput>, <computeroutput>z</computeroutput>, <computeroutput>text</computeroutput>, <computeroutput>marker.color</computeroutput>, and <computeroutput>marker.size</computeroutput> properties are populated from the corresponding fields in each <computeroutput>Node</computeroutput> object. Sources: [frontend/app/components/NetworkVisualization.tsx:23-32]()</para>
</listitem><listitem><para><bold>Edge Processing</bold>: It constructs a <computeroutput>scatter3d</computeroutput> trace for the edges. For each edge, it finds the coordinates of the source and target nodes and adds them to <computeroutput>x</computeroutput>, <computeroutput>y</computeroutput>, and <computeroutput>z</computeroutput> arrays, with a <computeroutput>null</computeroutput> value in between to create separate lines for each edge. Sources: [frontend/app/components/NetworkVisualization.tsx:34-52]()</para>
</listitem></orderedlist>
</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1603">
<title>Plotly Configuration</title><para>The visualization is configured through <computeroutput>data</computeroutput> (traces) and <computeroutput>layout</computeroutput> objects passed to the <computeroutput>Plot</computeroutput> component from <computeroutput>react-plotly.js</computeroutput>.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1604">
<title>Plotly Traces</title><para>Two <computeroutput>scatter3d</computeroutput> traces are generated: one for nodes and one for edges.</para>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1605">
<title>Node Trace (<computeroutput>nodeTrace</computeroutput>)</title><para><table rows="4" cols="3"><row>
<entry thead="yes" align='left'><para>Property   </para>
</entry><entry thead="yes" align='left'><para>Value   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>x</computeroutput>, <computeroutput>y</computeroutput>, <computeroutput>z</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Arrays of coordinates from <computeroutput>data.nodes</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Positions the nodes in 3D space.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>text</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Array of labels from <computeroutput>data.nodes</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Text to display on hover.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>mode</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><lsquo/>&apos;markers<rsquo/><computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Renders nodes as markers (points). \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowEven&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>hoverinfo<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>&apos;text&apos;<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Shows only the</computeroutput>text<computeroutput>field on hover. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowOdd&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>marker.color<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Array of colors from</computeroutput>data.nodes<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Sets the color for each node. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowEven&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>marker.size<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Array of sizes from</computeroutput>data.nodes<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Sets the size for each node. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowOdd&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>marker.sizemode<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>&apos;diameter&apos;<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Interprets</computeroutput>size` as the marker diameter.   </para>
</entry></row>
</table>
</para>
<para>Sources: [frontend/app/components/NetworkVisualization.tsx:21-33]()</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1606">
<title>Edge Trace (<computeroutput>edgeTrace</computeroutput>)</title><para><table rows="3" cols="3"><row>
<entry thead="yes" align='left'><para>Property   </para>
</entry><entry thead="yes" align='left'><para>Value   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>x</computeroutput>, <computeroutput>y</computeroutput>, <computeroutput>z</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Arrays of interleaved source/target coordinates separated by <computeroutput>null</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Defines the start and end points for each edge line.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>mode</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><lsquo/>&apos;lines<rsquo/><computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Renders edges as lines. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowOdd&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>hoverinfo<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>&apos;none&apos;<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Disables hover interactions for edges. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowEven&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>line.color<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>&apos;#888&apos;<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Sets a default gray color for all edges. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowOdd&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>line.width<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>1`   </para>
</entry><entry thead="no" align='left'><para>Sets a default width for all edges.   </para>
</entry></row>
</table>
</para>
<para>Sources: [frontend/app/components/NetworkVisualization.tsx:34-53]()</para>
</sect4>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1607">
<title>Plotly Layout</title><para>The <computeroutput>layout</computeroutput> object configures the overall appearance and behavior of the 3D scene.</para>
<para><table rows="2" cols="3"><row>
<entry thead="yes" align='left'><para>Property   </para>
</entry><entry thead="yes" align='left'><para>Value   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>title</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><lsquo/>&apos;Financial Asset Relationship Network<rsquo/><computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; The title of the graph. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowEven&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>autosize<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>true<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Allows the plot to fill its container. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowOdd&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>showlegend<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>false<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Hides the plot legend. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowEven&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>scene.xaxis.visible<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>false<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Hides the x-axis lines, labels, and grid. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowOdd&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>scene.yaxis.visible<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>false<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Hides the y-axis lines, labels, and grid. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowEven&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>scene.zaxis.visible<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>false<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Hides the z-axis lines, labels, and grid. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowOdd&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>margin<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>{ l: 0, r: 0, b: 0, t: 40 }<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Removes margins around the plot area. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowEven&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>paper_bgcolor<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>&apos;#f0f2f5&apos;<computeroutput>(light) or</computeroutput>&apos;#1a202c&apos;<computeroutput>(dark) \ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt; Sets the background color of the plot container. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;markdownTableRowOdd&quot;&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>plot_bgcolor<computeroutput>\ilinebr &lt;/td&gt; &lt;td class=&quot;markdownTableBodyLeft&quot;&gt;</computeroutput>&apos;#f0f2f5&apos;<computeroutput>(light) or</computeroutput>&apos;#1a202c&apos;` (dark)   </para>
</entry><entry thead="no" align='left'><para>Sets the background color of the plotting area.   </para>
</entry></row>
</table>
</para>
<para><emphasis>Note: Background colors are conditionally set based on the theme, but the provided file only shows one set of values.</emphasis> Sources: [frontend/app/components/NetworkVisualization.tsx:55-73]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1608">
<title>Integration</title><para>The <computeroutput>NetworkVisualization</computeroutput> component is used within the main application page, <computeroutput>frontend/app/page.tsx</computeroutput>.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Page<sp/>as<sp/>&quot;app/page.tsx&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>API<sp/>as<sp/>&quot;FastAPI<sp/>Backend&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Viz<sp/>as<sp/>&quot;NetworkVisualization&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Page-&gt;&gt;API:<sp/>GET<sp/>/api/visualization</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>API--&gt;&gt;Page:<sp/>{<sp/>nodes:<sp/>[...],<sp/>edges:<sp/>[...]<sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Page-&gt;&gt;Viz:<sp/>Renders<sp/>&lt;NetworkVisualization<sp/>data={vizData}<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>over<sp/>Viz:<sp/>Component<sp/>processes<sp/>data<sp/>and<sp/>renders<sp/>Plotly<sp/>graph</highlight></codeline>
</programlisting></para>
<para><emphasis>This diagram shows how the main page fetches data and passes it to the <computeroutput>NetworkVisualization</computeroutput> component.</emphasis></para>
<para>In <computeroutput>page.tsx</computeroutput>, it is rendered inside a <computeroutput>TabsContent</computeroutput> container, making it visible when the &quot;3D Visualization&quot; tab is active. The <computeroutput>vizData</computeroutput> state from the page is passed directly to the component&apos;s <computeroutput>data</computeroutput> prop.</para>
<para>Sources: [frontend/app/page.tsx:16, 68-70](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1609">
<title>Testing</title><para>The component is tested in <computeroutput>frontend/__tests__/components/NetworkVisualization.test.tsx</computeroutput>. The tests cover several key areas:</para>
<para><itemizedlist>
<listitem><para><bold>Rendering States</bold>:<itemizedlist>
<listitem><para>It correctly displays a loading message when <computeroutput>data</computeroutput> is <computeroutput>null</computeroutput>.</para>
</listitem><listitem><para>It correctly displays an empty state message when <computeroutput>data.nodes</computeroutput> is an empty array.</para>
</listitem><listitem><para>It renders the <computeroutput>Plot</computeroutput> component when valid data is provided.</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para><bold>Data Processing</bold>:<itemizedlist>
<listitem><para>It processes node data correctly into Plotly-compatible <computeroutput>x</computeroutput>, <computeroutput>y</computeroutput>, <computeroutput>z</computeroutput>, <computeroutput>color</computeroutput>, and <computeroutput>size</computeroutput> arrays.</para>
</listitem><listitem><para>It processes edge data correctly, ensuring source and target nodes are connected.</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para><bold>Plotly Configuration</bold>:<itemizedlist>
<listitem><para>It verifies that the <computeroutput>data</computeroutput> and <computeroutput>layout</computeroutput> props passed to the <computeroutput>Plot</computeroutput> component have the correct structure and values.</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para><bold>Edge Cases</bold>:<itemizedlist>
<listitem><para>Handles scenarios with a single node and no edges.</para>
</listitem><listitem><para>Handles empty data gracefully.</para>
</listitem></itemizedlist>
</para>
</listitem></itemizedlist>
</para>
<para>Sources: [frontend/**tests**/components/NetworkVisualization.test.tsx]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1610">
<title>Summary</title><para>The <computeroutput>NetworkVisualization</computeroutput> component is a specialized, presentation-focused component that encapsulates the logic for displaying a complex 3D financial network graph. It effectively decouples the visualization logic from the data-fetching and state management concerns, which are handled by its parent component (<computeroutput>page.tsx</computeroutput>). By relying on a well-defined <computeroutput>VisualizationData</computeroutput> structure, it serves as a robust and testable module for the application&apos;s primary visual feature.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1611">
<title>Component: AssetList</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/app/components/AssetList.tsx">frontend/app/components/AssetList.tsx</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/__tests__/components/AssetList.test.tsx">frontend/**tests**/components/AssetList.test.tsx</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/app/lib/api.ts">frontend/app/lib/api.ts</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/app/types/api.ts">frontend/app/types/api.ts</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/TESTING_GUIDE.md">TESTING_GUIDE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/README.md">frontend/README.md</ulink></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1612">
<title>Component: AssetList</title><para>The <computeroutput>AssetList</computeroutput> is a stateful React component responsible for displaying a filterable and paginated list of financial assets. It fetches data from the backend API, manages loading and error states, and updates the view based on user interactions with filter and pagination controls. The component&apos;s state is synchronized with the URL query parameters, allowing for shareable and bookmarkable views.</para>
<para>Sources: [frontend/app/components/AssetList.tsx](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:30-34]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1613">
<title>Architecture and Data Flow</title><para>The component&apos;s logic is centered around a <computeroutput>useEffect</computeroutput> hook that triggers data fetching whenever URL search parameters change. It uses hooks from <computeroutput>next/navigation</computeroutput> to read and write to the URL, creating a single source of truth for the component&apos;s state.</para>
<para>Sources: [frontend/app/components/AssetList.tsx:41-69]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1614">
<title>Component Lifecycle and State Management</title><para>The following diagram illustrates the data flow from component mount to rendering the asset list.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>AssetList<sp/>Component</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[Mount]<sp/>--&gt;<sp/>B{Read<sp/>URL<sp/>Search<sp/>Params};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[Set<sp/>Initial<sp/>State<sp/>(page,<sp/>filters)];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D[useEffect<sp/>Trigger];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E{Fetch<sp/>Data<sp/>from<sp/>API};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E<sp/>--<sp/>Success<sp/>--&gt;<sp/>F[Set<sp/>Assets<sp/>&amp;<sp/>Pagination<sp/>Data];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E<sp/>--<sp/>Error<sp/>--&gt;<sp/>G[Set<sp/>Error<sp/>State];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>H[Render<sp/>Asset<sp/>Table<sp/>&amp;<sp/>Filters];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>I[Render<sp/>Error<sp/>Message];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>User<sp/>Interaction</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>J[User<sp/>changes<sp/>filter/page]<sp/>--&gt;<sp/>K[Update<sp/>URL<sp/>Search<sp/>Params];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>K<sp/>--&gt;<sp/>D;</highlight></codeline>
</programlisting></para>
<para>This diagram shows the reactive loop where changes to URL parameters trigger a data refetch. Sources: [frontend/app/components/AssetList.tsx:28-69]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1615">
<title>API Interaction</title><para><computeroutput>AssetList</computeroutput> interacts with three main functions from the API client library (<computeroutput>app/lib/api.ts</computeroutput>):</para>
<para><orderedlist>
<listitem><para><computeroutput>api.getAssetClasses()</computeroutput>: To populate the &quot;Asset Class&quot; filter dropdown.</para>
</listitem><listitem><para><computeroutput>api.getSectors()</computeroutput>: To populate the &quot;Sector&quot; filter dropdown.</para>
</listitem><listitem><para><computeroutput>api.getAssets()</computeroutput>: To fetch the paginated list of assets based on current filters.</para>
</listitem></orderedlist>
</para>
<para>Sources: [frontend/app/components/AssetList.tsx:44-50](), [frontend/**tests**/components/AssetList.test.tsx:43-45]()</para>
<para>The following sequence diagram details the process of fetching assets.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>User</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>AssetList<sp/>as<sp/>&quot;AssetList.tsx&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>APIClient<sp/>as<sp/>&quot;api.ts&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Backend<sp/>as<sp/>&quot;Backend<sp/>API&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User-&gt;&gt;AssetList:<sp/>Changes<sp/>filter<sp/>(e.g.,<sp/>selects<sp/>&apos;EQUITY&apos;)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>AssetList</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>AssetList-&gt;&gt;AssetList:<sp/>handleFilterChange()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>AssetList-&gt;&gt;AssetList:<sp/>Updates<sp/>URL<sp/>with<sp/>new<sp/>search<sp/>param</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>over<sp/>AssetList:<sp/>useEffect<sp/>hook<sp/>is<sp/>triggered<sp/>by<sp/>URL<sp/>change</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>AssetList-&gt;&gt;APIClient:<sp/>api.getAssets({<sp/>asset_class:<sp/>&apos;EQUITY&apos;,<sp/>...<sp/>})</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>AssetList</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>APIClient</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>APIClient-&gt;&gt;Backend:<sp/>GET<sp/>/api/assets?asset_class=EQUITY</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Backend</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Backend--&gt;&gt;APIClient:<sp/>PaginatedAssetsResponse</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Backend</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>APIClient--&gt;&gt;AssetList:<sp/>Promise<sp/>resolves<sp/>with<sp/>asset<sp/>data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>APIClient</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>AssetList</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>AssetList-&gt;&gt;AssetList:<sp/>Updates<sp/>state<sp/>with<sp/>new<sp/>assets</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>AssetList--&gt;&gt;User:<sp/>Renders<sp/>updated<sp/>asset<sp/>table</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>AssetList</highlight></codeline>
</programlisting></para>
<para>This diagram illustrates how a user filter change propagates through the component to the backend API and back to the UI. Sources: [frontend/app/components/AssetList.tsx:41-69](), [frontend/app/lib/api.ts:20-33]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1616">
<title><computeroutput>getAssets</computeroutput> API Parameters</title><para>The <computeroutput>getAssets</computeroutput> function accepts several parameters to filter and paginate the results.</para>
<para><table rows="5" cols="4"><row>
<entry thead="yes" align='left'><para>Parameter   </para>
</entry><entry thead="yes" align='left'><para>Type   </para>
</entry><entry thead="yes" align='left'><para>Description   </para>
</entry><entry thead="yes" align='left'><para>Source    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>page</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>number</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The page number to retrieve.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>[frontend/app/lib/api.ts:21]()</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>per_page</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>number</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The number of assets to retrieve per page.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>[frontend/app/lib/api.ts:21]()</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>asset_class</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Filters assets by their class (e.g., &apos;EQUITY&apos;).   </para>
</entry><entry thead="no" align='left'><para><computeroutput>[frontend/app/lib/api.ts:21]()</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>sector</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>string</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Filters assets by their sector (e.g., &apos;Technology&apos;).   </para>
</entry><entry thead="no" align='left'><para><computeroutput>[frontend/app/lib/api.ts:21]()</computeroutput>   </para>
</entry></row>
</table>
</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1617">
<title>UI Components</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1618">
<title>Filters</title><para>The &quot;Filters&quot; section contains two dropdown menus: &quot;Asset Class&quot; and &quot;Sector&quot;.</para>
<para><itemizedlist>
<listitem><para>The options for these dropdowns are fetched from the <computeroutput>getAssetClasses</computeroutput> and <computeroutput>getSectors</computeroutput> API endpoints on component mount.</para>
</listitem><listitem><para>Changing a filter&apos;s value triggers the <computeroutput>handleFilterChange</computeroutput> function, which updates the corresponding URL search parameter and resets the page to 1. This change automatically triggers a data refetch via the <computeroutput>useEffect</computeroutput> hook.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [frontend/app/components/AssetList.tsx:75-111](), [frontend/**tests**/components/AssetList.test.tsx:81-96]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1619">
<title>Asset Table</title><para>The main content area is a table that displays the fetched assets. If the data is loading or an error occurs, a message is displayed instead.</para>
<para><table rows="8" cols="3"><row>
<entry thead="yes" align='left'><para>Column   </para>
</entry><entry thead="yes" align='left'><para>Description   </para>
</entry><entry thead="yes" align='left'><para>Data Type    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Symbol</bold>   </para>
</entry><entry thead="no" align='left'><para>The asset&apos;s ticker symbol.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>string</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Name</bold>   </para>
</entry><entry thead="no" align='left'><para>The full name of the asset.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>string</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Asset Class</bold>   </para>
</entry><entry thead="no" align='left'><para>The class of the asset (e.g., EQUITY, BOND).   </para>
</entry><entry thead="no" align='left'><para><computeroutput>string</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Sector</bold>   </para>
</entry><entry thead="no" align='left'><para>The industry sector of the asset.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>string</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Price</bold>   </para>
</entry><entry thead="no" align='left'><para>The current price of the asset.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>number</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Market Cap</bold>   </para>
</entry><entry thead="no" align='left'><para>The market capitalization of the asset.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>number</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Currency</bold>   </para>
</entry><entry thead="no" align='left'><para>The currency of the price and market cap.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>string</computeroutput>   </para>
</entry></row>
</table>
</para>
<para>The data for this table corresponds to the <computeroutput>Asset</computeroutput> type definition. Sources: [frontend/app/components/AssetList.tsx:125-163](), [frontend/app/types/api.ts:1-10]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1620">
<title>Pagination</title><para>Pagination controls are rendered below the table.</para>
<para><itemizedlist>
<listitem><para>They include &quot;Previous&quot; and &quot;Next&quot; buttons.</para>
</listitem><listitem><para>The component calculates whether to disable these buttons based on the current <computeroutput>page</computeroutput> and the <computeroutput>total</computeroutput> number of assets returned from the API.</para>
</listitem><listitem><para>Clicking a button updates the <computeroutput>page</computeroutput> search parameter in the URL, triggering a refetch for the new page.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [frontend/app/components/AssetList.tsx:165-186](), [frontend/**tests**/components/AssetList.test.tsx:128-143]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1621">
<title>Error Handling and Loading States</title><para>The component manages its state through <computeroutput>useState</computeroutput> hooks for <computeroutput>loading</computeroutput> and <computeroutput>error</computeroutput>.</para>
<para><itemizedlist>
<listitem><para><bold>Loading</bold>: The <computeroutput>loading</computeroutput> state is <computeroutput>true</computeroutput> while an API request is in progress. The UI displays a &quot;Loading results...&quot; message.</para>
</listitem><listitem><para><bold>Error</bold>: If an API call fails, the <computeroutput>error</computeroutput> state is set with an error message. The UI displays an alert with the error, and the error is logged to the console via <computeroutput>console.error</computeroutput>.</para>
</listitem><listitem><para><bold>Empty State</bold>: If the API returns no assets, a &quot;No assets found&quot; message is displayed.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [frontend/app/components/AssetList.tsx:23-24, 60-64, 113-124](), [frontend/**tests**/components/AssetList.test.tsx:116-127]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1622">
<title>Testing</title><para>The component is tested comprehensively in <computeroutput>AssetList.test.tsx</computeroutput>. The tests cover:</para>
<para><itemizedlist>
<listitem><para>Initial component rendering.</para>
</listitem><listitem><para>Data loading and display from a mocked API.</para>
</listitem><listitem><para>Functionality of asset class and sector filters.</para>
</listitem><listitem><para>Pagination logic (next/previous page requests).</para>
</listitem><listitem><para>Correct handling of loading, empty, and error states.</para>
</listitem><listitem><para>Respecting initial state from URL query parameters on mount.</para>
</listitem></itemizedlist>
</para>
<para>The tests use <computeroutput>jest.mock</computeroutput> to mock the <computeroutput>api</computeroutput> client and <computeroutput>next/navigation</computeroutput> hooks, ensuring the component&apos;s logic is tested in isolation.</para>
<para>Sources: [frontend/**tests**/components/AssetList.test.tsx](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:73-93]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1623">
<title>Summary</title><para>The <computeroutput>AssetList</computeroutput> component serves as a robust and interactive data browser for financial assets. By leveraging URL parameters for state management, it provides a clean, shareable, and bookmarkable user experience. Its clear separation of concernsâ€”fetching data, managing state, and rendering UIâ€”makes it a maintainable and central part of the application&apos;s frontend.</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1624">
<title>Deployment and Infrastructure</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1625">
<title>Local Development Setup</title><para><details><summary>Relevant source files</summary><para>The following files were used as context for generating this wiki page:<itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/run-dev.sh">run-dev.sh</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/run-dev.bat">run-dev.bat</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/SUMMARY.md">SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/README.md">frontend/README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/INTEGRATION_SUMMARY.md">INTEGRATION_SUMMARY.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1626">
<title>Local Development Setup</title><para>The project supports multiple local development environments, including a modern Next.js frontend with a FastAPI backend, an original Gradio-based UI, and a containerized Docker setup. This guide provides instructions for setting up and running the application locally for development and testing purposes. The recommended setup for most developers is the Next.js and FastAPI combination, which can be launched with a single script.</para>
<para>For more information on the system&apos;s components and how they interact, refer to the Architecture Overview. For contribution guidelines, including coding standards and pull request processes, see the Contributing Guide.</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1627">
<title>Prerequisites</title><para>Before starting, ensure you have the following tools installed on your system.</para>
<para><table rows="5" cols="3"><row>
<entry thead="yes"><para>Tool   </para>
</entry><entry thead="yes"><para>Minimum Version   </para>
</entry><entry thead="yes"><para>Source    </para>
</entry></row>
<row>
<entry thead="no"><para>Python   </para>
</entry><entry thead="no"><para>3.8+   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para>Node.js   </para>
</entry><entry thead="no"><para>18+   </para>
</entry><entry thead="no"><para><computeroutput>README.md</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para>Git   </para>
</entry><entry thead="no"><para>N/A   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para>Virtual Env Tool   </para>
</entry><entry thead="no"><para><computeroutput>venv</computeroutput>, <computeroutput>virtualenv</computeroutput>, or <computeroutput>conda</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref></computeroutput>   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:16-20](), [README.md:8-9]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1628">
<title>Core Environment Setup</title><para>This initial setup is required for all development options except Docker. It involves creating a Python virtual environment and installing all necessary dependencies.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1629">
<title>1. Clone the Repository</title><para>First, clone your fork of the repository to your local machine. Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:25-28]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1630">
<title>2. Create and Activate Virtual Environment</title><para>It is crucial to use a virtual environment to isolate project dependencies.</para>
<para><bold>Create the environment:</bold></para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">python<sp/>-m<sp/>venv<sp/>.venv</highlight></codeline>
</programlisting></para>
<para><bold>Activate the environment:</bold></para>
<para><itemizedlist>
<listitem><para><bold>Windows (PowerShell):</bold> <computeroutput>.\.venv\Scripts\Activate.ps1</computeroutput></para>
</listitem><listitem><para><bold>Windows (Command Prompt):</bold> <computeroutput>.venv\Scripts\activate.bat</computeroutput></para>
</listitem><listitem><para><bold>macOS/Linux:</bold> <computeroutput>source .venv/bin/activate</computeroutput></para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:40-56](), [README.md:17-29]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1631">
<title>3. Install Dependencies</title><para>The project separates production and development dependencies. The <computeroutput>install-dev</computeroutput> Makefile command installs both.</para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">#<sp/>Install<sp/>all<sp/>dependencies<sp/>using<sp/>the<sp/>Makefile</highlight></codeline>
<codeline><highlight class="normal">make<sp/>install-dev</highlight></codeline>
</programlisting></para>
<para>Alternatively, you can install them manually:</para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">#<sp/>Install<sp/>production<sp/>dependencies</highlight></codeline>
<codeline><highlight class="normal">pip<sp/>install<sp/>-r<sp/>requirements.txt</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>Install<sp/>development<sp/>dependencies</highlight></codeline>
<codeline><highlight class="normal">pip<sp/>install<sp/>-r<sp/>requirements-dev.txt</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:58-68](), [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:32-33]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1632">
<title>Development Environment Options</title><para>The project can be run in three different modes for local development.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1633">
<title>Option 1: Next.js Frontend + FastAPI Backend (Recommended)</title><para>This setup runs the modern web frontend and the REST API backend. It is the recommended approach for most development tasks.</para>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1634">
<title>Automated Quick Start</title><para>The easiest way to start is by using the provided run scripts, which launch both the backend and frontend servers concurrently.</para>
<para><itemizedlist>
<listitem><para><bold>Linux/macOS:</bold> <computeroutput>./run-dev.sh</computeroutput></para>
</listitem><listitem><para><bold>Windows:</bold> <computeroutput>run-dev.bat</computeroutput></para>
</listitem></itemizedlist>
</para>
<para>This will start the FastAPI backend on <computeroutput><ulink url="http://localhost:8000">http://localhost:8000</ulink></computeroutput> and the Next.js frontend on <computeroutput><ulink url="http://localhost:3000">http://localhost:3000</ulink></computeroutput>.</para>
<para>The following diagram illustrates the process executed by the <computeroutput>run-dev</computeroutput> scripts.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Start<sp/>run-dev.sh<sp/>/<sp/>run-dev.bat]<sp/>--&gt;<sp/>B{Terminal<sp/>1};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>C{Terminal<sp/>2};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>D[Start<sp/>FastAPI<sp/>Backend];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E[&quot;uvicorn<sp/>api.main:app<sp/>--reload<sp/>--port<sp/>8000&quot;];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>F[Start<sp/>Next.js<sp/>Frontend];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>G[&quot;cd<sp/>frontend<sp/>&amp;&amp;<sp/>npm<sp/>run<sp/>dev&quot;];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>H[Backend<sp/>running<sp/>on<sp/>port<sp/>8000];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>I[Frontend<sp/>running<sp/>on<sp/>port<sp/>3000];</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md:35-42](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:129-137](), [run-dev.sh](), [run-dev.bat]()</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1635">
<title>Manual Setup</title><para>You can also start the servers manually in two separate terminals.</para>
<para><orderedlist>
<listitem><para><bold>Start the FastAPI Backend (Terminal 1):</bold> Ensure your Python virtual environment is activated.</para>
<para><computeroutput>bash python -m uvicorn <ref refid="namespaceapi_1_1main" kindref="compound">api.main</ref>:app --reload --port 8000 </computeroutput></para>
<para>The API and its auto-generated documentation will be available at <computeroutput><ulink url="http://localhost:8000">http://localhost:8000</ulink></computeroutput> and <computeroutput><ulink url="http://localhost:8000/docs">http://localhost:8000/docs</ulink></computeroutput> respectively.</para>
</listitem><listitem><para><bold>Start the Next.js Frontend (Terminal 2):</bold> <computeroutput>bash cd frontend npm install npm run dev </computeroutput> The frontend application will be accessible at <computeroutput><ulink url="http://localhost:3000">http://localhost:3000</ulink></computeroutput>.</para>
</listitem></orderedlist>
</para>
<para>The local development architecture for this option is shown below.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>&quot;Developer<sp/>Machine&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Frontend[&quot;Next.js<sp/>(npm<sp/>run<sp/>dev)&lt;br&gt;Port<sp/>3000&quot;]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Backend[&quot;FastAPI<sp/>(uvicorn)&lt;br&gt;Port<sp/>8000&quot;]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Frontend<sp/>--<sp/>&quot;HTTP<sp/>REST<sp/>API&quot;<sp/>--&gt;<sp/>Backend</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md:44-58](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:15-21](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:204-217]()</para>
</sect4>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1636">
<title>Option 2: Gradio UI (Original)</title><para>This option runs the original Python-based Gradio interface. This is useful for tasks directly related to the <computeroutput><ref refid="app_8py" kindref="compound">app.py</ref></computeroutput> logic.</para>
<para><orderedlist>
<listitem><para>Ensure your Python virtual environment is activated and dependencies are installed.</para>
</listitem><listitem><para>Run the application: <computeroutput>bash python <ref refid="app_8py" kindref="compound">app.py</ref> </computeroutput></para>
</listitem><listitem><para>The application will be available at <computeroutput><ulink url="http://localhost:7860">http://localhost:7860</ulink></computeroutput>.</para>
</listitem></orderedlist>
</para>
<para>Sources: [README.md:11-33]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1637">
<title>Option 3: Docker Installation (Alternative)</title><para>For a containerized environment that encapsulates all dependencies, you can use Docker.</para>
<para><orderedlist>
<listitem><para><bold>Using Docker Compose (Recommended):</bold> This command builds the necessary images and starts the services defined in <computeroutput>docker-compose.yml</computeroutput>.</para>
<para><computeroutput>bash docker-compose up --build </computeroutput></para>
<para>You can also use the Makefile shortcut:</para>
<para><computeroutput>bash make docker-compose-up </computeroutput></para>
</listitem><listitem><para><bold>Using Docker Directly:</bold> This method builds a single image and runs the Gradio application. <computeroutput>bash docker build -t financial-asset-db . docker run -p 7860:7860 financial-asset-db </computeroutput></para>
</listitem></orderedlist>
</para>
<para>Sources: [README.md:62-77]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1638">
<title>Development Tools and Workflow</title><para>The repository is configured with a suite of tools to ensure code quality and consistency. These are managed via <computeroutput>pre-commit</computeroutput> hooks and <computeroutput>Makefile</computeroutput> commands.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1639">
<title>Pre-commit Hooks</title><para>Pre-commit hooks automatically run checks before each commit. It is highly recommended to install them.</para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">#<sp/>Install<sp/>hooks</highlight></codeline>
<codeline><highlight class="normal">pre-commit<sp/>install</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>Or<sp/>use<sp/>the<sp/>Makefile</highlight></codeline>
<codeline><highlight class="normal">make<sp/>pre-commit</highlight></codeline>
</programlisting></para>
<para>The hooks are configured in <computeroutput>.pre-commit-config.yaml</computeroutput> and run tools like <computeroutput>black</computeroutput>, <computeroutput>isort</computeroutput>, <computeroutput>flake8</computeroutput>, and <computeroutput>mypy</computeroutput>. Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:70-76](), [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:35-36](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:195-204]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1640">
<title>Makefile Commands</title><para>The <computeroutput>Makefile</computeroutput> provides shortcuts for common development tasks.</para>
<para><table rows="10" cols="3"><row>
<entry thead="yes"><para>Command   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Source    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make help</computeroutput>   </para>
</entry><entry thead="no"><para>Show all available commands.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make install-dev</computeroutput>   </para>
</entry><entry thead="no"><para>Install both production and development dependencies.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make check</computeroutput>   </para>
</entry><entry thead="no"><para>Run all checks: format, lint, type-check, and test.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make format</computeroutput>   </para>
</entry><entry thead="no"><para>Format code with <computeroutput>black</computeroutput> and <computeroutput>isort</computeroutput>.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make lint</computeroutput>   </para>
</entry><entry thead="no"><para>Run linters (<computeroutput>flake8</computeroutput> and <computeroutput>pylint</computeroutput>).   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make type-check</computeroutput>   </para>
</entry><entry thead="no"><para>Run <computeroutput>mypy</computeroutput> type checker.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make test</computeroutput>   </para>
</entry><entry thead="no"><para>Run <computeroutput>pytest</computeroutput> with coverage.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make test-fast</computeroutput>   </para>
</entry><entry thead="no"><para>Run <computeroutput>pytest</computeroutput> without coverage.   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref></computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>make run</computeroutput>   </para>
</entry><entry thead="no"><para>Run the application (likely <computeroutput>python <ref refid="app_8py" kindref="compound">app.py</ref></computeroutput>).   </para>
</entry><entry thead="no"><para><computeroutput><ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref></computeroutput>   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:47-62](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:95-112]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1641">
<title>Running Tests</title><para>The project has separate test suites for the backend and frontend.</para>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1642">
<title>Backend Testing (Python)</title><para>Use <computeroutput>pytest</computeroutput> to run the backend tests.</para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">#<sp/>Run<sp/>all<sp/>tests</highlight></codeline>
<codeline><highlight class="normal">pytest</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>Run<sp/>with<sp/>coverage</highlight></codeline>
<codeline><highlight class="normal">pytest<sp/>--cov=src</highlight></codeline>
</programlisting></para>
<para>Makefile shortcuts are also available: <computeroutput>make test</computeroutput> or <computeroutput>make test-fast</computeroutput>. Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:173-189](), [README.md:188-196]()</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1643">
<title>Frontend Testing (TypeScript)</title><para>The frontend tests use Jest.</para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">cd<sp/>frontend</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>Run<sp/>all<sp/>tests</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>test</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>Run<sp/>tests<sp/>with<sp/>coverage</highlight></codeline>
<codeline><highlight class="normal">npm<sp/>test<sp/>--<sp/>--coverage</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md:198-206](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:25-31]()</para>
</sect4>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1644">
<title>Summary</title><para>The local development setup is flexible, offering a modern dual-server environment with Next.js and FastAPI, a legacy Gradio UI, and a containerized Docker option. The recommended path for most developers is the Next.js/FastAPI setup, which is easily launched using the <computeroutput>run-dev</computeroutput> scripts. The project is also equipped with a robust set of development tools, managed through <computeroutput>pre-commit</computeroutput> hooks and a <computeroutput>Makefile</computeroutput>, to streamline development and maintain high code quality.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1645">
<title>Docker Deployment</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/DOCKER.md">DOCKER.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/SECURITY.md">SECURITY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AUDIT_REPORT.md">AUDIT_REPORT.md</ulink></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1646">
<title>Docker Deployment</title><para>The Financial Asset Relationship Database application can be deployed and run within Docker containers, providing a consistent and isolated environment. This approach simplifies dependency management and ensures the application runs the same way regardless of the host machine. Deployment can be managed using Docker Compose for multi-container setups (including an optional database) or by building and running the application container directly with Docker.</para>
<para>While automated CI/CD workflows for publishing Docker images were removed to streamline the build process, local Docker-based deployment remains a supported and documented method for running the application.</para>
<para>Sources: [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>](), [README.md:49-62](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:83-85]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1647">
<title>Quick Start</title><para>There are two primary methods for launching the application with Docker.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1648">
<title>Using Docker Compose (Recommended)</title><para>This method builds and starts the application service defined in <computeroutput>docker-compose.yml</computeroutput>.</para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">#<sp/>Build<sp/>and<sp/>start<sp/>the<sp/>application</highlight></codeline>
<codeline><highlight class="normal">docker-compose<sp/>up<sp/>--build</highlight></codeline>
</programlisting></para>
<para>The application will be accessible at <computeroutput><ulink url="http://localhost:7860">http://localhost:7860</ulink></computeroutput>.</para>
<para>Sources: [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:6-11](), [README.md:52-54]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1649">
<title>Using Docker Directly</title><para>This method involves manually building the Docker image from the <computeroutput>Dockerfile</computeroutput> and then running it as a container.</para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">#<sp/>1.<sp/>Build<sp/>the<sp/>image</highlight></codeline>
<codeline><highlight class="normal">docker<sp/>build<sp/>-t<sp/>financial-asset-db<sp/>.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>2.<sp/>Run<sp/>the<sp/>container,<sp/>mapping<sp/>port<sp/>7860</highlight></codeline>
<codeline><highlight class="normal">docker<sp/>run<sp/>-p<sp/>7860:7860<sp/>financial-asset-db</highlight></codeline>
</programlisting></para>
<para>The application will be accessible at <computeroutput><ulink url="http://localhost:7860">http://localhost:7860</ulink></computeroutput>.</para>
<para>Sources: [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:13-20](), [README.md:56-58]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1650">
<title>Deployment Architecture</title><para>The Docker deployment isolates the application and its dependencies. The <computeroutput>docker-compose.yml</computeroutput> file orchestrates the services, including the main application and an optional PostgreSQL database.</para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:10-47](), [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:36-46]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1651">
<title>Service Interaction</title><para>The following diagram illustrates the services defined in the Docker Compose setup.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Docker<sp/>Environment</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>App_Service[app:<sp/>financial-asset-db]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Postgres_Service[postgres<sp/>(Optional)]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>User[User]<sp/>--&gt;|HTTP<sp/>Request<sp/>on<sp/>localhost:7860|<sp/>App_Service</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>App_Service<sp/>--&gt;|Connects<sp/>via<sp/>internal<sp/>network|<sp/>Postgres_Service</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>style<sp/>App_Service<sp/>fill:#d4f0fd</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>style<sp/>Postgres_Service<sp/>fill:#fcf3cf</highlight></codeline>
</programlisting></para>
<para>This diagram shows the user accessing the <computeroutput>app</computeroutput> service, which can optionally connect to a <computeroutput>postgres</computeroutput> database service within the same Docker network.</para>
<para>Sources: [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:36-46]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1652">
<title>Configuration</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1653">
<title>Docker Compose Services</title><para>The <computeroutput>docker-compose.yml</computeroutput> file describes the services, networks, and volumes. Although the file is not present, <computeroutput><ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref></computeroutput> outlines its key components: an <computeroutput>app</computeroutput> service for the Gradio application and an optional <computeroutput>postgres</computeroutput> service for data persistence. The <computeroutput>app</computeroutput> service mounts the local <computeroutput>src/</computeroutput> directory for live development.</para>
<para>Sources: [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:24-28, 36-38]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1654">
<title>Environment Variables</title><para>Application behavior is configured via environment variables set in <computeroutput>docker-compose.yml</computeroutput>.</para>
<para><table rows="4" cols="3"><row>
<entry thead="yes" align='left'><para>Variable   </para>
</entry><entry thead="yes" align='left'><para>Description   </para>
</entry><entry thead="yes" align='left'><para>Default Value    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>GRADIO_SERVER_NAME</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The host address the Gradio server binds to. <computeroutput>0.0.0.0</computeroutput> makes it accessible externally.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>0.0.0.0</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>GRADIO_SERVER_PORT</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The port the Gradio server listens on inside the container.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>7860</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>DATABASE_URL</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The connection string for the PostgreSQL database.   </para>
</entry><entry thead="no" align='left'><para><computeroutput>postgresql://finuser:changeme@postgres:5432/financial_assets</computeroutput>   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:48-53]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1655">
<title>Port Mapping</title><para>To avoid conflicts, the host port can be changed in <computeroutput>docker-compose.yml</computeroutput>. The following example maps host port <computeroutput>8080</computeroutput> to the container&apos;s port <computeroutput>7860</computeroutput>.</para>
<para><programlisting filename=".yaml"><codeline><highlight class="normal">ports:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>-<sp/>&quot;8080:7860&quot;<sp/>#<sp/>Use<sp/>port<sp/>8080<sp/>on<sp/>the<sp/>host</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:100-103]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1656">
<title>Dockerfile and Security</title><para>The project emphasizes security in its Docker configuration, following several best practices.</para>
<para>Sources: [<ref refid="SECURITY_8md" kindref="compound">SECURITY.md</ref>:13-18, 209-229](), [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:115-118]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1657">
<title>Key Security Practices</title><para><itemizedlist>
<listitem><para><bold>Non-Root User</bold>: The <computeroutput>Dockerfile</computeroutput> creates and switches to a non-root user named <computeroutput>appuser</computeroutput> to reduce potential security risks.</para>
</listitem><listitem><para><bold>Minimal <ref refid="classBase" kindref="compound">Base</ref> Image</bold>: The image is based on <computeroutput>python:3.11-slim</computeroutput> to minimize the attack surface by excluding unnecessary packages.</para>
</listitem><listitem><para><bold>No Hardcoded Secrets</bold>: Secrets and passwords should be managed through environment variables or a secrets management tool, not hardcoded in the image.</para>
</listitem><listitem><para><bold>Health Checks</bold>: The application includes health checks that Docker can use to verify the container&apos;s status.</para>
</listitem></itemizedlist>
</para>
<para>This diagram shows the flow for checking container health.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Docker<sp/>Daemon]<sp/>--<sp/>Periodically<sp/>runs<sp/>--&gt;<sp/>B{Health<sp/>Check<sp/>Command}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>Success<sp/>--&gt;<sp/>C[State:<sp/>healthy]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>Failure<sp/>--&gt;<sp/>D[State:<sp/>unhealthy]</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="SECURITY_8md" kindref="compound">SECURITY.md</ref>:15, 212-213](), [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:88-93, 116]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1658">
<title>Multi-Stage Build (Advanced)</title><para>For smaller production images, a multi-stage build is recommended. This separates the build environment from the runtime environment, ensuring the final image contains only the necessary artifacts.</para>
<para><programlisting filename=".dockerfile"><codeline><highlight class="preprocessor">#<sp/>Build<sp/>stage</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">FROM<sp/>python:3.11-slim<sp/>as<sp/>builder</highlight></codeline>
<codeline><highlight class="normal">WORKDIR<sp/>/<ref refid="namespaceapp" kindref="compound">app</ref></highlight></codeline>
<codeline><highlight class="normal">COPY<sp/>requirements.txt<sp/>.</highlight></codeline>
<codeline><highlight class="normal">RUN<sp/>pip<sp/>install<sp/>--user<sp/>--no-cache-dir<sp/>-r<sp/>requirements.txt</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#<sp/>Runtime<sp/>stage</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">FROM<sp/>python:3.11-slim</highlight></codeline>
<codeline><highlight class="normal">WORKDIR<sp/>/<ref refid="namespaceapp" kindref="compound">app</ref></highlight></codeline>
<codeline><highlight class="normal">COPY<sp/>--from=builder<sp/>/<ref refid="namespaceapi_1_1main_1a0310b837dae9253adee650f5978e92ea" kindref="member">root</ref>/.local<sp/>/<ref refid="namespaceapi_1_1main_1a0310b837dae9253adee650f5978e92ea" kindref="member">root</ref>/.local</highlight></codeline>
<codeline><highlight class="normal">COPY<sp/>.<sp/>.</highlight></codeline>
<codeline><highlight class="normal">ENV<sp/>PATH=/<ref refid="namespaceapi_1_1main_1a0310b837dae9253adee650f5978e92ea" kindref="member">root</ref>/.local/bin:$PATH</highlight></codeline>
<codeline><highlight class="normal">CMD<sp/>[</highlight><highlight class="stringliteral">&quot;python&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;app.py&quot;</highlight><highlight class="normal">]</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:128-141]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1659">
<title>Command Reference</title><para>The <computeroutput><ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref></computeroutput> file provides a comprehensive list of commands for managing the application with both Docker and Docker Compose.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1660">
<title>Docker Commands</title><para><table rows="8" cols="2"><row>
<entry thead="yes" align='left'><para>Command   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker build -t financial-asset-db .</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Build the Docker image.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker run -p 7860:7860 financial-asset-db</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Run the container and map ports.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker ps</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>List running containers.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker logs -f &lt;container_name&gt;</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Follow the logs of a container.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker stop &lt;container_name&gt;</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Stop a running container.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker rm &lt;container_name&gt;</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Remove a stopped container.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker rmi &lt;image_name&gt;</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Remove a Docker image.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:55-86]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1661">
<title>Docker Compose Commands</title><para><table rows="8" cols="2"><row>
<entry thead="yes" align='left'><para>Command   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker-compose up</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Start services in the foreground.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker-compose up -d</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Start services in detached (background) mode.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker-compose down</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Stop and remove containers, networks.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker-compose down -v</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Stop and remove containers, networks, and volumes.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker-compose build</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Rebuild service images.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker-compose up --build</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Rebuild images and then start services.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docker-compose logs -f app</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Follow logs for the <computeroutput>app</computeroutput> service.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>:88-113]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1662">
<title>Summary</title><para>Docker provides a powerful and flexible way to run the Financial Asset Relationship Database locally. Using Docker Compose is the recommended approach as it simplifies the management of the application and its optional database service. The project incorporates security best practices into its Docker setup, such as using a non-root user and minimal base images, to provide a secure runtime environment.</para>
<para>Sources: [<ref refid="DOCKER_8md" kindref="compound">DOCKER.md</ref>](), [README.md:49-62]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1663">
<title>Vercel Deployment</title><para><details><summary>Relevant source files</summary><para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/vercel.json">vercel.json</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/DEPLOYMENT.md">DEPLOYMENT.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/VERCEL_DEPLOYMENT_CHECKLIST.md">VERCEL_DEPLOYMENT_CHECKLIST.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/INTEGRATION_SUMMARY.md">INTEGRATION_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/tests/unit/test_dev_scripts.py">tests/unit/test_dev_scripts.py</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1664">
<title>Vercel Deployment</title><para>This project utilizes Vercel for deploying its integrated frontend and backend components. The deployment architecture consists of a Next.js frontend application and a Python-based FastAPI backend, which runs as a Vercel Serverless Function. This setup allows for a scalable, modern web application with a powerful Python backend for data processing and API services.</para>
<para>The Vercel deployment is configured to handle both the Next.js application and the Python API within a single project, routing requests appropriately based on the URL path. This guide provides a comprehensive overview of the deployment architecture, configuration, processes, and troubleshooting steps. For more details on the overall system design, see the <ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">Architecture Overview</ulink>.</para>
<para>Sources: [<ref refid="DEPLOYMENT_8md" kindref="compound">DEPLOYMENT.md</ref>](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1665">
<title>Architecture on Vercel</title><para>The application is deployed on Vercel as a monorepo containing two primary components: the Next.js frontend and the FastAPI backend. Vercel automatically handles the build and deployment of both.</para>
<para><itemizedlist>
<listitem><para><bold>Next.js Frontend</bold>: Served by Vercel&apos;s Edge Network, providing fast delivery of static assets and server-side rendered pages.</para>
</listitem><listitem><para><bold>Python Backend</bold>: The FastAPI application located in the <computeroutput>/api</computeroutput> directory is deployed as a Vercel Serverless Function. This function handles all API requests.</para>
</listitem></itemizedlist>
</para>
<para>The diagram below illustrates the Vercel deployment architecture.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>User</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[Internet<sp/>Users]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Vercel<sp/>Platform</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A<sp/>--<sp/>HTTPS<sp/>--&gt;<sp/>B{Vercel<sp/>Edge<sp/>Network};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B<sp/>--<sp/>/<sp/>(root)<sp/>--&gt;<sp/>C[Next.js<sp/>Frontend];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B<sp/>--<sp/>/api/...<sp/>--&gt;<sp/>D[Python<sp/>Serverless<sp/>Function];</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subgraph<sp/>Frontend</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C(Static<sp/>Pages<sp/>&amp;<sp/>React<sp/>Components)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subgraph<sp/>Backend</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D(FastAPI<sp/>App)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C<sp/>-.-&gt;<sp/>D;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>style<sp/>C<sp/>fill:#f9f,stroke:#333,stroke-width:2px</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>style<sp/>D<sp/>fill:#ccf,stroke:#333,stroke-width:2px</highlight></codeline>
</programlisting></para>
<para>This diagram shows that user requests are routed by Vercel&apos;s Edge Network. Requests to the root path (<computeroutput>/</computeroutput>) are served by the Next.js frontend, while requests to <computeroutput>/api/...</computeroutput> are directed to the Python Serverless Function running the FastAPI application.</para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>](), [<ref refid="DEPLOYMENT_8md" kindref="compound">DEPLOYMENT.md</ref>]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1666">
<title>Deployment Configuration</title><para>The core of the Vercel deployment is managed by the <computeroutput>vercel.json</computeroutput> file located in the project root. This file instructs Vercel on how to build and route the different parts of the application.</para>
<para>Sources: [vercel.json](), [<ref refid="test__dev__scripts_8py" kindref="compound">tests/unit/test_dev_scripts.py</ref>:15-23]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1667">
<title><computeroutput>vercel.json</computeroutput> Structure</title><para>The configuration is split into two main sections: <computeroutput>builds</computeroutput> and <computeroutput>routes</computeroutput>.</para>
<para><programlisting filename=".json"><codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;builds&quot;:<sp/>[</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;src&quot;:<sp/>&quot;api/main.py&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;use&quot;:<sp/>&quot;@vercel/python&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;config&quot;:<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;maxLambdaSize&quot;:<sp/>&quot;50mb&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;src&quot;:<sp/>&quot;frontend/package.json&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;use&quot;:<sp/>&quot;@vercel/next&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;routes&quot;:<sp/>[</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;src&quot;:<sp/>&quot;/api/(.*)&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;dest&quot;:<sp/>&quot;api/main.py&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;src&quot;:<sp/>&quot;/(.*)&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;dest&quot;:<sp/>&quot;frontend/$1&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>]</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para>Sources: [vercel.json](), [<ref refid="VERCEL__DEPLOYMENT__CHECKLIST_8md" kindref="compound">VERCEL_DEPLOYMENT_CHECKLIST.md</ref>:126-135]()</para>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1668">
<title>Builds Configuration</title><para>The <computeroutput>builds</computeroutput> array defines how Vercel should compile the project source code.</para>
<para><table rows="3" cols="4"><row>
<entry thead="yes" align='left'><para><computeroutput>src</computeroutput>   </para>
</entry><entry thead="yes" align='left'><para><computeroutput>use</computeroutput>   </para>
</entry><entry thead="yes" align='left'><para><computeroutput>config</computeroutput>   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>@vercel/python</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>{&quot;maxLambdaSize&quot;: &quot;50mb&quot;}</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Specifies that the Python API entrypoint is <computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput> and should be built using the Vercel Python runtime. The <computeroutput>maxLambdaSize</computeroutput> is increased to 50MB to accommodate dependencies.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>frontend/package.json</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>@vercel/next</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>N/A   </para>
</entry><entry thead="no" align='left'><para>Specifies that the <computeroutput>frontend</computeroutput> directory contains a Next.js application, identified by its <computeroutput>package.json</computeroutput> file. It will be built using the Vercel Next.js runtime.   </para>
</entry></row>
</table>
</para>
<para>Sources: [vercel.json:2-15](), [<ref refid="VERCEL__DEPLOYMENT__CHECKLIST_8md" kindref="compound">VERCEL_DEPLOYMENT_CHECKLIST.md</ref>:126-135](), [<ref refid="test__dev__scripts_8py" kindref="compound">tests/unit/test_dev_scripts.py</ref>:25-35]()</para>
</sect4>
<sect4 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1669">
<title>Routes Configuration</title><para>The <computeroutput>routes</computeroutput> array defines how incoming requests are routed to the built outputs.</para>
<para>The following diagram illustrates the routing logic defined in <computeroutput>vercel.json</computeroutput>.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Incoming<sp/>Request]<sp/>--&gt;<sp/>B{Path<sp/>Matching};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>&quot;/api/...&quot;<sp/>--&gt;<sp/>C[Route<sp/>to<sp/>api/main.py];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>&quot;/...&quot;<sp/>--&gt;<sp/>D[Route<sp/>to<sp/>frontend];</highlight></codeline>
</programlisting></para>
<para><table rows="3" cols="3"><row>
<entry thead="yes" align='left'><para><computeroutput>src</computeroutput>   </para>
</entry><entry thead="yes" align='left'><para><computeroutput>dest</computeroutput>   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>/api/(.*)</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Any request path starting with <computeroutput>/api/</computeroutput> is rewritten and handled by the Python serverless function defined in <computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>/(.*)</computeroutput>   </para>
</entry><entry thead="no" align='left'><para><computeroutput>frontend/$1</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>All other requests are routed to the Next.js application in the <computeroutput>frontend</computeroutput> directory.   </para>
</entry></row>
</table>
</para>
<para>Sources: [vercel.json:16-26](), [<ref refid="test__dev__scripts_8py" kindref="compound">tests/unit/test_dev_scripts.py</ref>:37-45]()</para>
</sect4>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1670">
<title>Deployment Process</title><para>There are two recommended methods for deploying the application to Vercel: GitHub Integration and the Vercel CLI.</para>
<para>Sources: [<ref refid="DEPLOYMENT_8md" kindref="compound">DEPLOYMENT.md</ref>:63-84](), [<ref refid="VERCEL__DEPLOYMENT__CHECKLIST_8md" kindref="compound">VERCEL_DEPLOYMENT_CHECKLIST.md</ref>:43-108]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1671">
<title>GitHub Integration (Recommended)</title><para>This method provides continuous deployment, automatically deploying changes pushed to the repository.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Dev<sp/>as<sp/>Developer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>GitHub</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Vercel</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Dev-&gt;&gt;GitHub:<sp/>git<sp/>push<sp/>origin<sp/>main</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>GitHub</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>GitHub-&gt;&gt;Vercel:<sp/>Webhook:<sp/>Code<sp/>pushed</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>GitHub</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Vercel</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Vercel--&gt;&gt;Vercel:<sp/>Auto-detects<sp/>Next.js<sp/>&amp;<sp/>Python</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Vercel--&gt;&gt;Vercel:<sp/>Runs<sp/>builds<sp/>based<sp/>on<sp/>vercel.json</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Vercel--&gt;&gt;Vercel:<sp/>Deploys<sp/>to<sp/>production<sp/>URL</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Vercel</highlight></codeline>
</programlisting></para>
<para><bold>Steps:</bold></para>
<para><orderedlist>
<listitem><para><bold>Push to GitHub</bold>: Ensure all code is committed and pushed to the <computeroutput>main</computeroutput> branch.</para>
</listitem><listitem><para><bold>Connect to Vercel</bold>: In the Vercel dashboard, create a &quot;New Project&quot; and import the GitHub repository.</para>
</listitem><listitem><para><bold>Configure Project</bold>: Vercel will auto-detect the Next.js framework. The root directory should be left as the default.</para>
</listitem><listitem><para><bold>Set Environment Variables</bold>: Add <computeroutput>NEXT_PUBLIC_API_URL</computeroutput> in the project settings.</para>
</listitem><listitem><para><bold>Deploy</bold>: Click &quot;Deploy&quot;. Vercel will build and deploy the application.</para>
</listitem></orderedlist>
</para>
<para>Sources: [<ref refid="VERCEL__DEPLOYMENT__CHECKLIST_8md" kindref="compound">VERCEL_DEPLOYMENT_CHECKLIST.md</ref>:43-78](), [<ref refid="DEPLOYMENT_8md" kindref="compound">DEPLOYMENT.md</ref>:72-84]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1672">
<title>Vercel CLI</title><para>This method is useful for manual deployments from your local machine.</para>
<para><orderedlist>
<listitem><para><bold>Install Vercel CLI</bold>: <computeroutput>bash npm install -g vercel </computeroutput></para>
</listitem><listitem><para><bold>Login</bold>: <computeroutput>bash vercel login </computeroutput></para>
</listitem><listitem><para><bold>Deploy</bold>: From the project root, run the deployment command and follow the prompts. <computeroutput>bash @section autotoc_md1673 Deploy to production vercel --prod </computeroutput> Sources: [<ref refid="VERCEL__DEPLOYMENT__CHECKLIST_8md" kindref="compound">VERCEL_DEPLOYMENT_CHECKLIST.md</ref>:80-108](), [<ref refid="DEPLOYMENT_8md" kindref="compound">DEPLOYMENT.md</ref>:63-70]()</para>
</listitem></orderedlist>
</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1674">
<title>Environment Variables</title><para>The frontend requires an environment variable to know the URL of the backend API.</para>
<para><table rows="2" cols="3"><row>
<entry thead="yes" align='left'><para>Variable   </para>
</entry><entry thead="yes" align='left'><para>Description   </para>
</entry><entry thead="yes" align='left'><para>Example Value (Production)    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>NEXT_PUBLIC_API_URL</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The absolute URL of the deployed backend API. The <computeroutput>NEXT_PUBLIC_</computeroutput> prefix makes it available in the browser.   </para>
</entry><entry thead="no" align='left'><para><computeroutput><ulink url="https://your-project.vercel.app">https://your-project.vercel.app</ulink></computeroutput>   </para>
</entry></row>
</table>
</para>
<para>This variable must be set in the Vercel project settings under &quot;Environment Variables&quot;. After the first deployment, you must update this variable with the actual Vercel project URL and redeploy if necessary.</para>
<para>Sources: [<ref refid="VERCEL__DEPLOYMENT__CHECKLIST_8md" kindref="compound">VERCEL_DEPLOYMENT_CHECKLIST.md</ref>:63-78, 100-103, 149-155](), [<ref refid="DEPLOYMENT_8md" kindref="compound">DEPLOYMENT.md</ref>:120-126]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1675">
<title>Post-Deployment and Troubleshooting</title><para>After each deployment, it is crucial to verify that the application is functioning correctly. A checklist is provided for this purpose.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1676">
<title>Verification Checklist</title><para><itemizedlist>
<listitem override="unchecked"><para>Open the deployed URL and check that the frontend loads without errors.</para>
</listitem></itemizedlist>
<itemizedlist>
<listitem override="unchecked"><para>Verify the API health by visiting <computeroutput><ulink url="https://your-project.vercel.app/api/health">https://your-project.vercel.app/api/health</ulink></computeroutput>.</para>
</listitem></itemizedlist>
<itemizedlist>
<listitem override="unchecked"><para>Test the interactive API documentation at <computeroutput><ulink url="https://your-project.vercel.app/docs">https://your-project.vercel.app/docs</ulink></computeroutput>.</para>
</listitem></itemizedlist>
<itemizedlist>
<listitem override="unchecked"><para>Test all major features: 3D visualization, metrics, and the asset explorer.</para>
</listitem></itemizedlist>
<itemizedlist>
<listitem override="unchecked"><para>Check the browser console for any CORS or JavaScript errors.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="VERCEL__DEPLOYMENT__CHECKLIST_8md" kindref="compound">VERCEL_DEPLOYMENT_CHECKLIST.md</ref>:110-124]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1677">
<title>Common Issues and Solutions</title><para><table rows="5" cols="2"><row>
<entry thead="yes" align='left'><para>Issue   </para>
</entry><entry thead="yes" align='left'><para>Solution    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Build Failed</bold>   </para>
</entry><entry thead="no" align='left'><para>Check build logs in the Vercel dashboard. Verify all dependencies are listed in <computeroutput>requirements.txt</computeroutput> and <computeroutput>frontend/package.json</computeroutput>. Run the build locally (<computeroutput>cd frontend &amp;&amp; npm run build</computeroutput>) to debug.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>API Not Found (404)</bold>   </para>
</entry><entry thead="no" align='left'><para>Ensure <computeroutput>vercel.json</computeroutput> is in the project root and correctly configured. Verify that <computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput> exists and is the correct entry point.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>CORS Errors</bold>   </para>
</entry><entry thead="no" align='left'><para>The FastAPI backend must be configured to allow origins from your Vercel domain. Update the <computeroutput>allow_origins</computeroutput> list in <computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><bold>Lambda Size Exceeded</bold>   </para>
</entry><entry thead="no" align='left'><para>The Python serverless function has a size limit. This is pre-configured to <computeroutput>50mb</computeroutput> in <computeroutput>vercel.json</computeroutput>. If this error occurs, remove unused dependencies or consider lighter alternatives.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="VERCEL__DEPLOYMENT__CHECKLIST_8md" kindref="compound">VERCEL_DEPLOYMENT_CHECKLIST.md</ref>:137-183]()</para>
<para>A code snippet for configuring CORS in <computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput>:</para>
<para><programlisting filename=".py"><codeline><highlight class="comment">#<sp/>In<sp/>api/main.py</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">app.add_middleware(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>CORSMiddleware,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>allow_origins=[</highlight><highlight class="stringliteral">&quot;https://*.vercel.app&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;https://your-domain.com&quot;</highlight><highlight class="normal">],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>allow_credentials=</highlight><highlight class="keyword">True</highlight><highlight class="normal">,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>allow_methods=[</highlight><highlight class="stringliteral">&quot;*&quot;</highlight><highlight class="normal">],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>allow_headers=[</highlight><highlight class="stringliteral">&quot;*&quot;</highlight><highlight class="normal">],</highlight></codeline>
<codeline><highlight class="normal">)</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="VERCEL__DEPLOYMENT__CHECKLIST_8md" kindref="compound">VERCEL_DEPLOYMENT_CHECKLIST.md</ref>:160-168]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1678">
<title>Configuration</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/pyproject.toml">pyproject.toml</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/api/main.py">api/main.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/next.config.js">frontend/next.config.js</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/Makefile">Makefile</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/package.json">frontend/package.json</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/SUMMARY.md">SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AUDIT_REPORT.md">AUDIT_REPORT.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/INTEGRATION_SUMMARY.md">INTEGRATION_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/.pre-commit-config.yaml">.pre-commit-config.yaml</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/.flake8">.flake8</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/requirements-dev.txt">requirements-dev.txt</ulink></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1679">
<title>Configuration</title><para>Configuration for the <computeroutput>financial-asset-relationship-db</computeroutput> project is managed through a combination of files that define the development environment, tool settings, application behavior, and deployment processes. The project uses a monorepo-like structure with distinct configurations for the Python backend and the Next.js frontend, unified by top-level tooling and scripts.</para>
<para>Key configuration files like <computeroutput>pyproject.toml</computeroutput>, <computeroutput>Makefile</computeroutput>, and <computeroutput>package.json</computeroutput> orchestrate a suite of development tools for testing, linting, and formatting, ensuring code quality and consistency. Application-level settings, such as API CORS policies and frontend build options, are handled within their respective codebases.</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1680">
<title>Project-Level Configuration</title><para>Project-level configuration centralizes development tooling and provides a consistent interface for developers through <computeroutput>Makefile</computeroutput> commands.</para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1681">
<title>Development Tooling (<computeroutput>pyproject.toml</computeroutput>)</title><para>The <computeroutput>pyproject.toml</computeroutput> file is the central configuration hub for Python development tools, standardizing settings for testing, formatting, and static analysis.</para>
<para>The diagram below shows the tools configured in <computeroutput>pyproject.toml</computeroutput>.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[pyproject.toml]<sp/>--&gt;<sp/>B[pytest]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>C[coverage]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>D[black]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>E[isort]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>F[mypy]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>G[pylint]</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Testing</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Formatting</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Static<sp/>Analysis</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>F</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>G</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
</programlisting></para>
<para>Sources: [pyproject.toml](), [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:83-90]()</para>
<para><table rows="7" cols="3"><row>
<entry thead="yes"><para>Tool   </para>
</entry><entry thead="yes"><para>Purpose   </para>
</entry><entry thead="yes"><para>Key Configurations    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>pytest</computeroutput>   </para>
</entry><entry thead="no"><para>Test runner   </para>
</entry><entry thead="no"><para>Verbose output, test markers (<computeroutput>unit</computeroutput>, <computeroutput>integration</computeroutput>, <computeroutput>slow</computeroutput>).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>coverage</computeroutput>   </para>
</entry><entry thead="no"><para>Code coverage   </para>
</entry><entry thead="no"><para>Generates HTML and XML reports, sets a failure threshold of 80%.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>black</computeroutput>   </para>
</entry><entry thead="no"><para>Code formatter   </para>
</entry><entry thead="no"><para>Line length set to 120, targets Python 3.8+.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>isort</computeroutput>   </para>
</entry><entry thead="no"><para>Import sorter   </para>
</entry><entry thead="no"><para>Uses a <computeroutput>black</computeroutput>-compatible profile.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>mypy</computeroutput>   </para>
</entry><entry thead="no"><para>Static type checker   </para>
</entry><entry thead="no"><para>Checks untyped definitions, warns on return issues.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>pylint</computeroutput>   </para>
</entry><entry thead="no"><para>Linter   </para>
</entry><entry thead="no"><para>Fails on a score below 8.0, ignores docstring warnings.   </para>
</entry></row>
</table>
</para>
<para>Sources: [pyproject.toml](), [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:83-90](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:121-127]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1682">
<title>Linter Configuration (<computeroutput>.flake8</computeroutput>)</title><para>While most tools are configured in <computeroutput>pyproject.toml</computeroutput>, <computeroutput>flake8</computeroutput> uses a dedicated <computeroutput>.flake8</computeroutput> file.</para>
<para><table rows="4" cols="3"><row>
<entry thead="yes"><para>Option   </para>
</entry><entry thead="yes"><para>Value   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>max-line-length</computeroutput>   </para>
</entry><entry thead="no"><para>120   </para>
</entry><entry thead="no"><para>Sets the maximum line length to 120 characters.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>max-complexity</computeroutput>   </para>
</entry><entry thead="no"><para>15   </para>
</entry><entry thead="no"><para>Sets the maximum cyclomatic complexity for functions.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>ignore</computeroutput>   </para>
</entry><entry thead="no"><para>E203, E501, W503   </para>
</entry><entry thead="no"><para>Ignores specific error codes that conflict with <computeroutput>black</computeroutput>.   </para>
</entry></row>
</table>
</para>
<para>Sources: [.flake8](), [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:84](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:129-134]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1683">
<title>Development Commands (<computeroutput>Makefile</computeroutput>)</title><para>The <computeroutput>Makefile</computeroutput> provides a set of shortcut commands to simplify common development tasks, orchestrating the configured tools.</para>
<para>This diagram illustrates the workflow of the <computeroutput>make check</computeroutput> command.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Start(make<sp/>check)<sp/>--&gt;<sp/>Format{make<sp/>format-check}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Format<sp/>--&gt;<sp/>Lint{make<sp/>lint}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Lint<sp/>--&gt;<sp/>TypeCheck{make<sp/>type-check}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>TypeCheck<sp/>--&gt;<sp/>Test{make<sp/>test}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Test<sp/>--&gt;<sp/>End(All<sp/>Checks<sp/>Pass)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Format<sp/>--<sp/>Fails<sp/>--&gt;<sp/>Stop_Format(Stop<sp/>&amp;<sp/>Report<sp/>Error)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Lint<sp/>--<sp/>Fails<sp/>--&gt;<sp/>Stop_Lint(Stop<sp/>&amp;<sp/>Report<sp/>Error)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>TypeCheck<sp/>--<sp/>Fails<sp/>--&gt;<sp/>Stop_Type(Stop<sp/>&amp;<sp/>Report<sp/>Error)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Test<sp/>--<sp/>Fails<sp/>--&gt;<sp/>Stop_Test(Stop<sp/>&amp;<sp/>Report<sp/>Error)</highlight></codeline>
</programlisting></para>
<para>Sources: [Makefile:54-55](), [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:65-79]()</para>
<para><table rows="8" cols="2"><row>
<entry thead="yes"><para>Command   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>install-dev</computeroutput>   </para>
</entry><entry thead="no"><para>Installs both production and development dependencies.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>pre-commit</computeroutput>   </para>
</entry><entry thead="no"><para>Installs pre-commit hooks.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>format</computeroutput>   </para>
</entry><entry thead="no"><para>Formats code using <computeroutput>black</computeroutput> and <computeroutput>isort</computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>lint</computeroutput>   </para>
</entry><entry thead="no"><para>Runs linters (<computeroutput>flake8</computeroutput> and <computeroutput>pylint</computeroutput>).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>type-check</computeroutput>   </para>
</entry><entry thead="no"><para>Runs <computeroutput>mypy</computeroutput> for static type analysis.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>test</computeroutput>   </para>
</entry><entry thead="no"><para>Runs <computeroutput>pytest</computeroutput> with code coverage.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>check</computeroutput>   </para>
</entry><entry thead="no"><para>Runs all checks: format check, lint, type-check, and test.   </para>
</entry></row>
</table>
</para>
<para>Sources: [Makefile](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:73-90]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1684">
<title>Pre-commit Hooks</title><para>The <computeroutput>.pre-commit-config.yaml</computeroutput> file configures hooks that run automatically before each commit to ensure code quality.</para>
<para>The sequence diagram below shows the pre-commit process.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Dev<sp/>as<sp/>Developer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Git<sp/>as<sp/>Git<sp/>Client</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Hooks<sp/>as<sp/>Pre-commit<sp/>Hooks</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Dev-&gt;&gt;Git:<sp/>git<sp/>commit<sp/>-m<sp/>&quot;...&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Git-&gt;&gt;Hooks:<sp/>Execute<sp/>hooks<sp/>on<sp/>staged<sp/>files</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Hooks</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Hooks-&gt;&gt;Hooks:<sp/>Run<sp/>trailing-whitespace</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Hooks-&gt;&gt;Hooks:<sp/>Run<sp/>end-of-file-fixer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Hooks-&gt;&gt;Hooks:<sp/>Run<sp/>check-yaml</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Hooks-&gt;&gt;Hooks:<sp/>Run<sp/>black<sp/>(formatter)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Hooks-&gt;&gt;Hooks:<sp/>Run<sp/>isort<sp/>(importer<sp/>sorter)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Hooks-&gt;&gt;Hooks:<sp/>Run<sp/>flake8<sp/>(linter)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Hooks-&gt;&gt;Hooks:<sp/>Run<sp/>mypy<sp/>(type<sp/>checker)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>alt<sp/>All<sp/>hooks<sp/>pass</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Hooks--&gt;&gt;Git:<sp/>Success</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Git--&gt;&gt;Dev:<sp/>Commit<sp/>successful</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>else<sp/>At<sp/>least<sp/>one<sp/>hook<sp/>fails</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Hooks--xGit:<sp/>Failure</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Git--xDev:<sp/>Commit<sp/>failed,<sp/>fix<sp/>errors</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Hooks</highlight></codeline>
</programlisting></para>
<para>Sources: [.pre-commit-config.yaml](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:154-164]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1685">
<title>Backend API Configuration (<computeroutput>api/main.py</computeroutput>)</title><para>The FastAPI server configuration is defined directly within <computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput>.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1686">
<title>CORS Middleware</title><para>The API uses <computeroutput>CORSMiddleware</computeroutput> to control cross-origin requests from the frontend.</para>
<para><table rows="5" cols="2"><row>
<entry thead="yes"><para>Configuration   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>allow_origins</computeroutput>   </para>
</entry><entry thead="no"><para>A list of allowed origins, including localhost for development and Vercel deployment URLs.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>allow_credentials</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>True</computeroutput>, allows cookies to be included in cross-origin requests.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>allow_methods</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>[&quot;*&quot;]</computeroutput>, allows all standard HTTP methods.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>allow_headers</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>[&quot;*&quot;]</computeroutput>, allows all request headers.   </para>
</entry></row>
</table>
</para>
<para>The allowed origins are dynamically generated based on the <computeroutput>VERCEL_URL</computeroutput> environment variable for production/preview deployments on Vercel, with localhost ports for local development.</para>
<para>Sources: [<ref refid="api_2main_8py" kindref="compound">api/main.py</ref>:27-49]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1687">
<title>Application Startup</title><para>The FastAPI application is launched using Uvicorn. The recommended command for development starts the server with auto-reloading on port 8000.</para>
<para><programlisting filename=".bash"><codeline><highlight class="normal">python<sp/>-m<sp/>uvicorn<sp/>api.main:app<sp/>--reload<sp/>--port<sp/>8000</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md:52](), [<ref refid="QUICK__START_8md" kindref="compound">QUICK_START.md</ref>:43]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1688">
<title>Frontend Configuration</title><para>The Next.js frontend configuration is split between <computeroutput>package.json</computeroutput> for scripts and dependencies, and <computeroutput>next.config.js</computeroutput> for framework-specific settings.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1689">
<title>Scripts (<computeroutput>frontend/package.json</computeroutput>)</title><para>The <computeroutput>scripts</computeroutput> section in <computeroutput>package.json</computeroutput> defines commands for building, running, and testing the frontend application.</para>
<para><table rows="7" cols="3"><row>
<entry thead="yes"><para>Script   </para>
</entry><entry thead="yes"><para>Command   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>dev</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>next dev</computeroutput>   </para>
</entry><entry thead="no"><para>Starts the Next.js development server.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>build</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>next build</computeroutput>   </para>
</entry><entry thead="no"><para>Creates an optimized production build.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>start</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>next start</computeroutput>   </para>
</entry><entry thead="no"><para>Starts a production server.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>lint</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>next lint</computeroutput>   </para>
</entry><entry thead="no"><para>Runs the Next.js linter (ESLint).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>test</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>jest --silent</computeroutput>   </para>
</entry><entry thead="no"><para>Runs Jest tests.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>test:coverage</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>jest --coverage --silent</computeroutput>   </para>
</entry><entry thead="no"><para>Runs Jest tests and generates a coverage report.   </para>
</entry></row>
</table>
</para>
<para>Sources: [frontend/package.json](), [frontend/**tests**/config/package-validation.test.ts:90-128]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1690">
<title>Next.js Build (<computeroutput>frontend/next.config.js</computeroutput>)</title><para>The <computeroutput>next.config.js</computeroutput> file contains settings for the Next.js build process. The current configuration is minimal, enabling React&apos;s Strict Mode.</para>
<para><programlisting filename=".js"><codeline><highlight class="normal">/**<sp/>@type<sp/>{import(&apos;next&apos;).NextConfig}<sp/>*/</highlight></codeline>
<codeline><highlight class="normal">const<sp/>nextConfig<sp/>=<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>reactStrictMode:<sp/>true,</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">module.exports<sp/>=<sp/>nextConfig;</highlight></codeline>
</programlisting></para>
<para>This setting helps identify potential problems in the application by running effects and checks twice in development mode.</para>
<para>Sources: [frontend/next.config.js:1-6]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1691">
<title>Environment Variables</title><para>The frontend relies on an environment variable to locate the backend API.</para>
<para><table rows="2" cols="3"><row>
<entry thead="yes"><para>Variable   </para>
</entry><entry thead="yes"><para>Description   </para>
</entry><entry thead="yes"><para>Example    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>NEXT_PUBLIC_API_URL</computeroutput>   </para>
</entry><entry thead="no"><para>The base URL for the FastAPI backend.   </para>
</entry><entry thead="no"><para><computeroutput><ulink url="http://localhost:8000">http://localhost:8000</ulink></computeroutput>   </para>
</entry></row>
</table>
</para>
<para>This is configured in a <computeroutput>.env.local</computeroutput> file in the <computeroutput>frontend</computeroutput> directory, based on the <computeroutput>.env.example</computeroutput> template in the project root.</para>
<para>Sources: [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:200-203](), [<ref refid="QUICK__START_8md" kindref="compound">QUICK_START.md</ref>:49-51]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1692">
<title>Deployment Configuration (<computeroutput>vercel.json</computeroutput>)</title><para>Deployment to Vercel is configured via <computeroutput>vercel.json</computeroutput>. This file defines how the project is built and how incoming requests are routed to either the Next.js frontend or the Python API.</para>
<para>The diagram below shows Vercel&apos;s request routing.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Vercel<sp/>Platform</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[Incoming<sp/>Request]<sp/>--&gt;<sp/>B{Request<sp/>Path}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B<sp/>--<sp/>/api/*<sp/>--&gt;<sp/>C[Python/FastAPI<sp/>Backend]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B<sp/>--<sp/>else<sp/>--&gt;<sp/>D[Next.js<sp/>Frontend]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
</programlisting></para>
<para>This configuration ensures that API calls are correctly forwarded to the serverless Python function, while all other paths are handled by the Next.js application.</para>
<para>Sources: [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:104-108](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:65-68]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1693">
<title>Extensibility and Customization</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1694">
<title>How-To: Add a New Asset Type</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/models/financial_models.py">src/models/financial_models.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/data/sample_data.py">src/data/sample_data.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/ARCHITECTURE.md">ARCHITECTURE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AI_RULES.md">AI_RULES.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/INTEGRATION_SUMMARY.md">INTEGRATION_SUMMARY.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1695">
<title>How-To: Add a New Asset Type</title><para>This guide provides a step-by-step process for extending the financial asset relationship database with a new asset type. The system is designed to be extensible, allowing developers to incorporate new financial instruments beyond the core classes of Equities, Bonds, Commodities, and Currencies.</para>
<para>Adding a new asset type primarily involves defining its data structure, adding it to the system&apos;s enumeration of asset classes, and implementing the logic that governs its relationships with other assets. Following these steps will ensure the new asset is properly integrated into the graph visualization, metrics calculation, and API responses.</para>
<para>Sources: [README.md](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1696">
<title>Process Overview</title><para>The overall process for adding a new asset type involves modifications to the data, logic, and potentially the presentation layers.</para>
<para>This flowchart shows the high-level workflow for integrating a new asset type.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Step<sp/>1:<sp/>Extend<sp/>Data<sp/>Model&lt;br/&gt;Create<sp/>new<sp/>dataclass]<sp/>--&gt;<sp/>B[Step<sp/>2:<sp/>Update<sp/>AssetClass<sp/>Enum&lt;br/&gt;Add<sp/>new<sp/>type<sp/>to<sp/>enum]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[Step<sp/>3:<sp/>Add<sp/>Sample<sp/>Data&lt;br/&gt;(Optional)<sp/>Create<sp/>sample<sp/>instances]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D[Step<sp/>4:<sp/>Define<sp/>Relationship<sp/>Rules&lt;br/&gt;Update<sp/>AssetRelationshipGraph]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>E[Step<sp/>5:<sp/>Update<sp/>Frontend&lt;br/&gt;(If<sp/>needed)<sp/>Modify<sp/>types<sp/>and<sp/>components]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F[Step<sp/>6:<sp/>Add<sp/>Tests&lt;br/&gt;Unit<sp/>and<sp/>integration<sp/>tests]</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md:112-122](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:195-203]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1697">
<title>Step 1: Extend the Data Model</title><para>The first step is to define the data structure for the new asset. All asset types are Python dataclasses that inherit from the base <computeroutput>Asset</computeroutput> class defined in <computeroutput><ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref></computeroutput>.</para>
<para>Sources: [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:14](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:201]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1698">
<title>Create a New Dataclass</title><para>Create a new Python file or add to the existing <computeroutput><ref refid="financial__models_8py" kindref="compound">financial_models.py</ref></computeroutput> a new dataclass that inherits from <computeroutput>Asset</computeroutput>. This new class should include fields specific to the new asset type. The project standard is to use Python&apos;s <computeroutput>dataclasses</computeroutput> module for all structured data objects.</para>
<para>For example, to add a <computeroutput>Derivative</computeroutput> asset type:</para>
<para><programlisting filename=".py"><codeline><highlight class="keyword">from</highlight><highlight class="normal"><sp/>src.models.financial_models<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Asset,<sp/>AssetClass</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">@dataclass</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">Derivative(Asset):</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>underlying_asset:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>expiration_date:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>strike_price:<sp/>Optional[float]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md:112-118](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:37-38]()</para>
<para>The base <computeroutput>Asset</computeroutput> class provides a set of common fields that all asset types must have.</para>
<para>This class diagram illustrates how a new <computeroutput>Derivative</computeroutput> class inherits from the base <computeroutput>Asset</computeroutput> class, alongside other existing asset types.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Asset<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>id</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>symbol</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+AssetClass<sp/>asset_class</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>sector</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>currency</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>price</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+dict<sp/>additional_fields</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Equity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>pe_ratio</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>dividend_yield</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Bond<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>yield</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>duration</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Derivative<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>underlying_asset</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+str<sp/>expiration_date</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+float<sp/>strike_price</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Equity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Bond</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Derivative</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md:112-118](), [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1699">
<title>Step 2: Update the <computeroutput>AssetClass</computeroutput> Enum</title><para>The <computeroutput>AssetClass</computeroutput> enumeration in <computeroutput><ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref></computeroutput> is used to categorize and identify different types of assets throughout the application. You must add your new asset type to this enum.</para>
<para><programlisting filename=".py"><codeline><highlight class="comment">#<sp/>In<sp/>src/models/financial_models.py</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>enum<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Enum</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">AssetClass(<ref refid="classEnum" kindref="compound">Enum</ref>):</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>EQUITY<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Equity&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>BOND<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Fixed<sp/>Income&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>COMMODITY<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Commodity&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>CURRENCY<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Currency&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>REGULATORY_EVENT<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Regulatory<sp/>Event&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>DERIVATIVE<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Derivative&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">#<sp/>Add<sp/>the<sp/>new<sp/>type<sp/>here</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:39-40](), [<ref refid="financial__models_8py" kindref="compound">src/models/financial_models.py</ref>]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1700">
<title>Step 3: Add Sample Data (Optional)</title><para>To test and visualize the new asset type, it is recommended to add sample instances to <computeroutput><ref refid="sample__data_8py" kindref="compound">src/data/sample_data.py</ref></computeroutput>. This file is responsible for creating the initial dataset used in the application.</para>
<para>You would instantiate your new dataclass and add it to the list of assets that are loaded into the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput>.</para>
<para>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:202](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:79-85]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1701">
<title>Step 4: Define New Relationship Rules</title><para>The core of the system is the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> in <computeroutput><ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref></computeroutput>, which automatically discovers relationships between assets. To make the system aware of how your new asset type interacts with others, you must update the <computeroutput>_find_relationships</computeroutput> method within this class.</para>
<para>This method iterates through pairs of assets and appends relationship tuples <computeroutput>(type, strength, is_bidirectional)</computeroutput> based on custom logic.</para>
<para>The following flowchart shows the logic inside the <computeroutput>_find_relationships</computeroutput> method.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>start[Start<sp/>_find_relationships]<sp/>--&gt;<sp/>loop{For<sp/>each<sp/>pair<sp/>of<sp/>assets<sp/>(asset1,<sp/>asset2)}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>loop<sp/>--&gt;<sp/>check_type{Check<sp/>asset<sp/>types}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>check_type<sp/>--&gt;<sp/>rule1{Is<sp/>asset1<sp/>a<sp/>Derivative<sp/>and<sp/>asset2<sp/>an<sp/>Equity?}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>rule1<sp/>--<sp/>Yes<sp/>--&gt;<sp/>check_underlying{Is<sp/>asset1.underlying_asset<sp/>==<sp/>asset2.symbol?}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>check_underlying<sp/>--<sp/>Yes<sp/>--&gt;<sp/>add_rel[Add<sp/>(&quot;derivative_underlying&quot;,<sp/>0.95,<sp/>False)]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>add_rel<sp/>--&gt;<sp/>loop</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>check_underlying<sp/>--<sp/>No<sp/>--&gt;<sp/>loop</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>rule1<sp/>--<sp/>No<sp/>--&gt;<sp/>other_rules(...)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>other_rules<sp/>--&gt;<sp/>loop</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>loop<sp/>--&gt;<sp/>finish[End]</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md:120-122](), [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:46-53]()</para>
<para>Add a new conditional block to implement the logic for your new asset type. For example, to link a <computeroutput>Derivative</computeroutput> to its underlying <computeroutput>Equity</computeroutput>:</para>
<para><programlisting filename=".py"><codeline><highlight class="comment">#<sp/>Add<sp/>to<sp/>_find_relationships()<sp/>in<sp/>AssetRelationshipGraph</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(asset1,<sp/>Derivative)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>isinstance(asset2,<sp/>Equity):</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>asset1.underlying_asset<sp/>==<sp/>asset2.symbol:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>relationships.append((</highlight><highlight class="stringliteral">&quot;derivative_underlying&quot;</highlight><highlight class="normal">,<sp/>0.95,<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal">))</highlight></codeline>
</programlisting></para>
<para>Sources: [README.md:120-122]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1702">
<title>Step 5: Update the Frontend (If Applicable)</title><para>If the new asset type has unique fields that need to be displayed in the user interface, you may need to update the frontend code. The project has a Next.js frontend that communicates with a FastAPI backend.</para>
<para>Key files to update include:</para>
<para><itemizedlist>
<listitem><para><bold><computeroutput>frontend/app/types/api.ts</computeroutput></bold>: Add the new asset type and its specific fields to the TypeScript interfaces to ensure type safety.</para>
</listitem><listitem><para><bold><computeroutput>frontend/app/components/AssetList.tsx</computeroutput></bold>: Modify the component to display the new fields in the asset explorer table.</para>
</listitem><listitem><para><bold><computeroutput><ref refid="api_2main_8py" kindref="compound">api/main.py</ref></computeroutput></bold>: Ensure the FastAPI endpoint serializes the new asset&apos;s fields correctly.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="INTEGRATION__SUMMARY_8md" kindref="compound">INTEGRATION_SUMMARY.md</ref>:41-58](), [<ref refid="frontend_2README_8md" kindref="compound">frontend/README.md</ref>:41-51]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1703">
<title>Step 6: Add Tests</title><para>Finally, it is crucial to add tests for the new functionality. The project uses <computeroutput>pytest</computeroutput> for backend testing.</para>
<para><itemizedlist>
<listitem><para><bold>Unit Tests</bold>: Add tests to <computeroutput>tests/unit/test_models.py</computeroutput> to validate the new dataclass, including any custom validation in <computeroutput>__post_init__</computeroutput>.</para>
</listitem><listitem><para><bold>Integration Tests</bold>: Add tests to <computeroutput>tests/unit/test_graph.py</computeroutput> to verify that the new relationship rules are correctly identified and that metrics are calculated properly with the new asset type included.</para>
</listitem></itemizedlist>
</para>
<para>Follow the guidelines in <computeroutput><ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref></computeroutput> for writing and running tests. New features must be accompanied by tests.</para>
<para>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:129-170](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:111-128]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1704">
<title>Summary</title><para>Adding a new asset type is a structured process that touches multiple layers of the application architecture. By extending the data model, updating enums, defining relationship logic, and adding tests, you can seamlessly integrate new financial instruments into the system. This modular design is a core strength of the <computeroutput>financial-asset-relationship-db</computeroutput> project, enabling it to evolve and support a wider range of financial analysis scenarios.</para>
<para>Sources: [<ref refid="ARCHITECTURE_8md" kindref="compound">ARCHITECTURE.md</ref>:173-182](), [README.md:109-110]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1705">
<title>How-To: Create Custom Relationship Rules</title><para><details><summary>Relevant source files</summary><para>The following files were used as context for generating this wiki page:<itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/src/logic/asset_graph.py">src/logic/asset_graph.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AI_RULES.md">AI_RULES.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/IMPROVEMENTS.md">IMPROVEMENTS.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AUDIT_REPORT.md">AUDIT_REPORT.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1706">
<title>How-To: Create Custom Relationship Rules</title><para>The financial asset relationship database is designed to automatically discover connections between different financial assets. This guide explains how developers can extend the system by defining and implementing custom relationship rules. The core of this functionality resides in the <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> class, which processes assets and identifies relationships based on a predefined set of rules.</para>
<para>Creating a custom rule involves defining the conditions under which two assets are considered related, the type of relationship, and its relative strength. This process typically requires modifying the core relationship discovery engine and may involve extending the existing data models to support new asset types or attributes.</para>
<para>Sources: [README.md:82-85](), [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1707">
<title>Understanding Core Components</title><para>Before creating a new rule, it&apos;s essential to understand the primary components that govern asset relationships.</para>
<para>Sources: [README.md:65-76](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:31-34]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1708">
<title>Asset Data Models</title><para>All assets in the system are defined using Python <computeroutput>dataclasses</computeroutput>. There is a base <computeroutput>Asset</computeroutput> class, and specific asset types like <computeroutput>Equity</computeroutput>, <computeroutput>Bond</computeroutput>, and <computeroutput>Commodity</computeroutput> inherit from it. To create rules for a new type of asset, you must first define its model.</para>
<para>The diagram below shows the inheritance structure of the core financial models.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>direction<sp/>LR</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Asset<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+id:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+symbol:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+name:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+asset_class:<sp/>AssetClass</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+price:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Equity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+sector:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+market_cap:<sp/>float</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Bond<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+issuer:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+credit_rating:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Commodity<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+unit:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>Currency<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+country:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Equity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Bond</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Commodity</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Asset<sp/>&lt;|--<sp/>Currency</highlight></codeline>
</programlisting></para>
<para>This class diagram illustrates the inheritance hierarchy for financial asset models.</para>
<para>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:21-25](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:31-34]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1709">
<title>The Relationship Discovery Engine</title><para>The <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> class is the engine for relationship management. The automatic discovery process is handled by the <computeroutput>build_relationships()</computeroutput> method, which in turn calls the private <computeroutput>_find_relationships()</computeroutput> method. This is the primary location for adding custom rule logic.</para>
<para>The <computeroutput>_find_relationships()</computeroutput> method iterates through all possible pairs of assets in the graph and applies a series of conditional checks to identify relationships.</para>
<para>The following sequence diagram shows the high-level flow when discovering relationships.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>App<sp/>as<sp/>&quot;Application&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Graph<sp/>as<sp/>&quot;AssetRelationshipGraph&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>App-&gt;&gt;Graph:<sp/>build_relationships()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Graph</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Graph-&gt;&gt;Graph:<sp/>_find_relationships()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>over<sp/>Graph:<sp/>Iterates<sp/>through<sp/>all<sp/>asset<sp/>pairs</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Graph-&gt;&gt;Graph:<sp/>add_relationship(source,<sp/>target,<sp/>type,<sp/>strength)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Graph</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>App--&gt;&gt;App:<sp/>Relationships<sp/>built</highlight></codeline>
</programlisting></para>
<para>This diagram shows the method calls involved in the automatic relationship discovery process.</para>
<para>Sources: [README.md:85](), [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1710">
<title>Step-by-Step Guide to Creating a Custom Rule</title><para>Follow these steps to add a new relationship rule to the system.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1711">
<title>1. Define or Extend Asset Models (If Necessary)</title><para>If your new rule involves a new type of financial instrument, you must first define it as a <computeroutput>dataclass</computeroutput> that inherits from <computeroutput>Asset</computeroutput>. The project standards mandate the use of <computeroutput>dataclasses</computeroutput> for all structured data objects.</para>
<para>For example, to add a rule for derivatives, you would first define a <computeroutput>Derivative</computeroutput> class.</para>
<para><programlisting filename=".py"><codeline><highlight class="keyword">from</highlight><highlight class="normal"><sp/>dataclasses<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>dataclass</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>typing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Optional</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>src.models.financial_models<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Asset,<sp/>AssetClass</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">@dataclass</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">Derivative(Asset):</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>underlying_asset:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>expiration_date:<sp/>str</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>strike_price:<sp/>Optional[float]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight></codeline>
</programlisting></para>
<para><emphasis>Source: [README.md:88-96]()</emphasis></para>
<para>Sources: [README.md:88-96](), [<ref refid="AI__RULES_8md" kindref="compound">AI_RULES.md</ref>:31-34]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1712">
<title>2. Modify the Relationship Discovery Logic</title><para>The logic for all relationship rules is centralized in the <computeroutput>_find_relationships()</computeroutput> method within <computeroutput><ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref></computeroutput>. This method contains a nested loop that compares every asset with every other asset.</para>
<para>The general flow of this method is as follows:</para>
<para><orderedlist>
<listitem><para>Iterate through each asset (<computeroutput>asset1</computeroutput>).</para>
</listitem><listitem><para>Iterate through each subsequent asset (<computeroutput>asset2</computeroutput>) to form a pair.</para>
</listitem><listitem><para>Apply a series of <computeroutput>if</computeroutput> statements to check the types and attributes of <computeroutput>asset1</computeroutput> and <computeroutput>asset2</computeroutput>.</para>
</listitem><listitem><para>If a condition is met, create a relationship tuple and append it to a list.</para>
</listitem><listitem><para>After checking all conditions for the pair, add the identified relationships to the graph.</para>
</listitem></orderedlist>
</para>
<para>The flowchart below visualizes this process.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Start<sp/>_find_relationships]<sp/>--&gt;<sp/>B{Loop<sp/>through<sp/>all<sp/>asset<sp/>pairs};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[Get<sp/>asset1,<sp/>asset2];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>D{Check<sp/>Rule<sp/>1:<sp/>Same<sp/>Sector?};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>Yes<sp/>--&gt;<sp/>E[Append<sp/>&apos;same_sector&apos;<sp/>relationship];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>No<sp/>--&gt;<sp/>F{Check<sp/>Rule<sp/>2:<sp/>Corporate<sp/>Bond?};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>F;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--<sp/>Yes<sp/>--&gt;<sp/>G[Append<sp/>&apos;corp_bond_to_equity&apos;<sp/>relationship];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--<sp/>No<sp/>--&gt;<sp/>H{...Check<sp/>other<sp/>rules...};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>G<sp/>--&gt;<sp/>H;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>H<sp/>--<sp/>Yes<sp/>--&gt;<sp/>I[Append<sp/>custom<sp/>relationship];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>H<sp/>--<sp/>No<sp/>--&gt;<sp/>J[End<sp/>of<sp/>checks<sp/>for<sp/>pair];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>I<sp/>--&gt;<sp/>J;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>J<sp/>--&gt;<sp/>B;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>All<sp/>pairs<sp/>checked<sp/>--&gt;<sp/>K[Add<sp/>all<sp/>found<sp/>relationships<sp/>to<sp/>graph];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>K<sp/>--&gt;<sp/>L[End];</highlight></codeline>
</programlisting></para>
<para>This diagram shows the logical flow for checking relationship rules between asset pairs.</para>
<para>Sources: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>](), [README.md:85]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1713">
<title>3. Implement the Rule Logic</title><para>To implement your custom rule, add a new <computeroutput>if</computeroutput> block inside the nested loop in <computeroutput>_find_relationships()</computeroutput>. This block should check the asset types and the specific attributes that define the relationship.</para>
<para>When a relationship is found, you must create a tuple with the following structure and append it to the <computeroutput>relationships</computeroutput> list.</para>
<para><table rows="4" cols="3"><row>
<entry thead="yes"><para>Element   </para>
</entry><entry thead="yes"><para>Type   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>type</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>str</computeroutput>   </para>
</entry><entry thead="no"><para>A unique name for the relationship (e.g., <computeroutput>derivative_underlying</computeroutput>).    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>strength</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>float</computeroutput>   </para>
</entry><entry thead="no"><para>A normalized value from 0.0 to 1.0 indicating the relationship&apos;s strength.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>bidirectional</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>bool</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>True</computeroutput> if the relationship is symmetric (A-&gt;B and B-&gt;A), <computeroutput>False</computeroutput> otherwise.   </para>
</entry></row>
</table>
</para>
<para><emphasis>Source: [<ref refid="asset__graph_8py" kindref="compound">src/logic/asset_graph.py</ref>]()</emphasis></para>
<para>Here is an example of adding a rule to link a <computeroutput>Derivative</computeroutput> to its underlying <computeroutput>Equity</computeroutput>.</para>
<para><programlisting filename=".py"><codeline><highlight class="comment">#<sp/>Add<sp/>to<sp/>_find_relationships()<sp/>in<sp/>AssetRelationshipGraph</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(asset1,<sp/>Derivative)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>isinstance(asset2,<sp/>Equity):</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>asset1.underlying_asset<sp/>==<sp/>asset2.symbol:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>relationships.append((</highlight><highlight class="stringliteral">&quot;derivative_underlying&quot;</highlight><highlight class="normal">,<sp/>0.95,<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal">))</highlight></codeline>
</programlisting></para>
<para><emphasis>Source: [README.md:99-102]()</emphasis></para>
<para>This code checks if one asset is a <computeroutput>Derivative</computeroutput> and the other is an <computeroutput>Equity</computeroutput>. If the derivative&apos;s underlying asset symbol matches the equity&apos;s symbol, it creates a directional relationship with a strength of 0.95.</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1714">
<title>Best Practices and Configuration</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1715">
<title>Managing Relationship Strengths</title><para>The codebase has been identified as having hardcoded &quot;magic numbers&quot; for relationship strengths (e.g., <computeroutput>0.7</computeroutput> for <computeroutput>same_sector</computeroutput>). It is recommended to extract these values into a centralized configuration file, such as <computeroutput>src/config.py</computeroutput>, to improve maintainability.</para>
<para><table rows="4" cols="3"><row>
<entry thead="yes"><para>Relationship Type   </para>
</entry><entry thead="yes"><para>Hardcoded Strength   </para>
</entry><entry thead="yes"><para>Recommended Constant    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>same_sector</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>0.7</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>SAME_SECTOR_STRENGTH</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>corporate_bond_to_equity</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>0.9</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>CORPORATE_BOND_STRENGTH</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>currency_exposure</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>0.8</computeroutput>   </para>
</entry><entry thead="no"><para><computeroutput>CURRENCY_EXPOSURE_STRENGTH</computeroutput>   </para>
</entry></row>
</table>
</para>
<para><emphasis>Source: [<ref refid="IMPROVEMENTS_8md" kindref="compound">IMPROVEMENTS.md</ref>:23-39]()</emphasis></para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1716">
<title>Testing Your New Rule</title><para>All new features and bug fixes must be accompanied by tests. When you add a new relationship rule, you should also add a corresponding unit test to validate its behavior.</para>
<para><orderedlist>
<listitem><para><bold>Test Structure</bold>: Tests for the graph logic are located in <computeroutput><ref refid="test__asset__graph_8py" kindref="compound">tests/unit/test_asset_graph.py</ref></computeroutput>.</para>
</listitem><listitem><para><bold>Fixtures</bold>: Use shared fixtures from <computeroutput><ref refid="tests_2conftest_8py" kindref="compound">tests/conftest.py</ref></computeroutput> to create sample assets for your test cases.</para>
</listitem><listitem><para><bold>Test Case</bold>: Write a test function that:<itemizedlist>
<listitem><para>Creates an <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput>.</para>
</listitem><listitem><para>Adds the specific assets needed to trigger your new rule.</para>
</listitem><listitem><para>Calls <computeroutput>build_relationships()</computeroutput>.</para>
</listitem><listitem><para>Asserts that the new relationship was created correctly with the expected type and strength.</para>
</listitem></itemizedlist>
</para>
</listitem></orderedlist>
</para>
<para><emphasis>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:129-161](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:105-118]()</emphasis></para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1717">
<title>Summary</title><para>Creating a custom relationship rule is a straightforward process that extends the core functionality of the application. The key steps are to define the necessary asset models, add conditional logic to the <computeroutput>_find_relationships</computeroutput> method in <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput>, and provide comprehensive tests to ensure the rule functions as expected. By centralizing rule strengths and following the established testing patterns, you can contribute new, maintainable, and robust features to the relationship discovery engine.</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1718">
<title>Development and Testing</title><sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1719">
<title>Testing Strategy</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/TESTING_GUIDE.md">TESTING_GUIDE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AUDIT_REPORT.md">AUDIT_REPORT.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/tests/unit/test_documentation_validation.py">tests/unit/test_documentation_validation.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/tests/integration/test_workflow_documentation.py">tests/integration/test_workflow_documentation.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/COMPREHENSIVE_TEST_SUMMARY.md">COMPREHENSIVE_TEST_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/TEST_DOCUMENTATION_SUMMARY.md">TEST_DOCUMENTATION_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/TESTING.md">TESTING.md</ulink></para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1720">
<title>Testing Strategy</title><para>The project employs a comprehensive testing strategy that covers both the Python backend and the TypeScript/React frontend. The approach emphasizes unit and integration tests to ensure code quality, data integrity, and prevent regressions. The strategy also includes unique validation for documentation and configuration files, treating them as critical project artifacts. The core frameworks are <computeroutput>pytest</computeroutput> for the backend and <computeroutput>Jest</computeroutput> with <computeroutput>@testing-library/react</computeroutput> for the frontend.</para>
<para>The testing infrastructure was a significant addition to the project, which initially had no tests. The current suite includes over 140 test cases across backend and frontend, validating everything from API endpoints and component rendering to Markdown file structure and dependency consistency.</para>
<para><emphasis>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:21-26](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:113-145]()</emphasis></para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1721">
<title>Test Architecture</title><para>The testing architecture is segregated by application layer (backend, frontend) and test type (unit, integration). This separation ensures clarity and maintainability.</para>
<para>This diagram illustrates the high-level organization of the test suites.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Testing</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[Test<sp/>Suites]<sp/>--&gt;<sp/>B[Backend<sp/>Tests];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>C[Frontend<sp/>Tests];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>D[Documentation<sp/>&amp;<sp/>Config<sp/>Tests];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Backend</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>B1[Pytest];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B1<sp/>--&gt;<sp/>B2[Unit<sp/>Tests:<sp/>`tests/unit`];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B1<sp/>--&gt;<sp/>B3[Integration<sp/>Tests:<sp/>`tests/integration`];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Frontend</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>C1[Jest];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C1<sp/>--&gt;<sp/>C2[Component<sp/>Tests:<sp/>`frontend/__tests__/components`];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C1<sp/>--&gt;<sp/>C3[API<sp/>Client<sp/>Tests:<sp/>`frontend/__tests__/lib`];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Docs_and_Config</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>D1[Pytest];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D1<sp/>--&gt;<sp/>D2[Markdown<sp/>Validation:<sp/>`test_documentation_validation.py`];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D1<sp/>--&gt;<sp/>D3[Config<sp/>Validation:<sp/>`test_config_validation.py`];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D1<sp/>--&gt;<sp/>D4[Requirements<sp/>Validation:<sp/>`test_requirements.py`];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:104-112](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:114-120](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:18, 59]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1722">
<title>Directory Structure</title><para>The project organizes test files into dedicated directories:</para>
<para><table rows="6" cols="2"><row>
<entry thead="yes"><para>Path   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>tests/</computeroutput>   </para>
</entry><entry thead="no"><para>Root directory for all backend Python tests.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>tests/unit/</computeroutput>   </para>
</entry><entry thead="no"><para>Contains unit tests for isolated backend components like API endpoints and data models.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>tests/integration/</computeroutput>   </para>
</entry><entry thead="no"><para>Contains integration tests for backend components, such as documentation and workflow validation.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput><ref refid="tests_2conftest_8py" kindref="compound">tests/conftest.py</ref></computeroutput>   </para>
</entry><entry thead="no"><para>Provides shared <computeroutput>pytest</computeroutput> fixtures for backend tests.    </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>frontend/__tests__/</computeroutput>   </para>
</entry><entry thead="no"><para>Root directory for all frontend TypeScript/React tests.   </para>
</entry></row>
</table>
</para>
<para><emphasis>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:104-112](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:114-120]()</emphasis></para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1723">
<title>Backend Testing (Python)</title><para>Backend testing is performed using <computeroutput>pytest</computeroutput> and focuses on the FastAPI application, data models, and core logic. The suite covers API endpoints, CORS configuration, Pydantic model validation, and error handling.</para>
<para><emphasis>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:18-58](), [<ref refid="TEST__SUMMARY_8md" kindref="compound">TEST_SUMMARY.md</ref>:10-56]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1724">
<title>Key Test Areas</title><para><itemizedlist>
<listitem><para><bold>API Endpoints</bold>: All REST endpoints are tested for correct responses, query parameter handling, and filtering logic.</para>
</listitem><listitem><para><bold>CORS and Security</bold>: <computeroutput>TestValidateOrigin</computeroutput> ensures that Cross-Origin Resource Sharing (CORS) rules correctly validate origins from localhost and Vercel deployments, preventing unauthorized access.</para>
</listitem><listitem><para><bold>Concurrency</bold>: Tests verify that the core <computeroutput><ref refid="classAssetRelationshipGraph" kindref="compound">AssetRelationshipGraph</ref></computeroutput> is initialized in a thread-safe manner.</para>
</listitem><listitem><para><bold>Model Validation</bold>: Pydantic response models are validated to ensure data integrity and correct structure.</para>
</listitem><listitem><para><bold>Error Handling</bold>: The system is tested against invalid requests, server errors, and 404 not-found scenarios.</para>
</listitem></itemizedlist>
</para>
<para>This class diagram shows some of the key test classes for the backend.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>direction<sp/>LR</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>TestValidateOrigin<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_http_localhost_dev()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_vercel_url()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_invalid_domain()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>TestAPIEndpoints<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_get_all_assets()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_filter_by_asset_class()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_asset_detail_retrieval()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_network_metrics()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>TestErrorHandling<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_server_error_handling()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_404_responses()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>TestConcurrency<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_thread_safe_double_check_locking()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:37-54](), [<ref refid="TEST__SUMMARY_8md" kindref="compound">TEST_SUMMARY.md</ref>:16-56]()</emphasis></para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1725">
<title>Test Fixtures</title><para>Shared test data and setup are managed using fixtures in <computeroutput><ref refid="tests_2conftest_8py" kindref="compound">tests/conftest.py</ref></computeroutput>. This includes sample assets (<computeroutput>sample_equity</computeroutput>, <computeroutput>sample_bond</computeroutput>) and graph instances (<computeroutput>empty_graph</computeroutput>, <computeroutput>populated_graph</computeroutput>), promoting test isolation and reusability.</para>
<para><emphasis>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:114-122]()</emphasis></para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1726">
<title>Frontend Testing (TypeScript)</title><para>Frontend testing uses <computeroutput>Jest</computeroutput> and <computeroutput>@testing-library/react</computeroutput> to validate React components, the API client, and user interactions. Tests are located in the <computeroutput>frontend/__tests__</computeroutput> directory.</para>
<para><emphasis>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:59-130](), [README.md:191-199]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1727">
<title>Key Test Areas</title><para><itemizedlist>
<listitem><para><bold>API Client (<computeroutput>api.test.ts</computeroutput>)</bold>: The Axios-based API client is extensively tested to verify correct endpoint calls, parameter handling, and response data parsing. All API methods, including <computeroutput>getAssets</computeroutput>, <computeroutput>getAssetDetail</computeroutput>, and <computeroutput>getVisualizationData</computeroutput>, are covered.</para>
</listitem><listitem><para><bold>React Components</bold>: Components like <computeroutput>AssetList</computeroutput>, <computeroutput>MetricsDashboard</computeroutput>, and <computeroutput>NetworkVisualization</computeroutput> are tested for rendering, data loading, user interactions (e.g., filtering), and handling of empty or error states.</para>
</listitem><listitem><para><bold>Mock Data Validation</bold>: A dedicated test file, <computeroutput>frontend/__tests__/test-utils.test.ts</computeroutput>, validates all mock data objects used in the test suite to ensure they conform to TypeScript interfaces and maintain data integrity.</para>
</listitem><listitem><para><bold>Page-Level Integration</bold>: The main application page is tested to ensure correct component integration, tab switching, and data loading flows.</para>
</listitem></itemizedlist>
</para>
<para>This diagram shows the structure of the frontend test suites.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Frontend_Tests</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FT[Jest<sp/>Test<sp/>Suites]<sp/>--&gt;<sp/>API[API<sp/>Client:<sp/>api.test.ts];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FT<sp/>--&gt;<sp/>Comp[Component<sp/>Tests];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FT<sp/>--&gt;<sp/>Mock[Mock<sp/>Data<sp/>Validation:<sp/>test-utils.test.ts];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FT<sp/>--&gt;<sp/>Page[Page<sp/>Integration:<sp/>page.test.tsx];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Components</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Comp<sp/>--&gt;<sp/>AL[AssetList.test.tsx];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Comp<sp/>--&gt;<sp/>MD[MetricsDashboard.test.tsx];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Comp<sp/>--&gt;<sp/>NV[NetworkVisualization.test.tsx];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:61-130](), [<ref refid="COMPREHENSIVE__TEST__SUMMARY_8md" kindref="compound">COMPREHENSIVE_TEST_SUMMARY.md</ref>:20-44]()</emphasis></para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1728">
<title>Documentation and Configuration Testing</title><para>A unique aspect of this project&apos;s testing strategy is the validation of non-code artifacts like Markdown documentation and configuration files. These tests run within the <computeroutput>pytest</computeroutput> framework and ensure that project metadata and documentation remain accurate and well-formatted.</para>
<para><emphasis>Sources: [<ref refid="TEST__DOCUMENTATION__SUMMARY_8md" kindref="compound">TEST_DOCUMENTATION_SUMMARY.md</ref>](), [<ref refid="unit_2test__documentation__validation_8py" kindref="compound">tests/unit/test_documentation_validation.py</ref>]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1729">
<title>Documentation Validation</title><para>Tests in <computeroutput><ref refid="unit_2test__documentation__validation_8py" kindref="compound">tests/unit/test_documentation_validation.py</ref></computeroutput> and <computeroutput><ref refid="test__workflow__documentation_8py" kindref="compound">tests/integration/test_workflow_documentation.py</ref></computeroutput> validate <computeroutput>.md</computeroutput> files for:</para>
<para><itemizedlist>
<listitem><para><bold>Structure</bold>: Presence of required titles and sections (e.g., <computeroutput>## Overview</computeroutput>).</para>
</listitem><listitem><para><bold>Formatting</bold>: Correct Markdown syntax, no trailing whitespace, and proper code block closure.</para>
</listitem><listitem><para><bold>Content Accuracy</bold>: Mentions of key files and technologies (e.g., <computeroutput>pytest</computeroutput>, <computeroutput>pr-agent.yml</computeroutput>).</para>
</listitem><listitem><para><bold>Consistency</bold>: Cross-validation between different documentation files to ensure file counts and other metrics match.</para>
</listitem><listitem><para><bold>Security</bold>: Checks for hardcoded secrets like GitHub tokens.</para>
</listitem></itemizedlist>
</para>
<para>The following class diagram outlines the test classes responsible for documentation validation.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">classDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>TestDependencyMatrix<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_file_counts_match()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_dependency_format()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>TestSystemManifest<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_has_project_overview()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_directory_structure_format()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>TestDocumentationConsistency<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_file_counts_match_between_documents()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_timestamps_are_recent()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>TestDocumentationRealisticContent<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_documented_files_exist()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_documented_dependencies_are_real_packages()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>class<sp/>TestSecurityAndBestPractices<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+test_no_hardcoded_secrets()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>TestDependencyMatrix<sp/>--|&gt;<sp/>DocumentationValidation</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>TestSystemManifest<sp/>--|&gt;<sp/>DocumentationValidation</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>TestDocumentationConsistency<sp/>--|&gt;<sp/>DocumentationValidation</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>TestDocumentationRealisticContent<sp/>--|&gt;<sp/>DocumentationValidation</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>TestSecurityAndBestPractices<sp/>--|&gt;<sp/>DocumentationValidation</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="TEST__DOCUMENTATION__SUMMARY_8md" kindref="compound">TEST_DOCUMENTATION_SUMMARY.md</ref>:21-65](), [<ref refid="unit_2test__documentation__validation_8py" kindref="compound">tests/unit/test_documentation_validation.py</ref>](), [<ref refid="integration_2test__documentation__validation_8py" kindref="compound">tests/integration/test_documentation_validation.py</ref>:228-244]()</emphasis></para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1730">
<title>Configuration and Dependency Testing</title><para>Tests like <computeroutput><ref refid="test__config__validation_8py" kindref="compound">tests/unit/test_config_validation.py</ref></computeroutput> and <computeroutput><ref refid="test__requirements_8py" kindref="compound">tests/integration/test_requirements.py</ref></computeroutput> validate:</para>
<para><itemizedlist>
<listitem><para><bold>JSON/YAML Syntax</bold>: Ensures configuration files like <computeroutput>vercel.json</computeroutput> and <computeroutput>.github/workflows/pr-agent.yml</computeroutput> are well-formed.</para>
</listitem><listitem><para><bold>Dependency Integrity</bold>: <computeroutput>requirements.txt</computeroutput> and <computeroutput>package.json</computeroutput> are checked for required packages, consistent versioning, and security pins.</para>
</listitem></itemizedlist>
</para>
<para><emphasis>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:40-58](), [<ref refid="TEST__GENERATION__SUMMARY_8md" kindref="compound">TEST_GENERATION_SUMMARY.md</ref>:10-31](), [<ref refid="COMPREHENSIVE__TEST__SUMMARY_8md" kindref="compound">COMPREHENSIVE_TEST_SUMMARY.md</ref>:83-85]()</emphasis></para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1731">
<title>Execution and CI/CD</title><para>Tests are designed to be run locally by developers and automatically in a CI/CD pipeline.</para>
<para><emphasis>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:99-111](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:132-171]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1732">
<title>Local Execution</title><para><table rows="6" cols="3"><row>
<entry thead="yes"><para>Environment   </para>
</entry><entry thead="yes"><para>Command   </para>
</entry><entry thead="yes"><para>Description    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Backend</bold>   </para>
</entry><entry thead="no"><para><computeroutput>pytest</computeroutput>   </para>
</entry><entry thead="no"><para>Runs all Python tests.    </para>
</entry></row>
<row>
<entry thead="no"><para></para>
</entry><entry thead="no"><para><computeroutput>pytest --cov=api --cov=src</computeroutput>   </para>
</entry><entry thead="no"><para>Runs tests with a coverage report.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>Frontend</bold>   </para>
</entry><entry thead="no"><para><computeroutput>cd frontend &amp;&amp; npm test</computeroutput>   </para>
</entry><entry thead="no"><para>Runs all TypeScript/React tests.    </para>
</entry></row>
<row>
<entry thead="no"><para></para>
</entry><entry thead="no"><para><computeroutput>cd frontend &amp;&amp; npm test -- --coverage</computeroutput>   </para>
</entry><entry thead="no"><para>Runs frontend tests with coverage.    </para>
</entry></row>
<row>
<entry thead="no"><para><bold>All Checks</bold>   </para>
</entry><entry thead="no"><para><computeroutput>make check</computeroutput>   </para>
</entry><entry thead="no"><para>A utility command to run formatting, linting, type-checking, and all tests.   </para>
</entry></row>
</table>
</para>
<para><emphasis>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:104, 133-145](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:134-158](), [README.md:185-212]()</emphasis></para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1733">
<title>CI/CD Integration</title><para>Tests are integrated into a GitHub Actions workflow (<computeroutput>.github/workflows/ci.yml</computeroutput>), which runs on every push and pull request.</para>
<para>This flowchart shows the CI testing pipeline.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Push<sp/>or<sp/>PR]<sp/>--&gt;<sp/>B{CI<sp/>Workflow};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[Backend<sp/>Job];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>D[Frontend<sp/>Job];</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>C<sp/>[Backend<sp/>Job]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C1[Setup<sp/>Python]<sp/>--&gt;<sp/>C2[Install<sp/>Dependencies];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C2<sp/>--&gt;<sp/>C3[Lint<sp/>&amp;<sp/>Format<sp/>Check];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C3<sp/>--&gt;<sp/>C4[Run<sp/>Pytest];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>D<sp/>[Frontend<sp/>Job]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D1[Setup<sp/>Node.js]<sp/>--&gt;<sp/>D2[Install<sp/>Dependencies];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D2<sp/>--&gt;<sp/>D3[Run<sp/>Jest<sp/>Tests];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
</programlisting></para>
<para><emphasis>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:239-268](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:144-155]()</emphasis></para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1734">
<title>Pre-commit Hooks</title><para>To ensure code quality before commits, the project uses <computeroutput>pre-commit</computeroutput> hooks. These hooks automatically run formatters (<computeroutput>black</computeroutput>, <computeroutput>isort</computeroutput>), linters (<computeroutput>flake8</computeroutput>), and type checkers (<computeroutput>mypy</computeroutput>), catching issues early.</para>
<para><emphasis>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:86-92](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:159-168]()</emphasis></para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1735">
<title>Conclusion</title><para>The testing strategy for the Financial Asset Relationship Database is robust and multi-faceted. It provides comprehensive coverage for backend logic, frontend components, and critical project artifacts like documentation and configuration. By integrating automated checks into both pre-commit hooks and the CI/CD pipeline, the strategy enforces high standards of quality and stability, enabling developers to contribute with confidence.</para>
<para><emphasis>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:255-265](), [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:167-171]()</emphasis></para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1736">
<title>Running Tests</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/pyproject.toml">pyproject.toml</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/conftest.py">conftest.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/frontend/jest.config.js">frontend/jest.config.js</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/test_scripts.sh">test_scripts.sh</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/TESTING_GUIDE.md">TESTING_GUIDE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/tests/integration/test_documentation_validation.py">tests/integration/test_documentation_validation.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/COMPREHENSIVE_TEST_SUMMARY.md">COMPREHENSIVE_TEST_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/TEST_DOCUMENTATION_SUMMARY.md">TEST_DOCUMENTATION_SUMMARY.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1737">
<title>Running Tests</title><para>The project employs a comprehensive testing strategy that covers both the Python backend and the Next.js frontend, ensuring code quality, stability, and correctness. The testing infrastructure is built around industry-standard tools: <computeroutput>pytest</computeroutput> for the backend and <computeroutput>Jest</computeroutput> with <computeroutput>React Testing Library</computeroutput> for the frontend. With over 140 test cases, the suite validates everything from API endpoints and component rendering to configuration files and documentation integrity.</para>
<para>This guide provides a detailed overview of the testing architecture, command-line execution, and the different types of tests available in the repository. For more information on development workflows, see the <ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink> guide.</para>
<para>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:5-8](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:100-103](), [README.md:144-146]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1738">
<title>Test Architecture Overview</title><para>The project maintains two parallel testing stacks, one for the Python backend and one for the TypeScript/React frontend. This separation allows for isolated, framework-specific testing while ensuring complete coverage of the application.</para>
<para>The following diagram illustrates the high-level testing architecture.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Backend<sp/>Testing<sp/>[Python]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B1[Pytest]<sp/>--&gt;<sp/>B2{Test<sp/>Runner};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B3[tests/unit]<sp/>--&gt;<sp/>B1;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B4[tests/integration]<sp/>--&gt;<sp/>B1;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B5[conftest.py]<sp/>--&gt;<sp/>B1;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B6[pyproject.toml]<sp/>--<sp/>config<sp/>--&gt;<sp/>B1;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Frontend<sp/>Testing<sp/>[TypeScript/React]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>F1[Jest]<sp/>--&gt;<sp/>F2{Test<sp/>Runner};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>F3[frontend/__tests__]<sp/>--&gt;<sp/>F1;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>F4[React<sp/>Testing<sp/>Library]<sp/>--&gt;<sp/>F1;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>F5[jest.config.js]<sp/>--<sp/>config<sp/>--&gt;<sp/>F1;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>F6[package.json]<sp/>--<sp/>scripts<sp/>--&gt;<sp/>F1;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>CI/CD<sp/>[GitHub<sp/>Actions]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>G1[Push/PR]<sp/>--&gt;<sp/>G2{Run<sp/>Tests};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>G2<sp/>--&gt;<sp/>B2;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>G2<sp/>--&gt;<sp/>F2;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B2<sp/>--&gt;<sp/>B7[Coverage<sp/>Report];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F2<sp/>--&gt;<sp/>F7[Coverage<sp/>Report];</highlight></codeline>
</programlisting></para>
<para>This diagram shows the separate testing stacks for the backend (Pytest) and frontend (Jest), both of which are executed during the CI/CD process.</para>
<para>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:10-21](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:105-112](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:104-107]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1739">
<title>Backend Testing (Python)</title><para>The backend test suite uses <computeroutput>pytest</computeroutput> to validate the FastAPI application, core logic, data models, and configuration files. Tests are organized into <computeroutput>unit</computeroutput> and <computeroutput>integration</computeroutput> directories.</para>
<para>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:23-25](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:105-112]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1740">
<title>Structure and Configuration</title><para><itemizedlist>
<listitem><para><bold>Test Runner</bold>: <computeroutput>pytest</computeroutput></para>
</listitem><listitem><para><bold>Configuration</bold>: <computeroutput>pyproject.toml</computeroutput> defines pytest settings, including test paths and markers.</para>
</listitem><listitem><para><bold>Fixtures</bold>: Shared test fixtures, such as <computeroutput>sample_equity</computeroutput> and <computeroutput>populated_graph</computeroutput>, are defined in <computeroutput><ref refid="tests_2conftest_8py" kindref="compound">tests/conftest.py</ref></computeroutput> to provide reusable data for tests.</para>
</listitem><listitem><para><bold>Directory Structure</bold>:<itemizedlist>
<listitem><para><computeroutput>tests/unit/</computeroutput>: For isolated tests of individual components, such as API endpoints or data models.</para>
</listitem><listitem><para><computeroutput>tests/integration/</computeroutput>: For tests that verify interactions between multiple components or validate entire files (e.g., documentation, requirements).</para>
</listitem></itemizedlist>
</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:105-112](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:113-122](), [<ref refid="TEST__DOCUMENTATION__SUMMARY_8md" kindref="compound">TEST_DOCUMENTATION_SUMMARY.md</ref>:11]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1741">
<title>Test Coverage</title><para>The backend tests provide extensive coverage, including:</para>
<para><itemizedlist>
<listitem><para>API endpoints, query parameters, and filtering.</para>
</listitem><listitem><para>CORS configuration and security validation.</para>
</listitem><listitem><para>Pydantic model validation and error handling.</para>
</listitem><listitem><para>Thread-safe graph initialization.</para>
</listitem><listitem><para>Configuration file validation (<computeroutput>vercel.json</computeroutput>, <computeroutput>requirements.txt</computeroutput>).</para>
</listitem><listitem><para>Documentation file integrity and formatting.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:31-59](), [<ref refid="TEST__DOCUMENTATION__SUMMARY_8md" kindref="compound">TEST_DOCUMENTATION_SUMMARY.md</ref>:15-49]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1742">
<title>Running Backend Tests</title><para>The following table summarizes the commands used to run backend tests. These can be executed directly or via the <computeroutput>Makefile</computeroutput>.</para>
<para><table rows="7" cols="3"><row>
<entry thead="yes" align='left'><para>Command   </para>
</entry><entry thead="yes" align='left'><para>Description   </para>
</entry><entry thead="yes" align='left'><para>Source    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>pytest</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs all tests in the <computeroutput>tests/</computeroutput> directory.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:126]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>pytest -v</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs all tests with verbose output.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:121]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>pytest --cov=api --cov=src</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs tests and generates a coverage report.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:124]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>pytest -m unit</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs only tests marked with the <computeroutput>unit</computeroutput> marker.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:132]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make test</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Makefile shortcut to run tests with coverage.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:87]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make lint</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs linters like <computeroutput>flake8</computeroutput> and <computeroutput>pylint</computeroutput>.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:84]()   </para>
</entry></row>
</table>
</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1743">
<title>Frontend Testing (TypeScript)</title><para>The frontend test suite uses <computeroutput>Jest</computeroutput> and <computeroutput>React Testing Library</computeroutput> to validate React components, the API client, and configuration files.</para>
<para>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:61-66](), [README.md:157-159]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1744">
<title>Structure and Configuration</title><para><itemizedlist>
<listitem><para><bold>Test Runner</bold>: <computeroutput>Jest</computeroutput>, configured via <computeroutput>frontend/jest.config.js</computeroutput>.</para>
</listitem><listitem><para><bold>Utilities</bold>: <computeroutput>React Testing Library</computeroutput> is used for rendering components and simulating user interactions.</para>
</listitem><listitem><para><bold>Setup</bold>: <computeroutput>frontend/jest.setup.js</computeroutput> configures the test environment, including mocks for browser APIs like <computeroutput>window.matchMedia</computeroutput>.</para>
</listitem><listitem><para><bold>Test Location</bold>: All test files are located within the <computeroutput>frontend/__tests__</computeroutput> directory, mirroring the structure of the <computeroutput>app</computeroutput> directory.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:61-66](), [<ref refid="TEST__SUMMARY_8md" kindref="compound">TEST_SUMMARY.md</ref>:88-96]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1745">
<title>Test Coverage</title><para>Frontend tests validate:</para>
<para><itemizedlist>
<listitem><para>The API client library (<computeroutput>app/lib/api.ts</computeroutput>), including all endpoint functions and error handling.</para>
</listitem><listitem><para>React components, covering rendering, data loading, user interactions (filtering), and empty/error states.</para>
</listitem><listitem><para>The main application page, including tab switching and component integration.</para>
</listitem><listitem><para>Configuration files like <computeroutput>package.json</computeroutput> and <computeroutput>package-lock.json</computeroutput> for dependency integrity.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:68-117](), [<ref refid="TEST__GENERATION__REPORT_8md" kindref="compound">TEST_GENERATION_REPORT.md</ref>:21-46]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1746">
<title>Running Frontend Tests</title><para>The following commands are run from the <computeroutput>frontend/</computeroutput> directory.</para>
<para><table rows="5" cols="3"><row>
<entry thead="yes" align='left'><para>Command   </para>
</entry><entry thead="yes" align='left'><para>Description   </para>
</entry><entry thead="yes" align='left'><para>Source    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>npm test</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs all frontend tests.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:133]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>npm run test:watch</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs tests in interactive watch mode.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:136]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>npm run test:coverage</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs tests and generates a coverage report.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:139]()    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>npm test -- AssetList.test.tsx</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs tests for a specific file.   </para>
</entry><entry thead="no" align='left'><para>[<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:94]()   </para>
</entry></row>
</table>
</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1747">
<title>Specialized Test Suites</title><para>Beyond typical unit and integration tests, the project includes specialized suites to ensure the quality of documentation and configuration.</para>
<para>Sources: [<ref refid="COMPREHENSIVE__TEST__SUMMARY_8md" kindref="compound">COMPREHENSIVE_TEST_SUMMARY.md</ref>:92-109](), [<ref refid="TEST__DOCUMENTATION__SUMMARY_8md" kindref="compound">TEST_DOCUMENTATION_SUMMARY.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1748">
<title>Documentation Validation</title><para>A unique feature of this project&apos;s test suite is the validation of Markdown documentation files. These tests ensure that documentation remains accurate, well-formatted, and maintainable.</para>
<para>The following diagram shows the validation flow for a documentation file.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[pytest<sp/>runs<sp/>test_documentation_validation.py]<sp/>--&gt;<sp/>B{Load<sp/>.md<sp/>File};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[Check<sp/>Existence<sp/>&amp;<sp/>Readability];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>D[Validate<sp/>Structure];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>D1[Has<sp/>H1<sp/>Title];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>D2[Has<sp/>Required<sp/>Sections];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>E[Validate<sp/>Formatting];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>E1[No<sp/>Trailing<sp/>Whitespace];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>E2[Code<sp/>Blocks<sp/>Closed];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>F[Validate<sp/>Content];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>F1[Mentions<sp/>Key<sp/>Files];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>F<sp/>--&gt;<sp/>F2[No<sp/>Hardcoded<sp/>Secrets];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>&amp;<sp/>D<sp/>&amp;<sp/>E<sp/>&amp;<sp/>F<sp/>--&gt;<sp/>G[Test<sp/>Passed/Failed];</highlight></codeline>
</programlisting></para>
<para>These tests are located in files like <computeroutput><ref refid="integration_2test__documentation__validation_8py" kindref="compound">tests/integration/test_documentation_validation.py</ref></computeroutput> and <computeroutput><ref refid="unit_2test__documentation__validation_8py" kindref="compound">tests/unit/test_documentation_validation.py</ref></computeroutput>. They check for:</para>
<para><itemizedlist>
<listitem><para>Correct Markdown syntax and heading structure.</para>
</listitem><listitem><para>Presence of required sections like &quot;Overview&quot;.</para>
</listitem><listitem><para>Absence of hardcoded secrets.</para>
</listitem><listitem><para>Consistency of information between different documentation files.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="integration_2test__documentation__validation_8py" kindref="compound">tests/integration/test_documentation_validation.py</ref>](), [<ref refid="TEST__DOCUMENTATION__SUMMARY_8md" kindref="compound">TEST_DOCUMENTATION_SUMMARY.md</ref>:15-49]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1749">
<title>Configuration File Validation</title><para>Tests are in place to validate various configuration files, preventing common errors related to dependencies and deployment settings.</para>
<para><itemizedlist>
<listitem><para><bold><computeroutput>requirements.txt</computeroutput> / <computeroutput>requirements-dev.txt</computeroutput></bold>: Tests ensure required packages are present, versions are correctly specified, and security pins are in place.</para>
</listitem><listitem><para><bold><computeroutput>package.json</computeroutput> / <computeroutput>package-lock.json</computeroutput></bold>: Tests validate dependency versions, script availability, and integrity between the two files.</para>
</listitem><listitem><para><bold><computeroutput>vercel.json</computeroutput> / <computeroutput>tsconfig.json</computeroutput></bold>: Deployment and TypeScript compiler settings are validated for correctness.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="TEST__GENERATION__SUMMARY_8md" kindref="compound">TEST_GENERATION_SUMMARY.md</ref>:14-35](), [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:47-59](), [<ref refid="TEST__GENERATION__REPORT_8md" kindref="compound">TEST_GENERATION_REPORT.md</ref>:21-72]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1750">
<title>CI/CD Integration</title><para>All tests are designed to run automatically in the CI/CD pipeline using GitHub Actions. The workflow is configured to execute both backend and frontend test suites on every push and pull request, ensuring that no failing tests are merged into the main branch.</para>
<para>The CI pipeline performs the following steps:</para>
<para><orderedlist>
<listitem><para>Checks out the code.</para>
</listitem><listitem><para>Sets up Python and Node.js environments.</para>
</listitem><listitem><para>Installs backend and frontend dependencies.</para>
</listitem><listitem><para>Runs the respective test suites, often with coverage reporting.</para>
</listitem></orderedlist>
</para>
<para>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:169-194](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:138-148]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1751">
<title>CI/CD Workflows</title><para><details><summary>Relevant source files</summary><para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/tests/integration/test_github_workflows.py">tests/integration/test_github_workflows.py</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AUDIT_REPORT.md">AUDIT_REPORT.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/SUMMARY.md">SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CHANGELOG.md">CHANGELOG.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/BRANCH_CLEANUP_SUMMARY.md">BRANCH_CLEANUP_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/README.md">README.md</ulink></para>
</listitem><listitem><para>COMPREHENSIVE_TEST_SUMMARY.md</para>
</listitem></itemizedlist>
</para>
<para></para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1752">
<title>CI/CD Workflows</title><para>The project employs a streamlined and robust set of CI/CD workflows managed through GitHub Actions. The system was significantly refactored to remove 23 irrelevant workflow files for technologies not used in the project (like .NET, Docker, and Node.js), consolidating the pipeline into a few focused, Python-centric workflows. This cleanup reduced CI/CD resource usage and improved maintainability. The core of the CI strategy is a consolidated pipeline (<computeroutput>ci.yml</computeroutput>) for testing and quality checks, supplemented by automated PR management (<computeroutput>pr-agent.yml</computeroutput>), security scanning, and branch maintenance.</para>
<para>A key feature of this repository is that the workflows themselves are subject to comprehensive integration testing using <computeroutput>pytest</computeroutput>. These tests validate YAML syntax, structure, security best practices, and action configurations, ensuring the CI/CD infrastructure remains reliable and secure. This approach prevents common workflow errors like duplicate keys or invalid syntax from being merged.</para>
<para>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:40-47, 102-113](), [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:12-20](), [<ref refid="test__github__workflows_8py" kindref="compound">tests/integration/test_github_workflows.py</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1753">
<title>Workflow Architecture</title><para>The project utilizes several GitHub Actions workflows, each triggered by different events, to automate testing, security scanning, PR management, and repository maintenance. The main workflows are <computeroutput>ci.yml</computeroutput>, <computeroutput>pr-agent.yml</computeroutput>, <computeroutput>codeql.yml</computeroutput>, <computeroutput>dependency-review.yml</computeroutput>, and <computeroutput>branch-cleanup.yml</computeroutput>.</para>
<para>This diagram illustrates the high-level architecture of the GitHub Actions workflows, their triggers, and their primary functions.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Triggers</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[Push<sp/>to<sp/>main]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B[Pull<sp/>Request]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C[PR<sp/>Comment<sp/>/<sp/>Review]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D[Weekly<sp/>Schedule]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Workflows</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>W1[ci.yml]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>W2[pr-agent.yml]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>W3[codeql.yml]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>W4[dependency-review.yml]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>W5[branch-cleanup.yml]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Actions</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>J1[Run<sp/>Tests<sp/>&amp;<sp/>Quality<sp/>Checks]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>J2[Automated<sp/>PR<sp/>Review<sp/>&amp;<sp/>Merge]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>J3[Static<sp/>Code<sp/>Analysis<sp/>(Security)]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>J4[Dependency<sp/>Vulnerability<sp/>Scan]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>J5[Identify<sp/>Stale<sp/>Branches]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>W1</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>W1</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>W4</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>W2</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>W3</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>W5</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>W1<sp/>--&gt;<sp/>J1</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>W2<sp/>--&gt;<sp/>J2</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>W3<sp/>--&gt;<sp/>J3</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>W4<sp/>--&gt;<sp/>J4</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>W5<sp/>--&gt;<sp/>J5</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:104-109](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:109-113](), [<ref refid="BRANCH__CLEANUP__SUMMARY_8md" kindref="compound">BRANCH_CLEANUP_SUMMARY.md</ref>:21-28](), [<ref refid="test__github__workflows_8py" kindref="compound">tests/integration/test_github_workflows.py</ref>:215-220]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1754">
<title>Consolidated CI Pipeline (<computeroutput>ci.yml</computeroutput>)</title><para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:104-119](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:102-113]()</para>
<para>The <computeroutput>ci.yml</computeroutput> workflow is the primary CI/CD pipeline, responsible for running a suite of quality and security checks on every push and pull request to the <computeroutput>main</computeroutput> branch. It replaced several redundant Python-specific workflows like <computeroutput>python-app.yml</computeroutput> and <computeroutput>pylint.yml</computeroutput>. The pipeline is structured into two main jobs: <computeroutput>test</computeroutput> and <computeroutput>security</computeroutput>.</para>
<para>The flow diagram below shows the sequence of jobs and steps within the <computeroutput>ci.yml</computeroutput> pipeline.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Start[Trigger:<sp/>Push/PR]<sp/>--&gt;<sp/>TestJob{Test<sp/>Job};</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>TestJob<sp/>[Python<sp/>Matrix:<sp/>3.8,<sp/>3.9,<sp/>3.10,<sp/>3.11,<sp/>3.12]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>direction<sp/>LR</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T1[Install<sp/>Deps]<sp/>--&gt;<sp/>T2[Lint]<sp/>--&gt;<sp/>T3[Format<sp/>Check]<sp/>--&gt;<sp/>T4[Type<sp/>Check]<sp/>--&gt;<sp/>T5[Run<sp/>Pytest]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>TestJob<sp/>--&gt;<sp/>SecurityJob{Security<sp/>Job};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>SecurityJob</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>direction<sp/>LR</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S1[Scan<sp/>with<sp/>bandit]<sp/>--&gt;<sp/>S2[Scan<sp/>with<sp/>safety]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SecurityJob<sp/>--&gt;<sp/>Finish[End]</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:107-119](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:105-108]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1755">
<title>Test Job</title><para>The <computeroutput>test</computeroutput> job runs in a matrix across multiple Python versions to ensure compatibility. It performs a sequence of checks, and a failure in any step will fail the job.</para>
<para><table rows="6" cols="1"><row>
<entry thead="yes" align='left'><para>Python Versions Tested    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>3.8    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>3.9    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>3.10    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>3.11    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>3.12   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:108-109]()</para>
<para>The steps executed in the <computeroutput>test</computeroutput> job are:</para>
<para><orderedlist>
<listitem><para><bold>Install Dependencies</bold>: Installs production and development dependencies from <computeroutput>requirements.txt</computeroutput> and <computeroutput>requirements-dev.txt</computeroutput>, using a cache to speed up builds.</para>
</listitem><listitem><para><bold>Lint</bold>: Runs <computeroutput>flake8</computeroutput> and <computeroutput>pylint</computeroutput> to check for code style and errors.</para>
</listitem><listitem><para><bold>Format Check</bold>: Runs <computeroutput>black</computeroutput> and <computeroutput>isort</computeroutput> to ensure code is formatted correctly.</para>
</listitem><listitem><para><bold>Type Check</bold>: Runs <computeroutput>mypy</computeroutput> for static type checking.</para>
</listitem><listitem><para><bold>Test</bold>: Executes the <computeroutput>pytest</computeroutput> suite with coverage reporting. Coverage reports are uploaded as artifacts.</para>
</listitem></orderedlist>
</para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:109-112](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:79-92]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1756">
<title>Security Job</title><para>The <computeroutput>security</computeroutput> job runs after the <computeroutput>test</computeroutput> job completes successfully. It uses two tools to scan for potential security vulnerabilities:</para>
<para><itemizedlist>
<listitem><para><bold><computeroutput>safety</computeroutput></bold>: Checks for known vulnerabilities in installed Python dependencies.</para>
</listitem><listitem><para><bold><computeroutput>bandit</computeroutput></bold>: Performs static security analysis on the Python codebase to find common security issues.</para>
</listitem></itemizedlist>
</para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:115-118](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:108]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1757">
<title>PR Agent Workflow (<computeroutput>pr-agent.yml</computeroutput>)</title><para>Sources: [<ref refid="test__github__workflows_8py" kindref="compound">tests/integration/test_github_workflows.py</ref>:207-404]()</para>
<para>The <computeroutput>pr-agent.yml</computeroutput> workflow automates pull request reviews, comments, and merging based on specific triggers like PR review comments. It is designed to respond to commands like <computeroutput>@copilot</computeroutput> in comments. The workflow is composed of three distinct jobs.</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1758">
<title>Jobs</title><para><table rows="4" cols="2"><row>
<entry thead="yes" align='left'><para>Job Name   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>pr-agent-trigger</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>The main job that runs on PR comments or reviews. It lints, tests, and posts results back to the PR.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>auto-merge-check</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Checks if a PR can be auto-merged based on approval status and successful checks.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>dependency-update</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Auto-approves and merges dependency updates from trusted bots like Dependabot and Renovate.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="test__github__workflows_8py" kindref="compound">tests/integration/test_github_workflows.py</ref>:414-424]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1759">
<title>Trigger and Logic Flow</title><para>The workflow uses conditional logic (<computeroutput>if</computeroutput>) to execute jobs based on the event context.</para>
<para>This diagram shows the conditional logic for the <computeroutput>pr-agent.yml</computeroutput> jobs.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Triggers</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T1[PR<sp/>Comment<sp/>with<sp/>&apos;@copilot&apos;]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T2[PR<sp/>Review<sp/>&apos;CHANGES_REQUESTED&apos;]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T3[PR<sp/>Sync<sp/>with<sp/>&apos;approved&apos;<sp/>review]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T4[PR<sp/>from<sp/>Dependabot/Renovate]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Jobs</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>J1[pr-agent-trigger]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>J2[auto-merge-check]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>J3[dependency-update]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>--&gt;<sp/>J1</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>T2<sp/>--&gt;<sp/>J1</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>T3<sp/>--&gt;<sp/>J2</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>T4<sp/>--&gt;<sp/>J3</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>J1<sp/>--&gt;<sp/>J1_S1[Setup<sp/>Env]<sp/>--&gt;<sp/>J1_S2[Install<sp/>Deps]<sp/>--&gt;<sp/>J1_S3[Lint<sp/>&amp;<sp/>Test]<sp/>--&gt;<sp/>J1_S4[Post<sp/>Comment<sp/>to<sp/>PR]</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="test__github__workflows_8py" kindref="compound">tests/integration/test_github_workflows.py</ref>:440-447, 532-542, 550-556]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1760">
<title>Permissions</title><para>The workflow requests specific, limited permissions to follow the principle of least privilege.</para>
<para><itemizedlist>
<listitem><para><bold>Top-Level</bold>: <computeroutput>contents: read</computeroutput></para>
</listitem><listitem><para><bold><computeroutput>pr-agent-trigger</computeroutput></bold>: <computeroutput>issues: write</computeroutput> (to comment on PRs)</para>
</listitem><listitem><para><bold><computeroutput>auto-merge-check</computeroutput></bold>: <computeroutput>issues: write</computeroutput>, <computeroutput>pull-requests: write</computeroutput> (to merge)</para>
</listitem><listitem><para><bold><computeroutput>dependency-update</computeroutput></bold>: <computeroutput>pull-requests: write</computeroutput> (to approve and merge)</para>
</listitem></itemizedlist>
</para>
<para>Sources: [tests/integration/test_githubworkflows.py:426-439]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1761">
<title>Branch Management Workflow (<computeroutput>branch-cleanup.yml</computeroutput>)</title><para>Sources: [<ref refid="BRANCH__CLEANUP__SUMMARY_8md" kindref="compound">BRANCH_CLEANUP_SUMMARY.md</ref>:21-28]()</para>
<para>To maintain repository hygiene, the <computeroutput>branch-cleanup.yml</computeroutput> workflow runs automatically on a weekly schedule. Its purpose is to identify and report on stale branches that have not been updated recently.</para>
<para><bold>Key Features:</bold></para>
<para><itemizedlist>
<listitem><para><bold>Schedule</bold>: Runs weekly to detect stale branches.</para>
</listitem><listitem><para><bold>Manual Trigger</bold>: Can be run on-demand from the GitHub Actions UI.</para>
</listitem><listitem><para><bold>Reporting</bold>: Generates a report of stale branches in the workflow run summary.</para>
</listitem></itemizedlist>
</para>
<para>This automation helps prevent the accumulation of unnecessary branches, as detailed in the &quot;&quot; &quot;Branch Cleanup Analysis&quot;.</para>
<para>Sources: [<ref refid="BRANCH__CLEANUP__SUMMARY_8md" kindref="compound">BRANCH_CLEANUP_SUMMARY.md</ref>:21-28]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1762">
<title>Security Workflows</title><para>The repository uses standard, GitHub-provided security workflows to proactively identify vulnerabilities.</para>
<para><table rows="3" cols="2"><row>
<entry thead="yes" align='left'><para>Workflow File   </para>
</entry><entry thead="yes" align='left'><para>Purpose    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>codeql.yml</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Performs deep static code analysis to find security vulnerabilities.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>dependency-review.yml</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Scans for vulnerabilities in dependencies added or changed in a PR.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:104-109](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:109-113]()</para>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1763">
<title>Workflow Validation Testing</title><para>A unique aspect of this project is its comprehensive integration test suite for the GitHub Actions workflows themselves, located in <computeroutput><ref refid="test__github__workflows_8py" kindref="compound">tests/integration/test_github_workflows.py</ref></computeroutput>. These tests use <computeroutput>pytest</computeroutput> to parse the workflow YAML files and validate them against a series of rules, ensuring their correctness and security before they are even run by GitHub Actions.</para>
<para>This diagram shows the structure of the workflow test suite.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">graph<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Pytest<sp/>Suite</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[test_github_workflows.py]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Test<sp/>Classes</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C1[TestWorkflowSyntax]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C2[TestWorkflowStructure]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C3[TestWorkflowActions]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C4[TestPrAgentWorkflow]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C5[TestWorkflowSecurity]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C6[TestWorkflowMaintainability]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C7[TestWorkflowEdgeCases]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>C1</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>C2</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>C3</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>C4</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>C5</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>C6</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A<sp/>--&gt;<sp/>C7</highlight></codeline>
</programlisting></para>
<para>Sources: [<ref refid="test__github__workflows_8py" kindref="compound">tests/integration/test_github_workflows.py</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1764">
<title>Test Coverage</title><para>The test suite is organized into multiple classes, each targeting a specific aspect of workflow validation.</para>
<para><table rows="11" cols="2"><row>
<entry thead="yes" align='left'><para>Test Class   </para>
</entry><entry thead="yes" align='left'><para>Validation Checks    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>TestWorkflowSyntax</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Valid YAML syntax, no duplicate keys, file is readable.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>TestWorkflowStructure</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Presence of <computeroutput>name</computeroutput>, <computeroutput>on</computeroutput>, and <computeroutput>jobs</computeroutput> fields. Ensures jobs have steps.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>TestWorkflowActions</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Actions use version tags (e.g., <computeroutput>@v2</computeroutput>), steps have <computeroutput>name</computeroutput> or <computeroutput>uses</computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>TestPrAgentWorkflow</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Specific checks for <computeroutput>pr-agent.yml</computeroutput>, including triggers, job structure, and step configurations.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>TestWorkflowSecurity</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>No hardcoded secrets, sensitive data uses the <computeroutput>secrets</computeroutput> context.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>TestWorkflowMaintainability</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Steps have descriptive names, file size is reasonable.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>TestWorkflowEdgeCases</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Correct file extensions (<computeroutput>.yml</computeroutput>/<computeroutput>.yaml</computeroutput>), UTF-8 encoding, no tabs for indentation.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>TestWorkflowPerformance</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Recommends use of caching to improve performance.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>TestWorkflowAdvancedSecurity</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Checks for potential environment variable injection and secrets being logged.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>TestWorkflowJobConfiguration</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Jobs specify a standard runner (<computeroutput>runs-on</computeroutput>).   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="test__github__workflows_8py" kindref="compound">tests/integration/test_github_workflows.py</ref>:79, 134, 183, 207, 313, 357, 386, 406, 611, 706](), [<ref refid="COMPREHENSIVE__TEST__SUMMARY_8md" kindref="compound">COMPREHENSIVE_TEST_SUMMARY.md</ref>:120-129]()</para>
<para>This proactive testing of the CI/CD configuration itself is a critical practice that enhances the stability and security of the entire development lifecycle.</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1765">
<title>Conclusion</title><para>The CI/CD system for this project is a modern, consolidated, and robust implementation. By removing legacy clutter and focusing on a single, well-tested pipeline, the project benefits from faster, more reliable, and more secure automated checks. The inclusion of automated PR management, branch cleanup, and comprehensive self-testing of the workflows demonstrates a mature approach to DevOps, ensuring high-quality code and a clean, maintainable repository.</para>
<para>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:231-239](), [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:144-148]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1766">
<title>Developer Scripts and Tooling</title><para><details><summary>Relevant source files</summary><para></para>
<para>The following files were used as context for generating this wiki page:</para>
<para><itemizedlist>
<listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/SUMMARY.md">SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/BRANCH_CLEANUP_SUMMARY.md">BRANCH_CLEANUP_SUMMARY.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/BRANCH_CLEANUP_ANALYSIS.md">BRANCH_CLEANUP_ANALYSIS.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/BRANCH_CLEANUP_QUICK_REFERENCE.md">BRANCH_CLEANUP_QUICK_REFERENCE.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/AUDIT_REPORT.md">AUDIT_REPORT.md</ulink></para>
</listitem><listitem><para><ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/TESTING_GUIDE.md">TESTING_GUIDE.md</ulink> </para>
</listitem></itemizedlist>
</para>
</details></para>
</sect3>
</sect2>
</sect1>
<sect1 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1767">
<title>Developer Scripts and Tooling</title><para>The project is equipped with a comprehensive suite of developer scripts and tooling designed to streamline development, enforce code quality, and maintain repository hygiene. The primary entry point for developers is a <computeroutput>Makefile</computeroutput> that provides shortcuts for common tasks like installation, testing, and formatting. This is supplemented by shell scripts for specialized tasks like branch cleanup and automated quality checks via pre-commit hooks.</para>
<para>This tooling ensures a consistent development environment and automates quality assurance, allowing developers to focus on building features. For detailed setup instructions and workflow, refer to the <ulink url="https://github.com/DashFin/financial-asset-relationship-db/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</ulink> guide.</para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>]()</para>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1768">
<title>Makefile Commands</title><para>The <computeroutput>Makefile</computeroutput> serves as the central command interface for developers, abstracting away the specifics of various tools. It provides a set of simple, memorable commands for all essential development lifecycle tasks.</para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:37-55](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:65-71]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1769">
<title>Command Reference</title><para>The following table summarizes the available <computeroutput>make</computeroutput> commands and their functions.</para>
<para><table rows="15" cols="2"><row>
<entry thead="yes" align='left'><para>Command   </para>
</entry><entry thead="yes" align='left'><para>Description    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make help</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Shows all available commands.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make install</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Installs production dependencies from <computeroutput>requirements.txt</computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make install-dev</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Installs all development and production dependencies.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make test</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs the test suite with <computeroutput>pytest</computeroutput> and generates a coverage report.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make test-fast</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs the test suite without coverage for quicker feedback.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make lint</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs linters, specifically <computeroutput>flake8</computeroutput> and <computeroutput>pylint</computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make format</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Formats code using <computeroutput>black</computeroutput> and sorts imports with <computeroutput>isort</computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make format-check</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Checks formatting with <computeroutput>black</computeroutput> and <computeroutput>isort</computeroutput> without making changes.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make type-check</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs static type checking using <computeroutput>mypy</computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make pre-commit</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Installs the pre-commit hooks.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make pre-commit-run</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs the pre-commit hooks on all files in the repository.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make clean</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Cleans up generated files like <computeroutput>.pytest_cache</computeroutput>, <computeroutput>.coverage</computeroutput>, and <computeroutput>htmlcov/</computeroutput>.    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make run</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Runs the main application (<computeroutput><ref refid="app_8py" kindref="compound">app.py</ref></computeroutput>).    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>make check</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>A comprehensive check that runs <computeroutput>format-check</computeroutput>, <computeroutput>lint</computeroutput>, <computeroutput>type-check</computeroutput>, and <computeroutput>test</computeroutput>.   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:60-75](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:94-113]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1770">
<title><computeroutput>make check</computeroutput> Workflow</title><para>The <computeroutput>make check</computeroutput> command is a crucial part of the local development workflow, ensuring code meets quality standards before it is committed. The following diagram illustrates the sequence of checks it performs.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>A[Start:<sp/>make<sp/>check]<sp/>--&gt;<sp/>B{Format<sp/>Check};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>Pass<sp/>--&gt;<sp/>C{Linting};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>B<sp/>--<sp/>Fail<sp/>--&gt;<sp/>F[End:<sp/>Failure];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--<sp/>Pass<sp/>--&gt;<sp/>D{Type<sp/>Checking};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>C<sp/>--<sp/>Fail<sp/>--&gt;<sp/>F;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>Pass<sp/>--&gt;<sp/>E{Testing};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>D<sp/>--<sp/>Fail<sp/>--&gt;<sp/>F;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--<sp/>Pass<sp/>--&gt;<sp/>G[End:<sp/>Success];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>E<sp/>--<sp/>Fail<sp/>--&gt;<sp/>F;</highlight></codeline>
</programlisting></para>
<para>This diagram shows the sequential execution of format checking, linting, type checking, and testing when <computeroutput>make check</computeroutput> is run.</para>
<para>Sources: [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:75](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:112-113]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1771">
<title>Branch Management and Cleanup</title><para>The repository has a structured approach to branch management to maintain a clean and understandable git history. This includes strict naming conventions, policies for short-lived branches, and automated tooling to identify and clean up stale or merged branches.</para>
<para>Sources: [<ref refid="BRANCH__CLEANUP__ANALYSIS_8md" kindref="compound">BRANCH_CLEANUP_ANALYSIS.md</ref>](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:120-140](), [<ref refid="BRANCH__CLEANUP__SUMMARY_8md" kindref="compound">BRANCH_CLEANUP_SUMMARY.md</ref>]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1772">
<title>Branch Naming Conventions</title><para>To keep branches organized, the project follows a descriptive naming convention based on the type of work being done.</para>
<para><table rows="7" cols="3"><row>
<entry thead="yes" align='left'><para>Prefix   </para>
</entry><entry thead="yes" align='left'><para>Purpose   </para>
</entry><entry thead="yes" align='left'><para>Example    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>feature/</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>New feature development   </para>
</entry><entry thead="no" align='left'><para><computeroutput>feature/add-api-endpoint</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>bugfix/</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Bug fixes   </para>
</entry><entry thead="no" align='left'><para><computeroutput>bugfix/database-connection</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>docs/</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Documentation updates   </para>
</entry><entry thead="no" align='left'><para><computeroutput>docs/update-readme</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>refactor/</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Code refactoring   </para>
</entry><entry thead="no" align='left'><para><computeroutput>refactor/simplify-graph-logic</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>test/</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Test additions or improvements   </para>
</entry><entry thead="no" align='left'><para><computeroutput>test/add-model-validation-tests</computeroutput>    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para><computeroutput>chore/</computeroutput>   </para>
</entry><entry thead="no" align='left'><para>Maintenance tasks   </para>
</entry><entry thead="no" align='left'><para><computeroutput>chore/upgrade-dependencies</computeroutput>   </para>
</entry></row>
</table>
</para>
<para>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:124-132](), [<ref refid="BRANCH__CLEANUP__QUICK__REFERENCE_8md" kindref="compound">BRANCH_CLEANUP_QUICK_REFERENCE.md</ref>:83-91]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1773">
<title>Cleanup Tools</title><para>Two primary tools are provided to assist with branch cleanup: an automated GitHub Actions workflow and an interactive local script.</para>
<para><orderedlist>
<listitem><para><bold>Automated Workflow (<computeroutput>branch-cleanup.yml</computeroutput>)</bold>: This GitHub Actions workflow runs on a weekly schedule to identify stale branches (inactive for 90+ days) and generates a report. It can also be triggered manually. Sources: [<ref refid="BRANCH__CLEANUP__SUMMARY_8md" kindref="compound">BRANCH_CLEANUP_SUMMARY.md</ref>:30-38]()</para>
</listitem><listitem><para><bold>Interactive Script (<computeroutput>cleanup-branches.sh</computeroutput>)</bold>: A shell script for developers to run locally. It provides an interactive menu to identify and safely delete merged or stale branches, both locally and remotely. Sources: [<ref refid="BRANCH__CLEANUP__SUMMARY_8md" kindref="compound">BRANCH_CLEANUP_SUMMARY.md</ref>:40-47](), [<ref refid="BRANCH__CLEANUP__QUICK__REFERENCE_8md" kindref="compound">BRANCH_CLEANUP_QUICK_REFERENCE.md</ref>:5-9]()</para>
</listitem></orderedlist>
</para>
<para>The flow of the interactive <computeroutput>cleanup-branches.sh</computeroutput> script is as follows:</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">flowchart<sp/>TD</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>subgraph<sp/>Interactive<sp/>Script<sp/>Flow</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A[Run<sp/>./cleanup-branches.sh]<sp/>--&gt;<sp/>B{Select<sp/>Action};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>C[List<sp/>Merged<sp/>Branches];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>D[List<sp/>Stale<sp/>Branches];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>B<sp/>--&gt;<sp/>E[List<sp/>Remote<sp/>Branches<sp/>not<sp/>Local];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C<sp/>--&gt;<sp/>C1{Confirm<sp/>Deletion};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D<sp/>--&gt;<sp/>D1{Confirm<sp/>Deletion};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E<sp/>--&gt;<sp/>E1[No<sp/>Action];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C1<sp/>--<sp/>Yes<sp/>--&gt;<sp/>C2[Delete<sp/>Branches];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D1<sp/>--<sp/>Yes<sp/>--&gt;<sp/>D2[Delete<sp/>Branches];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C1<sp/>--<sp/>No<sp/>--&gt;<sp/>B;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D1<sp/>--<sp/>No<sp/>--&gt;<sp/>B;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C2<sp/>--&gt;<sp/>F[End];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>D2<sp/>--&gt;<sp/>F;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
</programlisting></para>
<para>This diagram outlines the user&apos;s journey through the <computeroutput>cleanup-branches.sh</computeroutput> script, from selecting an action to confirming and executing branch deletion.</para>
<para>Sources: [<ref refid="BRANCH__CLEANUP__SUMMARY_8md" kindref="compound">BRANCH_CLEANUP_SUMMARY.md</ref>:40-47](), [<ref refid="BRANCH__CLEANUP__QUICK__REFERENCE_8md" kindref="compound">BRANCH_CLEANUP_QUICK_REFERENCE.md</ref>]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1774">
<title>Quality Assurance Tooling</title><para>The project integrates several tools to automate code quality checks, which are run both locally via pre-commit hooks and in the CI/CD pipeline.</para>
<para>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:121-145](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:100-113]()</para>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1775">
<title>Pre-commit Hooks</title><para>Pre-commit hooks are configured in <computeroutput>.pre-commit-config.yaml</computeroutput> to run a series of checks automatically before a commit is created. This prevents common issues and ensures code adheres to project standards.</para>
<para>The configured hooks perform the following actions:</para>
<para><itemizedlist>
<listitem><para>Trailing whitespace removal</para>
</listitem><listitem><para>End-of-file fixing</para>
</listitem><listitem><para>Validation of YAML, JSON, and TOML files</para>
</listitem><listitem><para>Code formatting with <computeroutput>black</computeroutput></para>
</listitem><listitem><para>Import sorting with <computeroutput>isort</computeroutput></para>
</listitem><listitem><para>Linting with <computeroutput>flake8</computeroutput></para>
</listitem><listitem><para>Static type checking with <computeroutput>mypy</computeroutput></para>
</listitem></itemizedlist>
</para>
<para>To install the hooks, a developer runs <computeroutput>make pre-commit</computeroutput> or <computeroutput>pre-commit install</computeroutput>.</para>
<para>Sources: [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:200-211](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:73-79]()</para>
</sect3>
<sect3 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1776">
<title>Developer Workflow with QA Tools</title><para>The following diagram shows a typical developer workflow, incorporating the automated tooling.</para>
<para><programlisting filename=".mermaid"><codeline><highlight class="normal">sequenceDiagram</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Dev<sp/>as<sp/>Developer</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Local<sp/>as<sp/>Local<sp/>Machine</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>participant<sp/>Remote<sp/>as<sp/>GitHub<sp/>Repository</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Dev-&gt;&gt;Local:<sp/>git<sp/>checkout<sp/>-b<sp/>feature/new-thing</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Dev-&gt;&gt;Local:<sp/>Write<sp/>code<sp/>and<sp/>tests</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Dev-&gt;&gt;Local:<sp/>git<sp/>commit<sp/>-m<sp/>&quot;feat:<sp/>new<sp/>thing&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Local</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Local-&gt;&gt;Local:<sp/>Run<sp/>pre-commit<sp/>hooks<sp/>(format,<sp/>lint,<sp/>etc.)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>right<sp/>of<sp/>Local:<sp/>Hooks<sp/>run<sp/>automatically</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>alt<sp/>Hooks<sp/>Pass</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Local--&gt;&gt;Dev:<sp/>Commit<sp/>successful</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>else<sp/>Hooks<sp/>Fail</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Local--&gt;&gt;Dev:<sp/>Commit<sp/>failed,<sp/>fix<sp/>issues</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>end</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Local</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Dev-&gt;&gt;Remote:<sp/>git<sp/>push<sp/>origin<sp/>feature/new-thing</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Dev-&gt;&gt;Remote:<sp/>Create<sp/>Pull<sp/>Request</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>activate<sp/>Remote</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Remote-&gt;&gt;Remote:<sp/>Run<sp/>CI<sp/>Workflow<sp/>(ci.yml)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Note<sp/>right<sp/>of<sp/>Remote:<sp/>Includes<sp/>lint,<sp/>type-check,<sp/>test,<sp/>security</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Remote--&gt;&gt;Dev:<sp/>PR<sp/>checks<sp/>pass/fail</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>deactivate<sp/>Remote</highlight></codeline>
</programlisting></para>
<para>This sequence diagram illustrates how a developer&apos;s actions trigger automated quality checks both locally (pre-commit) and remotely (CI workflow).</para>
<para>Sources: [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:81-118](), [<ref refid="AUDIT__REPORT_8md" kindref="compound">AUDIT_REPORT.md</ref>:148-160]()</para>
</sect3>
</sect2>
<sect2 id="md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relatiof77ecf5773ca6e409d961a44553707c0_1autotoc_md1777">
<title>Testing Scripts</title><para>Testing is managed through <computeroutput>pytest</computeroutput> and can be invoked using simple <computeroutput>Makefile</computeroutput> commands.</para>
<para><itemizedlist>
<listitem><para><computeroutput>make test</computeroutput>: Runs all tests with coverage reporting. This is the standard command for full validation.</para>
</listitem><listitem><para><computeroutput>make test-fast</computeroutput>: Runs tests without coverage, which is faster and useful for quick checks during development.</para>
</listitem><listitem><para><computeroutput>pytest -m &lt;marker&gt;</computeroutput>: Allows running specific test groups, such as <computeroutput>unit</computeroutput> tests.</para>
</listitem></itemizedlist>
</para>
<para>The project contains a comprehensive test suite, including unit tests for models and logic, and integration tests for configurations and workflows.</para>
<para>Sources: [<ref refid="TESTING__GUIDE_8md" kindref="compound">TESTING_GUIDE.md</ref>:231-259](), [<ref refid="CONTRIBUTING_8md" kindref="compound">CONTRIBUTING.md</ref>:188-199](), [<ref refid="SUMMARY_8md" kindref="compound">SUMMARY.md</ref>:66-67]() </para>
</sect2>
</sect1>
    </detaileddescription>
    <location file="/app/doc_state/github_reposRepoArchDocGenContext/DashFin-FarDb/financial-asset-relationship-db/docs/DashFin-financial-asset-relationship-db-wiki-v2.md"/>
  </compounddef>
</doxygen>
